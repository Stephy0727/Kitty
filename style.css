        @font-face { font-family: 'bulangni'; src: url('') format('truetype'); font-weight: normal; font-style: normal; font-display: swap; }
        :root { --screen-width: 350px; --screen-height: 650px; --secondary-bg: #ffffff; --border-color: #e0e0e0; --text-primary: #1f1f1f; --text-secondary: #8a8a8a; --accent-color: #007bff; }
        html {
            -webkit-text-size-adjust: 100%;
            height: 100%; /* ç¡®ä¿htmlå…ƒç´ ä¹Ÿèƒ½æ’‘æ»¡ */
        }
        body {
            margin: 0;
            font-family: 'bulangni', -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
            font-weight: normal;
            background-color: #f0f2f5;
            height: 100%; /* è®©bodyä¹Ÿæ’‘æ»¡çˆ¶å…ƒç´ (html) */
            overflow: hidden; /* é˜²æ­¢bodyæœ¬èº«å‡ºç°æ»šåŠ¨æ¡ */
        }
        #phone-screen {
            width: 100%;
            /* Use 100vh to ensure it fills the entire screen height */
            height: 100vh; 
            position: relative;
            overflow: hidden;
            display: flex;
            flex-direction: column;
            background-color: #ffffff; /* Your desired white background */
        }
        
        #chat-input-area {
            flex-shrink: 0;
            padding: 8px;
            /* This is the key: adds padding equal to the height of the "black bar" */
            padding-bottom: calc(8px + env(safe-area-inset-bottom)); 
            background-color: rgba(247, 247, 247, 0.8);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            border-top: 1px solid var(--border-color);
            display: flex;
            flex-direction: column;
            gap: 5px;
        }
/* --- ã€æ ¸å¿ƒä¿®æ”¹ã€‘è¿™æ˜¯æ§åˆ¶çŠ¶æ€æ æ˜¾éšçš„æ–°æ ·å¼ --- */
/* 1. é»˜è®¤æƒ…å†µä¸‹ï¼ŒçŠ¶æ€æ ä¾ç„¶æ˜¯éšè—çš„ */
#status-bar {
    display: none;
    /* (åŸæœ‰çš„å…¶ä»–æ ·å¼ï¼Œå¦‚é¢œè‰²ã€å­—ä½“ç­‰ï¼Œä¿æŒä¸å˜å³å¯) */
    padding: 0 20px;
    height: 40px;
    color: white;
    background-color: transparent; /* èƒŒæ™¯ç”±çˆ¶å…ƒç´ æ§åˆ¶ */
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    box-sizing: border-box;
    z-index: 100;
    text-shadow: 0 1px 3px rgba(0,0,0,0.4);
    pointer-events: none; /* è®©ç‚¹å‡»å¯ä»¥ç©¿é€ */
}

/* 2. å½“ #phone-screen å…ƒç´ æ‹¥æœ‰ .status-bar-visible è¿™ä¸ª class æ—¶ï¼Œæ˜¾ç¤ºçŠ¶æ€æ  */
#phone-screen.status-bar-visible #status-bar {
    display: flex;
    justify-content: space-between;
    align-items: center;
}
        
        .header, .qzone-header {
            position: relative;
            z-index: 15;
            flex-shrink: 0;
            padding: 15px 20px;
            /* æ ¸å¿ƒï¼šä½¿ç”¨ calc() è‡ªåŠ¨åŠ ä¸Šé¡¶éƒ¨çš„å®‰å…¨è·ç¦» */
            padding-top: calc(15px + env(safe-area-inset-top)); 
            background-color: rgba(247, 247, 247, 0.8);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            border-bottom: 1px solid var(--border-color);
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-size: 18px;
            font-weight: 600;
        }
        
        
        #status-bar { 
            display: none; 
        }
        #status-bar-time { font-weight: 600; }
        .battery-container { display: flex; align-items: center; gap: 5px; }
        .battery-icon { width: 25px; height: 12px; border: 1px solid white; border-radius: 3px; position: relative; padding: 1px; }
        .battery-icon::after { content: ''; position: absolute; right: -3px; top: 2px; width: 2px; height: 6px; background-color: white; border-radius: 0 1px 1px 0; }
        .battery-level { height: 100%; background-color: white; border-radius: 1px; transition: width 0.5s ease; }
        .battery-container.charging .battery-level { background-color: #4cd964; animation: charge-breath 2s infinite; }
        .battery-container.charging .battery-text { color: #4cd964; }
        @keyframes charge-breath { 0%, 100% { opacity: 1; } 50% { opacity: 0.7; } }
        .screen { width: 100%; height: 100%; position: absolute; top: 0; left: 0; display: flex; flex-direction: column; overflow: hidden; opacity: 0; visibility: hidden; transition: opacity 0.3s, visibility 0.3s; }
        .screen.active { opacity: 1; visibility: visible; z-index: 1; }
        .header { position: relative; z-index: 15; flex-shrink: 0; padding: 15px 20px; padding-top: 45px; background-color: rgba(247, 247, 247, 0.8); backdrop-filter: blur(10px); -webkit-backdrop-filter: blur(10px); border-bottom: 1px solid var(--border-color); display: flex; justify-content: space-between; align-items: center; font-size: 18px; font-weight: 600; }
        .header .header-actions { display: flex; align-items: center; gap: 15px; }
        .header .back-btn, .header .action-btn { font-size: 24px; cursor: pointer; width: 30px; text-align: center; color: var(--accent-color); display: flex; align-items: center; justify-content: center; }
        
        .header .action-btn {
            font-size: 16px; /* ä¸“é—¨ä¸ºâ€œä¸Šä¼ â€ã€â€œ+â€ç­‰æ–‡å­—æŒ‰é’®ç¼©å°å­—å· */
            font-weight: 600; /* å¯ä»¥åŠ ç²—ä¸€ç‚¹è®©å®ƒæ›´æ¸…æ™° */
        }
        
        .header .action-btn img { height: 26px; }
        .header .save-btn { font-size: 16px; color: var(--accent-color); font-weight: 600; cursor: pointer; }
        /* â–¼â–¼â–¼ è¯·ç”¨è¿™ã€ä¸€æ•´å—ä»£ç ã€‘ï¼Œå®Œæ•´æ›¿æ¢æ‰æ‚¨ç°æœ‰çš„ #home-screen, #clock-container, å’Œ #app-grid æ ·å¼ â–¼â–¼â–¼ */
        
        /* --- Start of Replacement Code --- */
        
        #home-screen {
            display: flex;
            flex-direction: column;
            justify-content: flex-start;
            align-items: center;
            box-sizing: border-box;
            background-size: cover;
            background-position: center;
            padding-left: 20px;
            padding-right: 20px;
            /* We remove vertical padding here to rely on margins */
        }
        
        #clock-container {
            text-align: center;
            color: white;
            text-shadow: 0 3px 8px rgba(0,0,0,0.4);
            margin-bottom: 20px;
            flex-shrink: 0;
            /* This is the key: pushes the clock down from the top edge */
            margin-top: calc(60px + env(safe-area-inset-top));
        }
        #app-grid {
            margin-top: auto; /* è‡ªåŠ¨è´´ç´§åº•éƒ¨ */
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 20px;
            width: 100%;
            padding: 20px;
            /* å…³é”®ï¼šä½¿ç”¨ margin-bottom æŠ¬é«˜å›¾æ ‡ï¼Œé€‚é…åº•éƒ¨â€œå°é»‘æ¡â€ */
            margin-bottom: calc(30px + env(safe-area-inset-bottom)); 
        }
        /* â–²â–²â–² æ›¿æ¢ç»“æŸ â–²â–²â–² */
        #main-time {
            font-size: 88px; /* æ¨èï¼šç¨å¾®è°ƒå¤§ä¸€ç‚¹ç‚¹ï¼Œæ›´æ¥è¿‘iOSé”å±çš„æ„Ÿè§‰ */
            font-weight: 600; /* æ ¸å¿ƒä¿®æ”¹1ï¼šå°†å­—ä½“ä»â€œçº¤ç»†(200)â€æ”¹ä¸ºâ€œç²—ä½“(600)â€ï¼Œè¿™æ˜¯æœ€å…³é”®çš„ä¸€æ­¥ */
            letter-spacing: -2px; /* æ¨èï¼šç¨å¾®æ”¶ç´§å­—é—´è·ï¼Œè®©æ•°å­—çœ‹èµ·æ¥æ›´ç´§å‡‘ */
            /* æ ¸å¿ƒä¿®æ”¹2ï¼šæŒ‡å®šå­—ä½“ï¼Œä¼˜å…ˆä½¿ç”¨è‹¹æœç³»ç»Ÿå­—ä½“ */
            font-family: -apple-system, BlinkMacSystemFont, "Helvetica Neue", "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei UI", "Microsoft YaHei", Arial, sans-serif;
        }
        #main-date { 
            font-size: 22px; /* ç¨å¾®æ”¾å¤§ä¸€ç‚¹æ›´åè°ƒ */
            font-weight: normal; /* è‹¹æœé£æ ¼çš„å¸¸è§„ä½“æ—¥æœŸ */
        }
        
        #app-grid { margin-top: auto; display: flex; flex-direction: column; align-items: center; gap: 20px; width: 100%; padding: 20px; }
        .app-row { display: flex; justify-content: center; gap: 25px; width: 100%; }
        .app-icon { display: flex; flex-direction: column; align-items: center; cursor: pointer; color: white; text-shadow: 0 1px 3px rgba(0,0,0,0.5); font-size: 14px; font-weight: 500; text-align: center; }
        .app-icon .icon-bg { width: 65px; height: 65px; border-radius: 18px; background-color: var(--secondary-bg); display: flex; justify-content: center; align-items: center; font-size: 32px; margin-bottom: 8px; box-shadow: 0 4px 8px rgba(0,0,0,0.15); transition: transform 0.2s ease; overflow: hidden; }
        .app-icon:active .icon-bg { transform: scale(0.9); }
        .app-icon .icon-bg img { width: 100%; height: 100%; object-fit: cover; }
        .app-icon .label { color: white; }
        .form-container, .list-container { padding: 20px; overflow-y: auto; flex-grow: 1; display:flex; flex-direction: column; }
        .form-group { margin-bottom: 20px; }
        .form-group label { display: block; margin-bottom: 8px; font-weight: 500; color: var(--text-secondary); }
        .form-group input, .form-group select, .form-group textarea { width: 100%; padding: 12px; border: 1px solid var(--border-color); border-radius: 8px; font-size: 16px; box-sizing: border-box; }
        .form-group textarea { min-height: 80px; resize: vertical; }
        #world-book-content-input { height: calc(100% - 120px); }
        .form-button { width: 100%; padding: 15px; background-color: var(--accent-color); color: white; border: none; border-radius: 8px; font-size: 16px; font-weight: 600; cursor: pointer; margin-top: 10px; }
        .form-button-secondary { background-color: #f0f0f0; color: var(--text-primary); border: 1px solid var(--border-color); }
        #wallpaper-screen .form-container { align-items: center; }
        #wallpaper-preview { width: 180px; height: 320px; border: 2px dashed var(--border-color); background-color: #f0f2f5; margin-bottom: 20px; background-size: cover; background-position: center; border-radius: 10px; display: flex; justify-content: center; align-items: center; color: var(--text-secondary); }
        #wallpaper-upload-input { display: none; }
        /* ä¿®æ”¹åçš„ #world-book-list æ ·å¼ */
        #world-book-list {
            flex-grow: 1;
            overflow-y: auto;
            background-color: var(--secondary-bg);
            padding-top: 80px;
            margin-top: -80px;
        }
        
        /* ä¿®æ”¹åçš„ #chat-list æ ·å¼ï¼Œå»æ‰äº† padding å’Œ margin */
        #chat-list {
            flex-grow: 1;
            background-color: var(--secondary-bg);
            padding-top: 80px; 
            padding-bottom: 90px; /* ä¸ºåº•éƒ¨å¯¼èˆªæ ç•™å‡ºç©ºé—´ */
            box-sizing: border-box;
        }
        
        .list-item { display: flex; flex-direction: column; padding: 12px 20px; cursor: pointer; border-bottom: 1px solid var(--border-color); }
        .list-item:hover { background-color: #f5f5f5; }
        .list-item .item-title { font-weight: 500; font-size: 16px; margin-bottom: 5px; }
        .list-item .item-content { font-size: 14px; color: var(--text-secondary); white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
        .chat-list-item { display: flex; align-items: center; padding: 10px 15px; cursor: pointer; border-bottom: 1px solid var(--border-color); position: relative; }
        .chat-list-item:hover { background-color: #f5f5f5; }
        .chat-list-item .avatar { width: 45px; height: 45px; border-radius: 50%; margin-right: 12px; object-fit: cover; background-color: #ccc; }
        .chat-list-item .info { flex-grow: 1; overflow: hidden; }
        .chat-list-item .name-line { display: flex; align-items: center; gap: 6px; margin-bottom: 2px; }
        .chat-list-item .name { font-weight: 500; color: var(--text-primary); }
        .chat-list-item .group-tag { font-size: 10px; color: var(--accent-color); background-color: #e7f3ff; padding: 2px 6px; border-radius: 4px; font-weight: bold; flex-shrink: 0; }
        .chat-list-item .last-msg { font-size: 13px; color: var(--text-secondary); white-space: nowrap; overflow: hidden; text-overflow: ellipsis; max-width: 180px; }
        #chat-interface-screen { background-size: cover; background-position: center; position: relative; }
        #selection-cancel-btn, #selection-delete-btn { font-size: 16px; color: var(--accent-color); cursor: pointer; padding: 5px; }
        #selection-delete-btn { color: #ff3b30; }
        
        /* â–¼â–¼â–¼ ç”¨è¿™å—ä»£ç æ›¿æ¢æ‰ä½ åŸæ¥çš„ #chat-messages æ ·å¼ â–¼â–¼â–¼ */
        #chat-messages {
            flex-grow: 1;
            overflow-y: auto;
            overflow-x: hidden; /* æ ¸å¿ƒä¿®æ­£1: å¼ºåˆ¶ç¦æ­¢æ°´å¹³æ»šåŠ¨/æ‹–åŠ¨ */
            padding: 10px 15px; /* æ ¸å¿ƒä¿®æ­£2: å°†å·¦å³å†…è¾¹è·å¢åŠ åˆ°15pxï¼Œæä¾›æ›´å¤šå‘¼å¸ç©ºé—´ */
            padding-top: 110px;
            margin-top: -80px;
            display: flex;
            flex-direction: column;
            gap: 20px;
            box-sizing: border-box; /* ç¡®ä¿å†…è¾¹è·è®¡ç®—æ­£ç¡® */
        }
        /* â–²â–²â–² æ›¿æ¢ç»“æŸ â–²â–²â–² */
        #load-more-btn { text-align: center; padding: 10px; color: var(--accent-color); font-size: 14px; cursor: pointer; background-color: transparent; border: none; width: 100%; }
        #load-more-btn:hover { text-decoration: underline; }
        
        .sender-name { font-size: 11px; color: #666; margin-bottom: 3px; }
        
        .message-wrapper.ai .sender-name {
            margin-left: 50px; /* ç¨å¾®è°ƒæ•´ï¼Œä¸å¤´åƒå¯¹é½ */
            margin-bottom: 3px;
            position: absolute; /* è®©å®ƒè„±ç¦»æµï¼Œé¿å…å½±å“æ°”æ³¡å¯¹é½ */
            top: -16px;       /* å®šä½åˆ°æ°”æ³¡ä¸Šæ–¹ */
            left: 0;
        }
        
        /* === ã€å…¨æ–°ã€‘æ¶ˆæ¯å¸ƒå±€ä¸æ—¶é—´æˆ³æ ·å¼ === */
        
        /* 1. æ¶ˆæ¯å•å…ƒçš„æ€»å®¹å™¨ (é‡æ„) */
        .message-wrapper {
            display: flex;          /* ä½¿ç”¨Flexå¸ƒå±€ */
            gap: 8px;               /* æ°”æ³¡å’Œæ—¶é—´æˆ³ä¹‹é—´çš„é—´è· */
            align-items: flex-end;  /* æ ¸å¿ƒï¼šè®©æ°”æ³¡å’Œæ—¶é—´æˆ³åº•éƒ¨å¯¹é½ */
            position: relative;
            max-width: 90%;         /* å¯ä»¥ç¨å¾®æ”¾å®½ä¸€ç‚¹ï¼Œå› ä¸ºæ—¶é—´æˆ³ç°åœ¨åœ¨å¤–é¢äº† */
        }
        
        /* 2. AIæ¶ˆæ¯å•å…ƒé å·¦ */
        .message-wrapper.ai {
            align-self: flex-start;
            flex-direction: row; /* å¤´åƒã€æ°”æ³¡ã€æ—¶é—´æˆ³ï¼Œä»å·¦åˆ°å³æ’åˆ— */
        }
        
        /* 3. ç”¨æˆ·æ¶ˆæ¯å•å…ƒé å³ */
        .message-wrapper.user {
            align-self: flex-end;
            flex-direction: row-reverse; /* æ—¶é—´æˆ³ã€æ°”æ³¡ã€å¤´åƒï¼Œä»å³åˆ°å·¦æ’åˆ— */
        }
        
        /* 4. æ°”æ³¡å’Œå¤´åƒçš„ç›´æ¥å®¹å™¨ (ä¿æŒä¸å˜) */
        .message-bubble {
            display: flex;
            align-items: flex-start;
            gap: 12px;
            max-width: 100%;
            min-width: 0; /* <-- æ ¸å¿ƒä¿®å¤ï¼šå…è®¸æ°”æ³¡å®¹å™¨è‡ªèº«æ”¶ç¼© */
        }
        
        .timestamp {
            /* ç§»é™¤æ—§çš„ position: absolute */
            font-size: 11px;
            color: #999;
            text-shadow: 0 0 3px rgba(255,255,255,0.6);
            white-space: nowrap; /* é˜²æ­¢æ—¶é—´æ¢è¡Œ */
            margin-bottom: 5px;  /* è®©å®ƒå’Œæ°”æ³¡åº•éƒ¨æœ‰è½»å¾®çš„å¯¹é½åç§»ï¼Œæ›´ç¾è§‚ */
            flex-shrink: 0;      /* é˜²æ­¢è¢«å‹ç¼© */
        }
        
        .message-bubble.selected::after { content: 'âœ”'; position: absolute; left: -10px; top: 50%; transform: translateY(-50%); background-color: var(--accent-color); color: white; width: 20px; height: 20px; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 12px; }
        .message-bubble.user.selected::after { left: auto; right: -10px; }
        
        .message-bubble.user { flex-direction: row-reverse; }
        #typing-indicator { align-self: flex-start; display: none; margin: 0 10px 10px; color: var(--text-secondary); }
        
        
        #chat-list-bottom-nav {
            position: absolute;
            bottom: 0;
            left: 0;
            width: 100%;
            z-index: 15;
            display: flex;
            border-top: 1px solid var(--border-color);
            background-color: rgba(247, 247, 247, 0.9);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            /* æ ¸å¿ƒï¼šä¸ºåº•éƒ¨å¢åŠ å®‰å…¨è·ç¦» */
            padding-bottom: env(safe-area-inset-bottom);
        }
        #chat-input-main-row { display: flex; align-items: flex-end; gap: 8px; width: 100%; }
        /* --- è¯·ç”¨è¿™å—æ–°ä»£ç æ›¿æ¢æ—§çš„ #chat-input æ ·å¼ --- */
#chat-input {
    flex-grow: 1;
    border: none;
    padding: 10px 15px;
    border-radius: 20px;
    background-color: var(--secondary-bg);
    font-size: 16px;
    /* æ ¸å¿ƒä¿®æ”¹ 1: è®¾ç½®ä¸€ä¸ªå›ºå®šçš„é«˜åº¦ï¼Œä¾‹å¦‚ 40px */
    height: 40px; 
    /* æ ¸å¿ƒä¿®æ”¹ 2: ç§»é™¤ max-height å±æ€§ */
    /* max-height: 100px; */ 
    resize: none;
    /* æ ¸å¿ƒä¿®æ”¹ 3: å½“å†…å®¹è¶…å‡ºé«˜åº¦æ—¶ï¼Œæ˜¾ç¤ºæ»šåŠ¨æ¡ */
    overflow-y: auto; 
    box-sizing: border-box; /* æ¨èæ·»åŠ ï¼Œç¡®ä¿å†…è¾¹è·è®¡ç®—æ­£ç¡® */
}
        .action-button { border: none; color: white; border-radius: 20px; cursor: pointer; font-weight: 600; font-size: 14px; flex-shrink: 0; }
        #send-btn { background-color: var(--accent-color); height: 40px; padding: 0 15px;}
        .modal { position: absolute; top: 0; left: 0; width: 100%; height: 100%; background-color: rgba(0,0,0,0.4); display: none; justify-content: center; align-items: center; z-index: 100; }
        .modal.visible { display: flex; }
        .modal-content { width: 90%; max-height: 90%; background-color: white; border-radius: 15px; display: flex; flex-direction: column; }
        .modal-header { padding: 15px; font-weight: 600; border-bottom: 1px solid var(--border-color); text-align: center; display: flex; justify-content: space-between; align-items: center; }
        .modal-body { padding: 15px; overflow-y: auto; }
        .modal-footer { padding: 15px; border-top: 1px solid var(--border-color); display: flex; justify-content: space-around; }
        .modal-footer button { width: 45%; padding: 12px; border-radius: 8px; border: 1px solid var(--accent-color); cursor: pointer; font-size: 16px; }
        .modal-footer .save { background-color: var(--accent-color); color: white; }
        .modal-footer .cancel { background-color: white; color: var(--accent-color); }
        .avatar-upload { display: flex; align-items: center; gap: 15px; }
        .avatar-upload img { width: 60px; height: 60px; border-radius: 50%; object-fit: cover; background-color: #eee; }
        .avatar-upload button { padding: 8px 12px; border: 1px solid #ccc; background-color: #f0f0f0; border-radius: 5px; cursor: pointer; }
        #open-persona-library-btn { font-size: 14px; padding: 6px 10px; margin-left: 0; }
        .avatar-upload input[type="file"] { display: none; }
        .theme-selector label { display: inline-flex; align-items: center; margin-right: 15px; margin-bottom: 5px; cursor: pointer; }
        #reset-theme-btn { background: none; border: 1px solid #ccc; color: #555; font-size: 12px; padding: 2px 8px; border-radius: 5px; cursor: pointer; margin-left: 10px; }
        #group-members-settings { display: flex; overflow-x: auto; padding-bottom: 10px; gap: 15px; }
        .member-editor { text-align: center; cursor: pointer; }
        .member-editor img { width: 50px; height: 50px; border-radius: 50%; object-fit: cover; background-color: #eee; margin-bottom: 5px; }
        .member-editor .member-name { font-size: 12px; }
        #notification-bar { position: absolute; top: 40px; left: 50%; width: 90%; z-index: 500; background-color: rgba(250, 250, 250, 0.9); backdrop-filter: blur(10px); -webkit-backdrop-filter: blur(10px); border-radius: 16px; padding: 10px; box-shadow: 0 4px 12px rgba(0,0,0,0.15); display: flex; align-items: center; gap: 12px; cursor: pointer;     transform: translateX(-50%) translateY(-150%); 
            transition: transform 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
            visibility: hidden;
        }
        #notification-bar.visible {
            /* å…³é”®ï¼šåœ¨Yè½´å›åˆ°åŸä½çš„åŒæ—¶ï¼Œä¿æŒXè½´çš„å±…ä¸­å˜æ¢ */
            transform: translateX(-50%) translateY(0);
            visibility: visible;
        }
        #notification-avatar { width: 30px; height: 30px; border-radius: 50%; object-fit: cover; }
        #notification-content .name { font-weight: 600; font-size: 15px; color: #000; }
        #notification-content .message { font-size: 14px; color: #555; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; max-width: 200px; }
        .sticker-image { max-width: 100px; max-height: 100px; display: block; object-fit: contain; }
        
        #chat-input-actions-top { display: flex; gap: 8px; padding: 0 5px; }
        .chat-action-icon-btn { font-size: 24px; padding: 0; width: 38px; height: 38px; line-height: 38px; text-align: center; border-radius: 50%; background-color: rgba(255, 255, 255, 0.5); color: var(--text-primary); backdrop-filter: blur(5px); -webkit-backdrop-filter: blur(5px); border: 1px solid rgba(0,0,0,0.05); cursor: pointer; display:flex; justify-content:center; align-items:center; }
        #sticker-panel { position: absolute; bottom: 0; left: 0; width: 100%; height: 50%; background-color: rgba(242, 242, 247, 0.85); backdrop-filter: blur(15px); -webkit-backdrop-filter: blur(15px); border-top: 1px solid var(--border-color); border-radius: 20px 20px 0 0; z-index: 200; display: flex; flex-direction: column; transform: translateY(100%); transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1); visibility: hidden; }
        #sticker-panel.visible { transform: translateY(0); visibility: visible; }
        #sticker-panel-header { padding: 10px 20px; display: flex; justify-content: space-between; align-items: center; flex-shrink: 0; border-bottom: 1px solid var(--border-color); }
        #sticker-panel-header .title { font-weight: 600; }
        #sticker-panel-header .panel-btn { font-size: 16px; padding: 5px 10px; cursor: pointer; color: var(--accent-color); }
        #sticker-grid { flex-grow: 1; overflow-y: auto; padding: 15px; display: grid; grid-template-columns: repeat(auto-fill, minmax(80px, 1fr)); gap: 15px; }
        /* â–¼â–¼â–¼ ã€è¡¨æƒ…å«ä¹‰æ˜¾ç¤ºã€‘è¯·ç”¨è¿™æ•´å—ä»£ç ï¼Œæ›¿æ¢æ‰æ‚¨ç°æœ‰çš„ .sticker-item æ ·å¼ â–¼â–¼â–¼ */

/* 1. è¡¨æƒ…é¡¹çš„æ€»å®¹å™¨ï¼Œç°åœ¨æ˜¯flexå¸ƒå±€ */
.sticker-item {
    position: relative;
    display: flex;
    flex-direction: column; /* å‚ç›´æ’åˆ—å›¾ç‰‡å’Œæ–‡å­— */
    align-items: center;    /* æ°´å¹³å±…ä¸­ */
    gap: 6px;               /* å›¾ç‰‡å’Œæ–‡å­—ä¹‹é—´çš„é—´è· */
    cursor: pointer;
}

/* 2. è¡¨æƒ…å›¾ç‰‡å®¹å™¨ (è¿™æ˜¯æ–°å¢çš„) */
.sticker-image-container {
    width: 100%;
    aspect-ratio: 1 / 1;    /* ä¿æŒæ­£æ–¹å½¢ */
    background-color: white;
    border-radius: 10px;
    background-size: contain;
    background-repeat: no-repeat;
    background-position: center;
    box-shadow: 0 2px 5px rgba(0,0,0,0.1);
}

/* 3. è¡¨æƒ…å«ä¹‰æ–‡æœ¬ (è¿™æ˜¯æ–°å¢çš„) */
.sticker-name {
    font-size: 12px;           /* å­—ä½“å¤§å° */
    color: var(--text-secondary); /* ä½¿ç”¨æ¬¡è¦æ–‡å­—é¢œè‰² */
    width: 100%;               /* å®½åº¦æ’‘æ»¡ï¼Œä¸ºçœç•¥å·åšå‡†å¤‡ */
    text-align: center;        /* æ–‡å­—å±…ä¸­ */
    
    /* --- è¿™å°±æ˜¯å®ç°â€œè¶…å‡ºçœç•¥å·â€çš„æ ¸å¿ƒä»£ç  --- */
    white-space: nowrap;       /* å¼ºåˆ¶ä¸æ¢è¡Œ */
    overflow: hidden;          /* éšè—è¶…å‡ºçš„éƒ¨åˆ† */
    text-overflow: ellipsis;   /* å°†è¶…å‡ºçš„éƒ¨åˆ†æ˜¾ç¤ºä¸ºçœç•¥å· */
    /* --- æ ¸å¿ƒä»£ç ç»“æŸ --- */
}

/* â–²â–²â–² æ›¿æ¢ç»“æŸ â–²â–²â–² */
        .sticker-item .delete-btn { display: none; position: absolute; top: -5px; right: -5px; width: 20px; height: 20px; background-color: #ff3b30; color: white; border-radius: 50%; text-align: center; line-height: 20px; font-size: 14px; cursor: pointer; border: 2px solid white; }
        #input-actions-wrapper { position: static; display: flex; align-items: flex-end; gap: 8px; flex-shrink: 0; }
        #wait-reply-btn { position: static; bottom: auto; right: auto; width: auto; height: 40px; padding: 0 10px; border-radius: 20px; display: flex; align-items: center; justify-content: center; background-color: rgba(255, 255, 255, 0.6); backdrop-filter: blur(5px); -webkit-backdrop-filter: blur(5px); border: 1px solid rgba(0,0,0,0.08); box-shadow: 0 2px 5px rgba(0,0,0,0.1); transition: opacity 0.2s, transform 0.1s; cursor: pointer;}
        #wait-reply-btn:hover { opacity: 0.8; }
        #wait-reply-btn:active { transform: scale(0.9); }
        #wait-reply-btn img { height: 22px; display: block; margin: auto; }
        .chat-image { max-width: 100%; border-radius: 10px; display: block; }
        .message-bubble.has-image .content { padding: 5px; }
        #custom-modal-overlay { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background-color: rgba(0, 0, 0, 0.5); display: none; align-items: center; justify-content: center; z-index: 1000; opacity: 0; transition: opacity 0.2s ease-in-out; }
        #custom-modal-overlay.visible { display: flex; opacity: 1; }
        #custom-modal { background-color: #fff; width: 280px; border-radius: 14px; box-shadow: 0 4px 20px rgba(0,0,0,0.2); display: flex; flex-direction: column; transform: scale(0.95); transition: transform 0.2s ease-in-out; }
        #custom-modal-overlay.visible #custom-modal { transform: scale(1); }
        .custom-modal-header { padding: 16px; font-size: 17px; font-weight: 600; text-align: center; }
        .custom-modal-body { padding: 0 16px 16px; text-align: center; font-size: 14px; color: #333; line-height: 1.5; }
        .custom-modal-body p { margin: 0; margin-bottom: 12px; }
        /* â–¼â–¼â–¼ Safariå¼¹çª—é˜²æ”¾å¤§ä¿®æ­£ï¼šè¯·ç”¨è¿™å—æ–°æ ·å¼æ›¿æ¢æ—§çš„ .custom-modal-body input æ ·å¼ â–¼â–¼â–¼ */
        
        .custom-modal-body input {
            width: 100%;
            padding: 8px 12px; /* æ¨èï¼šç¨å¾®å¢åŠ å†…è¾¹è·ï¼Œè®©è¾“å…¥æ¡†æ›´å¥½çœ‹ */
            border-radius: 6px;
            border: 1px solid #ccc;
            font-size: 16px; /* æ ¸å¿ƒä¿®æ­£ï¼šä» 14px æé«˜åˆ° 16px é˜²æ­¢è‡ªåŠ¨æ”¾å¤§ */
            box-sizing: border-box;
        }
        
        /* â–²â–²â–² æ›¿æ¢ç»“æŸ â–²â–²â–² */
        .custom-modal-footer { border-top: 1px solid #dbdbdb; display: flex; }
        .custom-modal-footer button { flex: 1; background: none; border: none; padding: 12px; font-size: 17px; cursor: pointer; color: var(--accent-color); }
        .custom-modal-footer button:first-child { border-right: 1px solid #dbdbdb; }
        .custom-modal-footer .confirm-btn { font-weight: 600; }
        .custom-modal-footer .confirm-btn.btn-danger { color: #ff3b30; }
        #preset-actions-modal .custom-modal-footer { flex-direction: column; }
        #preset-actions-modal .custom-modal-footer button { width: 100%; border: none; border-bottom: 1px solid #dbdbdb; padding: 14px; font-size: 18px; }
        #preset-actions-modal .custom-modal-footer button:last-child { border-bottom: none; }
        .custom-multiselect {
            position: relative;
            -webkit-user-select: none; /* å…¼å®¹ Safari */
            user-select: none;
        }
        .select-box { display: flex; align-items: center; width: 100%; padding: 12px; border: 1px solid var(--border-color); border-radius: 8px; font-size: 16px; box-sizing: border-box; background-color: #fff; cursor: pointer; }
        .select-box .selected-options-text { flex-grow: 1; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; color: var(--text-primary); }
        .select-box .arrow-down { margin-left: auto; font-size: 10px; color: var(--text-secondary); transition: transform 0.2s; }
        .select-box.expanded .arrow-down { transform: rotate(180deg); }
        
        .checkboxes-container {
            display: none;
            position: absolute;
            /* æ ¸å¿ƒä¿®æ”¹ï¼šä¸å†ä½¿ç”¨ topï¼Œè€Œæ˜¯ç”¨ margin-top æ¥åˆ›é€ é—´è·ï¼Œæ›´ç¨³å®š */
            top: 100%; 
            margin-top: 5px; /* <-- æ–°å¢ï¼šå‘ä¸‹æ¨å¼€5åƒç´ çš„è·ç¦» */
            left: 0;
            right: 0;
            max-height: 150px;
            overflow-y: auto;
            background-color: #fff;
            border: 1px solid var(--border-color);
            border-radius: 8px;
            z-index: 101;
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
        }
        
        .checkboxes-container.visible { display: block; }
        .checkboxes-container label { display: block; padding: 10px 12px; cursor: pointer; font-weight: normal; color: var(--text-primary); }
        
        .checkboxes-container label {
            display: block;
            padding: 12px 15px; /* <-- ä¿®æ”¹ï¼šå¢åŠ äº†ä¸Šä¸‹å’Œå·¦å³çš„å†…è¾¹è·ï¼Œè®©æ¯ä¸€è¡Œæ›´é«˜æ›´å®½ */
            cursor: pointer;
            font-weight: normal;
            color: var(--text-primary);
            font-size: 15px; /* <-- æ–°å¢ï¼šå°†å­—ä½“å¤§å°ä»é»˜è®¤å€¼æ”¾å¤§åˆ°15px */
        }
        
        .checkboxes-container input { margin-right: 10px; vertical-align: middle; }
        .bg-upload-container { display: flex; align-items: center; gap: 10px; margin-top: 8px; flex-wrap: wrap; }
        .bg-preview-img { max-width: 120px; max-height: 80px; border-radius: 8px; border: 1px solid var(--border-color); object-fit: cover; display: none; }
        #remove-bg-btn { padding: 8px 12px; border: 1px solid #ff3b30; color: #ff3b30; background-color: #fff; border-radius: 5px; cursor: pointer; font-size: 14px; display: none; }
        
        .ai-generated-image { max-width: 180px; border-radius: 12px; display: block; cursor: pointer; transition: transform 0.2s, box-shadow 0.2s; }
        .ai-generated-image:hover { transform: scale(1.05); box-shadow: 0 4px 15px rgba(0,0,0,0.2); }
        .voice-message-body { display: flex; align-items: center; cursor: pointer; padding: 8px 12px; min-width: 80px; max-width: 200px; }
        .message-bubble.user .voice-message-body { color: #1a3d00; flex-direction: row-reverse; }
        .message-bubble.ai .voice-message-body { color: var(--text-primary); }
        .voice-waveform { display: flex; align-items: center; height: 20px; gap: 2px; flex-grow: 1; margin: 0 10px; }
        .voice-waveform div { width: 3px; background-color: currentColor; border-radius: 2px; animation: wave-quiet 1.5s ease-in-out infinite; }
        @keyframes wave-quiet { 0%, 100% { height: 2px; } 50% { height: 10px; } }
        .voice-waveform div:nth-child(2) { animation-delay: 0.2s; } .voice-waveform div:nth-child(3) { animation-delay: 0.4s; } .voice-waveform div:nth-child(4) { animation-delay: 0.6s; } .voice-waveform div:nth-child(5) { animation-delay: 0.8s; }
        .voice-duration {
            /* --- æ ¸å¿ƒä¿®æ­£ --- */
            font-size: var(--chat-font-size, 13px);
            /* --- ä¿®æ­£ç»“æŸ --- */
            font-weight: 500;
            color: var(--text-secondary);
        }
        .message-bubble.user .voice-duration { color: #3e6224; }
        
        /* â–¼â–¼â–¼ ç”¨è¿™å—ä»£ç æ›¿æ¢æ‰ä½ åŸæ¥çš„ .message-bubble .content æ ·å¼ â–¼â–¼â–¼ */
        /* é€šç”¨å†…å®¹åŒºæ ·å¼ï¼Œä¸ºæ—¶é—´æˆ³å’Œå­—ä½“å¤§å°åšå‡†å¤‡ */
        .message-bubble .content {
            position: relative;
            font-size: var(--chat-font-size, 16px);
            padding: 8px 12px;
            line-height: 1.5;
            word-break: break-word; /* æ ¸å¿ƒä¿®æ­£: å¼ºåˆ¶é•¿å•è¯æˆ–URLæ¢è¡Œï¼Œé˜²æ­¢æ’‘ç ´æ°”æ³¡ */
        
        }
        /* â–²â–²â–² æ›¿æ¢ç»“æŸ â–²â–²â–² */
        
        /* === æ°”æ³¡ä¸»é¢˜æ ·å¼ === */
        .message-bubble.user .content { background-color: rgba(255, 255, 255, 0.75); color: #585858; border-radius: 8px 2px 8px 8px; }
        .message-bubble.ai .content { background-color: rgba(255, 255, 255, 0.7); color: #585858; border-radius: 2px 8px 8px 8px; }
              
        .message-bubble::after {
            content: "";
            position: absolute;
            width: 20px;  
            height: 20px; 
            background-size: contain;
            background-repeat: no-repeat;
            opacity: 1; 
            z-index: 1;
        }
              
        #chat-messages[data-theme="pink_blue"] .message-bubble.user .content { background-color: #fff0f6; color: #432531; }
        #chat-messages[data-theme="pink_blue"] .message-bubble.ai .content { background-color: #eff7ff; color: #263a4e; }
        #chat-messages[data-theme="blue_white"] .message-bubble.user .content { background-color: #eff7ff; color: #263a4e; }
        #chat-messages[data-theme="blue_white"] .message-bubble.ai .content { background-color: #f8f9fa; color: #383d41; }
        #chat-messages[data-theme="purple_yellow"] .message-bubble.user .content { background-color: #faf7ff; color: #827693; }
        #chat-messages[data-theme="purple_yellow"] .message-bubble.ai .content { background-color: #fffde4; color: #5C4033; }
        #chat-messages[data-theme="black_white"] .message-bubble.user .content { background-color: #343a40; color: #f8f9fa; }
        #chat-messages[data-theme="black_white"] .message-bubble.ai .content { background-color: #f8f9fa; color: #343a40; }
        #chat-messages[data-theme="yellow_white"] .message-bubble.user .content { background-color: #FFEB3B; color: #5D4037; }
        #chat-messages[data-theme="yellow_white"] .message-bubble.ai .content { background-color: #f8f9fa; color: #383d41; }
        #chat-messages[data-theme="red_black"] .message-bubble.user .content { background-color: #C62828; color: #FFFFFF; }
        #chat-messages[data-theme="red_black"] .message-bubble.ai .content { background-color: #212121; color: #FFFFFF; }
        #chat-messages[data-theme="blue_yellow"] .message-bubble.user .content { background-color: #A0D2EB; color: #153243; }
        #chat-messages[data-theme="blue_yellow"] .message-bubble.ai .content { background-color: #FEF9E7; color: #5D4037; }
        #chat-messages[data-theme="pink_yellow"] .message-bubble.user .content { background-color: #fff0f6; color: #432531; }
        #chat-messages[data-theme="pink_yellow"] .message-bubble.ai .content { background-color: #FEF9E7; color: #5D4037; }
        #chat-messages[data-theme="pink_purple"] .message-bubble.user .content { background-color: #fff0f6; color: #a78396; }
        #chat-messages[data-theme="pink_purple"] .message-bubble.ai .content { background-color: #faf7ff; color: #827693; }
        #chat-messages[data-theme="gray_white"] .message-bubble.user .content { background-color: #e9ecef; color: #495057; }
        #chat-messages[data-theme="gray_white"] .message-bubble.ai .content { background-color: #f8f9fa; color: #383d41; }
        #chat-messages[data-theme="blue_green"] .message-bubble.user .content { background-color: #d1ecf1; color: #0c5460; }
        #chat-messages[data-theme="blue_green"] .message-bubble.ai .content { background-color: #d4edda; color: #155724; }
        #chat-messages[data-theme="pink_white"] .message-bubble.user .content { background-color: #fff0f6; color: #a78396; }
        #chat-messages[data-theme="pink_white"] .message-bubble.ai .content { background-color: #f8f9fa; color: #383d41; }
        #chat-messages[data-theme="pink_black"] .message-bubble.user .content { background-color: #F8BBD0; color: #5B2C6F; }
        #chat-messages[data-theme="pink_black"] .message-bubble.ai .content { background-color: #343a40; color: #f8f9fa; }
        #chat-messages[data-theme="pink_green"] .message-bubble.user .content { background-color: #F8BBD0; color: #5B2C6F; }
        #chat-messages[data-theme="pink_green"] .message-bubble.ai .content { background-color: #C8E6C9; color: #1B5E20; }
        #chat-messages[data-theme="green_black"] .message-bubble.user .content { background-color: #d4edda; color: #155724; }
        #chat-messages[data-theme="green_black"] .message-bubble.ai .content { background-color: #343a40; color: #f8f9fa; }
        
        #transfer-btn { font-weight: bold; }
        #transfer-modal { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background-color: rgba(0,0,0,0.5); display: none; align-items: center; justify-content: center; z-index: 1001; }
        #transfer-modal.visible { display: flex; }
        .transfer-content { background-color: #fff0f5; border-radius: 20px; width: 290px; padding: 20px; box-shadow: 0 5px 25px rgba(255, 105, 180, 0.3); text-align: center; background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="100" height="100" viewBox="0 0 100 100" opacity="0.05"><path d="M50,4 C35,4 28,15 28,24 C28,33 35,32 35,40 C35,48 28,49 28,57 C28,65 35,66 35,74 C35,82 28,83 28,91 C28,99 35,100 50,100 C65,100 72,99 72,91 C72,83 65,82 65,74 C65,66 72,65 72,57 C72,49 65,48 65,40 C65,32 72,33 72,24 C72,15 65,4 50,4 Z" fill="%23FF69B4"/></svg>'); background-repeat: no-repeat; background-position: top right; background-size: 80px; }
        .transfer-header { font-size: 20px; font-weight: bold; color: #a35c7b; margin-bottom: 20px; }
        .transfer-input-group { margin-bottom: 15px; text-align: left; }
        .transfer-input-group label { display: block; font-size: 14px; color: #ff85b3; margin-bottom: 5px; font-weight: 500; }
        .transfer-input-group input { width: 100%; padding: 12px; border-radius: 10px; border: 2px solid #ffcce0; background-color: #fff; font-size: 16px; box-sizing: border-box; }
        .transfer-input-group input:focus { border-color: #ff85b3; outline: none; }
        .transfer-actions { display: flex; justify-content: space-between; gap: 10px; }
        .transfer-actions button { flex: 1; padding: 12px; border: none; border-radius: 10px; font-size: 16px; font-weight: bold; cursor: pointer; transition: transform 0.2s; }
        .transfer-actions button:active { transform: scale(0.95); }
        #transfer-cancel-btn { background-color: #ffdde9; color: #a35c7b; }
        #transfer-confirm-btn { background-color: #ff85b3; color: white; }
        
        .transfer-card { width: 200px; border-radius: 12px; padding: 12px; color: white; position: relative; overflow: hidden; }
        .transfer-card::before { content: 'ğŸ¾'; position: absolute; right: 10px; top: 5px; font-size: 30px; opacity: 0.2; transform: rotate(15deg); }
        .message-bubble.user .transfer-card { background: radial-gradient(circle at top left, #ffc5d5, #ff85b3); }
        .message-bubble.ai .transfer-card { background: radial-gradient(circle at top left, #a1c4fd, #c2e9fb); }
        .transfer-title { font-size: 16px; font-weight: 600; display: flex; align-items: center; gap: 6px; margin-bottom: 8px; }
        .transfer-amount { font-size: 28px; font-weight: bold; margin-bottom: 4px; }
        .transfer-note { font-size: 13px; opacity: 0.9; border-top: 1px solid rgba(255,255,255,0.3); padding-top: 8px; margin-top: 8px; word-break: break-all; }
        
        @keyframes spin { from { transform: rotate(0deg); } to { transform: rotate(360deg); } }
        #listen-together-btn img.rotating { animation: spin 2s linear infinite; }
        #listen-together-btn img.paused { animation-play-state: paused; }
        #music-player-overlay { position: absolute; top: 0; left: 0; width: 100%; height: 100%; z-index: 50; display: none; justify-content: center; align-items: center; background-color: rgba(0,0,0,0.3); }
        #music-player-overlay.visible { display: flex; }
        .music-player-window { width: 90%; background-color: rgba(255, 255, 255, 0.6); backdrop-filter: blur(20px); -webkit-backdrop-filter: blur(20px); border-radius: 20px; box-shadow: 0 8px 32px 0 rgba(31, 38, 135, 0.37); border: 1px solid rgba(255, 255, 255, 0.18); padding: 25px; display: flex; flex-direction: column; align-items: center; color: #1f1f1f; position: relative; }
        #music-playlist-btn { position: absolute; top: 15px; right: 15px; font-size: 24px; cursor: pointer; color: #333; }
        #music-time-counter { font-size: 12px; color: #555; margin-bottom: 20px; }
        #music-player-song-title { font-size: 20px; font-weight: 600; margin-bottom: 5px; text-align: center; }
        #music-player-artist { font-size: 14px; color: #666; margin-bottom: 25px; }
        .music-controls { display: flex; align-items: center; justify-content: center; gap: 20px; width: 100%; margin-bottom: 30px; }
        .music-controls button { background: none; border: none; font-size: 16px; font-weight: bold; cursor: pointer; color: #333; width: 44px; height: 44px; display: flex; justify-content: center; align-items: center; transition: transform 0.2s; }
        .music-controls button:active { transform: scale(0.9); }
        .music-controls .play-pause-btn { font-size: 24px; width: 60px; height: 60px; border-radius: 50%; background-color: rgba(0,0,0,0.05); }
        .music-bottom-actions { display: flex; justify-content: space-between; width: 100%; }
        .music-bottom-actions button { flex: 1; padding: 12px 0; border: none; border-radius: 10px; font-size: 15px; font-weight: 500; cursor: pointer; }
        #music-exit-btn { background-color: rgba(255, 100, 100, 0.7); color: white; margin-right: 5px; }
        #music-return-btn { background-color: rgba(0, 123, 255, 0.7); color: white; margin-left: 5px; }
        
        #music-playlist-panel { position: absolute; bottom: 0; left: 0; width: 100%; height: 70%; background-color: rgba(242, 242, 247, 0.9); backdrop-filter: blur(15px); -webkit-backdrop-filter: blur(15px); border-top: 1px solid var(--border-color); border-radius: 20px 20px 0 0; z-index: 210; display: flex; flex-direction: column; transform: translateY(100%); transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1); visibility: hidden; }
        #music-playlist-panel.visible { transform: translateY(0); visibility: visible; }
        .playlist-header { padding: 15px 20px; display: flex; justify-content: space-between; align-items: center; flex-shrink: 0; border-bottom: 1px solid var(--border-color); font-weight: 600; }
        .playlist-header .panel-btn { font-size: 16px; cursor: pointer; color: var(--accent-color); }
       .playlist-body {
    flex-grow: 1;
    overflow-y: auto;
    /* æ ¸å¿ƒä¿®å¤ï¼šå°† padding-bottom æ˜¾è‘—å¢å¤§ï¼Œç¡®ä¿æœ€åä¸€æ¡æ­Œæ›²ä¸ä¼šè¢«é®æŒ¡ */
    /* åŒæ—¶ä½¿ç”¨ box-sizing ç¡®ä¿å†…è¾¹è·è®¡ç®—æ­£ç¡® */
    padding: 10px 0 80px 0;
    box-sizing: border-box;
}
        .playlist-item { padding: 10px 20px; display: flex; justify-content: space-between; align-items: center; cursor: pointer; border-bottom: 1px solid #eee; }
        .playlist-item.playing { background-color: rgba(0, 123, 255, 0.1); }
        .playlist-item-info .title { font-weight: 500; font-size: 15px; }
        .playlist-item-info .artist { font-size: 12px; color: #666; }
        .playlist-item .delete-track-btn { color: #ff3b30; font-size: 20px; padding: 5px; }
        
        /* Persona Library Styles */
        #persona-library-grid { display: grid; grid-template-columns: repeat(4, 1fr); gap: 15px; padding: 10px; }
        .persona-preset-item { aspect-ratio: 1 / 1; border-radius: 12px; background-size: cover; background-position: center; cursor: pointer; transition: transform 0.2s, box-shadow 0.2s; border: 1px solid rgba(0,0,0,0.1); }
        .persona-preset-item:hover { transform: scale(1.08); box-shadow: 0 4px 10px rgba(0,0,0,0.2); }
        .modal-header .action-button { font-size: 16px; color: var(--accent-color); font-weight: 600; cursor: pointer; background: none; border: none; padding: 5px; }
        
        /* Battery Alert Modal Styles */
        #battery-alert-modal { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background-color: rgba(0, 0, 0, 0.4); display: none; justify-content: center; align-items: center; z-index: 2000; opacity: 0; transition: opacity 0.3s ease; }
        #battery-alert-modal.visible { display: flex; opacity: 1; }
        .battery-alert-content { background-color: rgba(255, 255, 255, 0.9); backdrop-filter: blur(10px); -webkit-backdrop-filter: blur(10px); width: 280px; border-radius: 15px; box-shadow: 0 5px 20px rgba(0,0,0,0.2); text-align: center; padding: 20px; cursor: pointer; transform: scale(0.9); transition: transform 0.3s cubic-bezier(0.34, 1.56, 0.64, 1); }
        #battery-alert-modal.visible .battery-alert-content { transform: scale(1); }
        #battery-alert-image { max-width: 100px; max-height: 100px; margin-bottom: 15px; }
        #battery-alert-text { font-size: 16px; font-weight: 500; color: #333; margin: 0; line-height: 1.4; }
        
        /* è¿™æ˜¯ä½ è¦æ·»åŠ çš„æ–°æ ·å¼ */
        #font-preview {
            transition: font-family 0.3s ease;}
        
        /* === èŠå¤©åˆ—è¡¨ç•Œé¢æ–°å¢æ ·å¼ (è¿™æ˜¯æ–°æ·»åŠ çš„) === */
        #chat-list-screen {
        }
        
        .chat-list-view {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
            opacity: 0;
            visibility: hidden;
            transition: opacity 0.2s, visibility 0.2s;
            z-index: 1; 
        }
        .chat-list-view.active {
            opacity: 1;
            visibility: visible;
            z-index: 2; 
        }
        
        #messages-view {
            overflow-y: auto; 
        }
        
        
        .nav-item {
            flex: 1;
            text-align: center;
            padding: 12px 0;
            font-size: 14px;
            color: var(--text-secondary);
            cursor: pointer;
            transition: color 0.2s;
        }
        
        .nav-item.active {
            color: var(--accent-color);
            font-weight: 600;
        }
        
        /* === åŠ¨æ€ç•Œé¢ (QZone) æ ·å¼ (è¿™æ˜¯æ–°æ·»åŠ çš„) === */
        #qzone-screen {
            background-color: #f0f2f5;
        }
        
        .qzone-header {
            /* position: absolute;  <-- æŠŠè¿™ä¸ªæ”¹æˆ relative */
            position: relative;
            z-index: 10; /* z-index ä¿æŒï¼Œæˆ–è€…å¯ä»¥æ›´é«˜ */
            flex-shrink: 0; /* é˜²æ­¢è¢«å‹ç¼© */
            padding: 15px 20px;
            padding-top: 45px;
            background-color: rgba(247, 247, 247, 0.7); 
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            border-bottom: 1px solid var(--border-color);
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-size: 18px;
            font-weight: 600;
            text-align: center;
        }
        
        .qzone-header .back-btn {
            font-size: 24px;
            cursor: pointer;
            color: var(--accent-color);
        }
        
        .qzone-header span:nth-child(2) { /* "å¥½å‹åŠ¨æ€"æ–‡å­— */
            position: absolute;
            left: 50%;
            transform: translateX(-50%);
        }
        
        .qzone-content {
            flex-grow: 1;
            overflow-y: auto;
            /* padding-top: 80px;  <-- åˆ é™¤è¿™ä¸ªï¼Œå› ä¸ºheaderä¸å†æ˜¯absoluteäº† */
        }
        
        .qzone-profile-header {
            position: relative;
            margin-bottom: 20px;
        }
        
        .qzone-banner-container {
            width: 100%;
            height: 180px; /* èƒŒæ™¯æ¿é«˜åº¦ */
            position: relative;
        }
        
        #qzone-banner-img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }
        
        .qzone-user-info {
            position: absolute;
            bottom: -30px; /* è®©å¤´åƒå’Œæ˜µç§°åŒºåŸŸå‘ä¸‹åç§»ï¼Œä¸€åŠåœ¨èƒŒæ™¯æ¿å†…ï¼Œä¸€åŠåœ¨å¤– */
            left: 20px;
            display: flex;
            align-items: flex-end; /* è®©æ˜µç§°å’Œå¤´åƒåº•éƒ¨å¯¹é½ */
            gap: 10px;
        }
        
        .qzone-avatar-container {
            position: relative;
        }
        
        #qzone-avatar-img {
            width: 70px;
            height: 70px;
            border-radius: 50%;
            border: 3px solid white;
            box-shadow: 0 2px 5px rgba(0,0,0,0.2);
            object-fit: cover;
        }
        
        #qzone-nickname {
            font-size: 18px;
            font-weight: 600;
            color: #fff;
            text-shadow: 0 1px 3px rgba(0,0,0,0.5);
            padding-bottom: 5px; /* å¾®è°ƒä½ç½® */
        }
        
        /* ç¼–è¾‘æŒ‰é’®çš„é€šç”¨æ ·å¼ */
        .qzone-edit-btn {
            position: absolute;
            background-color: rgba(0,0,0,0.4);
            color: white;
            border: none;
            border-radius: 10px;
            padding: 4px 8px;
            font-size: 12px;
            cursor: pointer;
            backdrop-filter: blur(5px);
            -webkit-backdrop-filter: blur(5px);
        }
        
        #change-qzone-banner-btn {
            bottom: 10px;
            right: 10px;
        }
        
        #change-qzone-avatar-btn {
            bottom: 5px;
            right: 5px;
        }
        
        #change-qzone-nickname-btn {
            font-size: 14px;
            padding: 2px 6px;
            margin-left: 5px; /* ä¸æ˜µç§°çš„é—´è· */
            color: var(--text-primary);
            background-color: rgba(255,255,255,0.7);
            border-radius: 5px;
            position: relative; /* è„±ç¦»flexå¸ƒå±€çš„å¯¹é½ */
            bottom: 5px; /* å¾®è°ƒå‚ç›´ä½ç½® */
        }
        
        /* === è®©ç¼–è¾‘åŠŸèƒ½æ›´â€œéšå½¢â€ === */
        #qzone-banner-container,
        #qzone-avatar-container,
        #qzone-nickname {
            cursor: pointer; /* é¼ æ ‡æ‚¬åœæ—¶æ˜¾ç¤ºä¸ºå¯ç‚¹å‡»æ‰‹åŠ¿ */
            transition: opacity 0.2s;
        }
        #qzone-banner-container:hover,
        #qzone-avatar-container:hover,
        #qzone-nickname:hover {
            opacity: 0.85; /* æ‚¬åœæ—¶ç¨å¾®å˜æš—ï¼Œç»™ç”¨æˆ·åé¦ˆ */
        }
        /* éšè—æ‰æ—§çš„ã€ç‹¬ç«‹çš„ç¼–è¾‘æŒ‰é’® */
        .qzone-edit-btn {
            display: none;
        }
        
        /* === æ§åˆ¶ Header å’Œ Bottom Nav çš„æ˜¾éš === */
        /* é»˜è®¤éšè—åŠ¨æ€ç•Œé¢çš„ Header */
        #qzone-screen .qzone-header {
            display: none;
        }
        /* å½“åŠ¨æ€è§†å›¾æ¿€æ´»æ—¶ï¼Œæ˜¾ç¤ºå®ƒçš„Header */
        #qzone-screen.active .qzone-header {
            display: flex;
        }
        
        /* å½“è¿›å…¥åŠ¨æ€è§†å›¾æ—¶ï¼Œéšè—ä¸»Headerå’Œåº•éƒ¨å¯¼èˆªæ  */
        #chat-list-screen.in-qzone-view > .header,
        #chat-list-screen.in-qzone-view > #chat-list-bottom-nav {
            display: none;
        }
        
        .chat-list-item:first-child,
        .chat-group-container:first-child {
            margin-top: 10px; 
        }
        /* === åŠ¨æ€åŠŸèƒ½æ æ ·å¼ === */
        .qzone-actions-bar {
            display: flex;
            justify-content: space-around;
            padding: 10px 0;
            margin: 40px 15px 15px 15px; /* ä¸Šè¾¹è·æ›´å¤§ï¼Œä¸ºæµ®åŠ¨çš„å¤´åƒç•™å‡ºç©ºé—´ */
            background-color: var(--secondary-bg);
            border-radius: 12px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.08);
        }
        
        .action-item {
            flex: 1;
            text-align: center;
            font-size: 15px;
            font-weight: 500;
            color: var(--text-primary);
            cursor: pointer;
            padding: 8px 0;
            position: relative;
        }
        
        /* ç”¨ä¼ªå…ƒç´ åˆ›å»ºåˆ†éš”çº¿ */
        .action-item:not(:last-child)::after {
            content: '';
            position: absolute;
            right: 0;
            top: 50%;
            transform: translateY(-50%);
            width: 1px;
            height: 20px;
            background-color: var(--border-color);
        }
        
        /* === åŠ¨æ€å¸–å­åˆ—è¡¨æ ·å¼ === */
        #qzone-posts-list {
            padding: 0 15px 20px 15px; /* å·¦å³å’Œåº•éƒ¨ç•™å‡ºè¾¹è· */
            display: flex;
            flex-direction: column;
            gap: 20px; /* å¸–å­ä¹‹é—´çš„é—´è· */
        }
        
        .qzone-post-item {
            background-color: var(--secondary-bg);
            border-radius: 12px;
            padding: 15px;
            box-shadow: 0 1px 4px rgba(0,0,0,0.06);
        }
        
        .post-header {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 12px;
        }
        
        .post-header .post-avatar {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            object-fit: cover;
        }
        
        .post-info {
            display: flex;
            flex-direction: column;
        }
        
        .post-info .post-nickname {
            font-weight: 600;
            font-size: 15px;
            color: var(--text-primary);
        }
        
        .post-info .post-timestamp {
            font-size: 12px;
            color: var(--text-secondary);
        }
        
        .post-content {
            font-size: 14px;
            line-height: 1.6;
            color: #333;
            white-space: pre-wrap; /* è®©æ¢è¡Œç¬¦ç”Ÿæ•ˆ */
            word-break: break-word; /* é˜²æ­¢é•¿å•è¯æº¢å‡º */
        }
        
        /* === å‘å¸ƒåŠ¨æ€æ¨¡æ€æ¡†æ ·å¼ === */
        #post-public-text {
            min-height: 80px; /* ç¡®ä¿æ–‡æœ¬åŸŸæœ‰è¶³å¤Ÿçš„é«˜åº¦ */
            resize: vertical;
        }
        
        .post-image-preview-container {
            position: relative;
            width: 100%;
            aspect-ratio: 16 / 9; /* ä¿æŒ16:9çš„é¢„è§ˆæ¯”ä¾‹ */
            background-color: #f0f2f5;
            border: 2px dashed var(--border-color);
            border-radius: 8px;
            margin-bottom: 15px;
            display: none; /* é»˜è®¤éšè— */
            justify-content: center;
            align-items: center;
        }
        .post-image-preview-container.visible {
            display: flex; /* ä¸Šä¼ åæ˜¾ç¤º */
        }
        
        #post-image-preview {
            max-width: 100%;
            max-height: 100%;
            object-fit: contain;
            border-radius: 6px;
        }
        
        #post-remove-image-btn {
            position: absolute;
            top: -10px;
            right: -10px;
            width: 24px;
            height: 24px;
            border-radius: 50%;
            background-color: #ff3b30;
            color: white;
            border: 2px solid white;
            font-size: 16px;
            line-height: 20px;
            text-align: center;
            cursor: pointer;
            box-shadow: 0 1px 4px rgba(0,0,0,0.3);
        }
        
        .post-image-upload-options {
            display: flex;
            gap: 10px;
        }
        
        .post-image-upload-options button {
            flex: 1;
            margin-top: 0;
        }
        
        /* === å‘å¸ƒåŠ¨æ€æ¨¡æ€æ¡† - æ¨¡å¼åˆ‡æ¢æ ·å¼ === */
        .post-mode-switcher {
            display: flex;
            margin-bottom: 20px;
            background-color: #e9ecef;
            border-radius: 8px;
            padding: 4px;
        }
        
        .mode-btn {
            flex: 1;
            padding: 8px;
            border: none;
            background-color: transparent;
            border-radius: 6px;
            font-size: 14px;
            font-weight: 500;
            color: var(--text-secondary);
            cursor: pointer;
            transition: all 0.2s ease-in-out;
        }
        
        .mode-btn.active {
            background-color: var(--secondary-bg);
            color: var(--text-primary);
            box-shadow: 0 1px 3px rgba(0,0,0,0.1);
        }
        
        .post-mode-content {
            display: none; /* é»˜è®¤éƒ½éšè— */
        }
        
        .post-mode-content.active {
            display: block; /* æ¿€æ´»çš„æ‰æ˜¾ç¤º */
        }
        /* === ç›¸å†Œé¡µé¢èƒŒæ™¯è‰² === */
        #album-screen {
            background-color: #f0f2f5; /* ä½¿ç”¨ä¸€ä¸ªæŸ”å’Œçš„æµ…ç°è‰²ï¼Œæ¯”çº¯ç™½æ›´æŠ¤çœ¼ */
        }
        
        /* === ç›¸å†Œé¡µé¢ç½‘æ ¼å¸ƒå±€ === */
        #album-grid-page {
            padding: 15px;
            display: grid;
            grid-template-columns: repeat(2, 1fr); /* æ¯è¡Œæ˜¾ç¤º2ä¸ªç›¸å†Œ */
            gap: 15px;
        }
        
        /* === ç›¸å†Œé¡¹ç›®æ ·å¼ (ç¾åŒ–) === */
        .album-item {
            display: flex;
            flex-direction: column;
            cursor: pointer;
            transition: transform 0.2s ease, box-shadow 0.2s ease;
            border-radius: 8px; /* ç»™æ•´ä¸ªé¡¹ç›®ä¹ŸåŠ ä¸ªåœ†è§’ */
        }
        
        .album-item:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 15px rgba(0,0,0,0.1);
        }
        
        .album-cover {
            aspect-ratio: 1 / 1; /* ä¿æŒå°é¢ä¸ºæ­£æ–¹å½¢ */
            background-size: cover;
            background-position: center;
            border-radius: 8px;
            margin-bottom: 8px;
            background-color: #f0f2f5; /* å°é¢åŠ è½½å‰çš„å ä½é¢œè‰² */
        }
        
        .album-info {
            text-align: center;
        }
        
        .album-name {
            font-weight: 500;
            margin: 0 0 4px 0;
            color: var(--text-primary);
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis; /* é˜²æ­¢é•¿åå­—æ¢è¡Œ */
        }
        
        .album-count {
            font-size: 12px;
            color: var(--text-secondary);
            margin: 0;
        }
        /* === ç›¸å†Œç…§ç‰‡è¯¦æƒ…é¡µ === */
        #album-photos-screen {
            background-color: #f0f2f5;
        }
        
        #photos-grid-page {
            padding: 15px;
            display: grid;
            /* æ¯è¡Œæ˜¾ç¤º3å¼ ç…§ç‰‡ï¼Œå¹¶ä¿æŒé—´è· */
            grid-template-columns: repeat(3, 1fr);
            gap: 10px;
        }
        
        .photo-item {
            position: relative; /* ä¸ºäº†å®šä½åˆ é™¤æŒ‰é’® */
            aspect-ratio: 1 / 1; /* ä¿æŒç…§ç‰‡ä¸ºæ­£æ–¹å½¢ */
            border-radius: 6px;
            overflow: hidden; /* é˜²æ­¢å›¾ç‰‡æº¢å‡ºåœ†è§’ */
            background-color: #e9ecef; /* å›¾ç‰‡åŠ è½½å‰çš„å ä½ç¬¦é¢œè‰² */
        }
        
        .photo-item .photo-thumb {
            width: 100%;
            height: 100%;
            object-fit: cover; /* ä¿è¯å›¾ç‰‡å¡«æ»¡å®¹å™¨ä¸”ä¸å˜å½¢ */
            cursor: pointer;
        }
        
        /* åˆ é™¤æŒ‰é’®çš„æ ·å¼ */
        .photo-item .photo-delete-btn {
            position: absolute;
            top: 5px;
            right: 5px;
            width: 22px;
            height: 22px;
            background-color: rgba(0, 0, 0, 0.6);
            color: white;
            border: none;
            border-radius: 50%;
            font-size: 16px;
            line-height: 22px;
            text-align: center;
            cursor: pointer;
            opacity: 0; /* é»˜è®¤éšè— */
            transition: opacity 0.2s ease;
        }
        
        /* é¼ æ ‡æ‚¬åœåœ¨ç…§ç‰‡ä¸Šæ—¶æ˜¾ç¤ºåˆ é™¤æŒ‰é’® */
        .photo-item:hover .photo-delete-btn {
            opacity: 1;
        }
        /* === å›¾ç‰‡æŸ¥çœ‹å™¨æ¨¡æ€æ¡†æ ·å¼ === */
        #photo-viewer-modal {
            background-color: rgba(0, 0, 0, 0.85);
            z-index: 1002;
            -webkit-backdrop-filter: blur(5px);
            backdrop-filter: blur(5px);
        }
        
        .photo-viewer-content {
            display: flex;
            justify-content: center;
            align-items: center;
            width: 100%;
            height: 100%;
        }
        
        #photo-viewer-image {
            max-width: 90vw;  /* å›¾ç‰‡æœ€å¤§å®½åº¦ä¸ºè§†å£çš„90% */
            max-height: 85vh; /* å›¾ç‰‡æœ€å¤§é«˜åº¦ä¸ºè§†å£çš„85% */
            object-fit: contain;
            border-radius: 8px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
            /* ä¸ºå›¾ç‰‡çš„åˆ‡æ¢æ·»åŠ ä¸€ç‚¹å¹³æ»‘çš„æ·¡å…¥æ·¡å‡ºæ•ˆæœ */
            transition: opacity 0.2s ease-in-out;
        }
        
        /* å…³é—­æŒ‰é’® */
        #photo-viewer-close-btn {
            position: absolute;
            top: 20px;
            right: 20px;
            background: none;
            border: none;
            color: white;
            font-size: 40px;
            font-weight: 200;
            cursor: pointer;
            line-height: 1;
            text-shadow: 0 0 5px black;
        }
        
        /* å·¦å³å¯¼èˆªç®­å¤´ */
        #photo-viewer-modal .nav-arrow {
            position: absolute; /* ç°åœ¨æˆ‘ä»¬ç”¨ç»å¯¹å®šä½æ¥æ§åˆ¶ç®­å¤´ */
            top: 50%;
            transform: translateY(-50%);
            background: none;
            border: none;
            color: rgba(255, 255, 255, 0.7);
            font-size: 50px; /* åœ¨æ‰‹æœºå±å¹•ä¸Šï¼Œå¯ä»¥ç¨å¾®å°ä¸€ç‚¹ */
            font-weight: 100;
            cursor: pointer;
            padding: 10px; /* è°ƒæ•´å†…è¾¹è· */
        -webkit-user-select: none; /* å…¼å®¹ Safari */
            user-select: none;
            transition: color 0.2s;
            z-index: 1003; /* ç¡®ä¿ç®­å¤´åœ¨æœ€ä¸Šå±‚ */
        }
        
        #photo-viewer-prev-btn {
            left: 5px; /* å®šä½å·¦ç®­å¤´ */
        }
        
        #photo-viewer-next-btn {
            right: 5px; /* å®šä½å³ç®­å¤´ */
        }
        
        #photo-viewer-modal .nav-arrow:hover {
            color: white;
        }
        
        /* å½“ç®­å¤´è¢«ç¦ç”¨æ—¶ï¼ˆæ¯”å¦‚ç¬¬ä¸€å¼ æˆ–æœ€åä¸€å¼ ï¼‰ */
        #photo-viewer-modal .nav-arrow:disabled {
            color: rgba(255, 255, 255, 0.2);
            cursor: default;
        }
        /* === å¸–å­å†…å®¹åŒº === */
        .post-main-content {
            /* å®ƒç°åœ¨åªæ˜¯ä¸€ä¸ªæ™®é€šçš„å†…å®¹å®¹å™¨ï¼Œä¸å†éœ€è¦ç‰¹æ®Šæ ·å¼äº† */
        }
        
        /* === å¸–å­äº’åŠ¨å›¾æ ‡åŒº (æ–°æ ·å¼) === */
        .post-feedback-icons {
            display: flex;
            justify-content: flex-end; /* è®©å›¾æ ‡é å³å¯¹é½ */
            align-items: center;
            gap: 12px;
            padding: 8px 0; /* æ ¸å¿ƒä¿®æ”¹ï¼šç»™å›¾æ ‡åŒºåŸŸä¸Šä¸‹å„8pxçš„ç•™ç™½ */
        }
        
        .action-icon {
            cursor: pointer;
            color: var(--text-secondary); /* é»˜è®¤ç°è‰² */
            transition: all 0.2s ease-in-out;
        }
        
        .action-icon svg {
            width: 22px;
            height: 22px;
            fill: none;
            stroke: currentColor;
            stroke-width: 2;
            stroke-linecap: round;
            stroke-linejoin: round;
        }
        
        /* å›¾æ ‡æ¿€æ´»(ç‚¹èµ/æ”¶è—å)çš„æ ·å¼ */
        .action-icon.active {
            color: #ff5252; /* æ¿€æ´»åå˜çº¢è‰² */
            transform: scale(1.1); /* è½»å¾®æ”¾å¤§ */
        }
        
        .action-icon.active.favorite {
            color: #ffc107; /* æ”¶è—ç”¨é»„è‰² */
        }
        
        .action-icon.active svg {
            fill: currentColor; /* æ¿€æ´»åå¡«å……é¢œè‰² */
        }
        
        /* ç‚¹å‡»æ—¶çš„åŠ¨ç”»æ•ˆæœ */
        .animate-like {
            animation: like-bounce 0.4s ease-in-out;
        }
        
        @keyframes like-bounce {
            0%   { transform: scale(1); }
            25%  { transform: scale(0.8); }
            50%  { transform: scale(1.2); }
            75%  { transform: scale(1.05); }
            100% { transform: scale(1.1); }
        }
        
        
        /* === å¸–å­åº•éƒ¨è¯„è®ºåŒºæ ·å¼ (ç°åœ¨æ˜¯ç‹¬ç«‹éƒ¨åˆ†) === */
        .post-footer {
            margin-top: 15px;
            padding-top: 10px;
            border-top: 1px solid #f0f0f0; /* ç”¨ä¸€æ¡æµ…è‰²çº¿åˆ†éš” */
            display: flex;
            align-items: center;
            gap: 8px; /* è°ƒæ•´æ•´ä½“é—´è· */
        }
        
        /* è¯„è®ºåŒºå®¹å™¨ */
        .comment-section {
            flex-grow: 1; /* å æ®å¤§éƒ¨åˆ†ç©ºé—´ */
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .comment-section .comment-avatar {
            width: 28px;
            height: 28px;
            border-radius: 50%;
            object-fit: cover;
            flex-shrink: 0;
        }
        /* â–¼â–¼â–¼ åœ¨è¿™é‡Œæ·»åŠ æ–°æ ·å¼ â–¼â–¼â–¼ */
        .comment-section {
            position: relative; /* æ ¸å¿ƒä¿®æ­£ï¼šä¸ºå¼¹çª—å»ºç«‹å®šä½çš„é”šç‚¹ */
        }
        /* â–²â–²â–² æ·»åŠ ç»“æŸ â–²â–²â–² */
        /* â–¼â–¼â–¼ Safarié˜²æ”¾å¤§ä¿®æ­£ï¼šè¯·ç”¨ä¸‹é¢è¿™ä¸¤å—æ–°æ ·å¼ï¼Œæ›¿æ¢æ—§çš„ .comment-input å’Œ .comment-send-btn æ ·å¼ â–¼â–¼â–¼ */
        
        .comment-section .comment-input {
            width: 100%;
            padding: 8px 12px;
            border: none;
            background-color: #f0f2f5;
            border-radius: 14px;
            font-size: 16px; /* æ ¸å¿ƒä¿®æ­£ï¼šä» 13px æé«˜åˆ° 16px é˜²æ­¢è‡ªåŠ¨æ”¾å¤§ */
            outline: none;
        }
        
        /* (æ¨è) åŒæ—¶è°ƒæ•´å‘é€æŒ‰é’®ï¼Œä¿æŒè§†è§‰ç»Ÿä¸€ */
        .comment-send-btn {
            flex-shrink: 0; /* é˜²æ­¢è¢«å‹ç¼© */
            padding: 8px 15px;
            border: none;
            background-color: var(--accent-color);
            color: white;
            border-radius: 14px;
            font-size: 16px; /* ä» 13px è°ƒæ•´ä¸º 16px */
            font-weight: 500;
            cursor: pointer;
        }
        /* === æœªè¯»æ¶ˆæ¯å°çº¢ç‚¹é€šç”¨æ ·å¼ === */
        .unread-indicator {
            position: absolute;
            top: -8px;      
            right: -15px;    
            min-width: 18px;
            height: 18px;
            padding: 0 5px;
            background-color: #ff3b30;
            color: white;
            font-size: 11px;
            font-weight: bold;
            line-height: 18px;
            text-align: center;
            border-radius: 9px;
            box-shadow: 0 1px 2px rgba(0,0,0,0.2);
            display: none;
            z-index: 1;
        }
        
        /* èŠå¤©ç•Œé¢è¿”å›æŒ‰é’®ä¸Šçš„å°çº¢ç‚¹ (åªæ˜¾ç¤ºç‚¹ï¼Œä¸æ˜¾ç¤ºæ•°å­—) */
        .back-btn-indicator {
            top: 0;
            right: -8px; /* æ”¾åˆ°è¿”å›ç®­å¤´å³ä¸Šè§’ */
            width: 10px;
            height: 10px;
            min-width: 10px;
            padding: 0;
            border-radius: 50%;
        }
        /* === è¯„è®ºåˆ—è¡¨å®¹å™¨ === */
        .post-comments-container {
            padding: 10px 0; /* ä¸Šä¸‹ç•™ç™½ */
            display: flex;
            flex-direction: column;
            gap: 8px; /* è¯„è®ºä¹‹é—´çš„é—´è· */
            font-size: 13px; /* ç»Ÿä¸€è¯„è®ºåŒºå­—ä½“å¤§å° */
        }
        
        /* æ¯ä¸€æ¡è¯„è®º */
        .comment-item {
            line-height: 1.5;
        }
        
        /* è¯„è®ºè€…çš„åå­—ï¼ŒåŠ ç²—å¹¶ä½¿ç”¨ä¸»é¢˜è‰² */
        .comment-item .commenter-name {
            font-weight: 600;
            color: var(--accent-color);
            cursor: pointer;
            margin-right: 5px; /* å’Œè¯„è®ºå†…å®¹ä¹‹é—´ç•™ç‚¹ç©ºéš™ */
        }
        
        /* è¯„è®ºå†…å®¹ */
        .comment-item .comment-text {
            color: var(--text-primary);
            word-break: break-word;
        }
        
        /* === å¸–å­ç‚¹èµåŒºåŸŸæ ·å¼ === */
        .post-likes-section {
            display: flex;
            align-items: center;
            gap: 6px; /* å›¾æ ‡å’Œæ–‡å­—çš„é—´è· */
            padding: 8px 10px; /* å†…è¾¹è· */
            font-size: 13px;
            color: var(--accent-color); /* ä½¿ç”¨ä¸»é¢˜è“è‰² */
            background-color: #f0f5fa; /* ç»™ä¸€ä¸ªæ·¡æ·¡çš„èƒŒæ™¯è‰² */
            border-top: 1px solid #e9eef3;
            border-bottom: 1px solid #e9eef3;
            margin-top: 5px; /* å’Œä¸Šæ–¹çš„å›¾æ ‡ä¿æŒä¸€ç‚¹è·ç¦» */
        }
        
        .post-likes-section .like-icon {
            width: 16px;
            height: 16px;
            fill: currentColor; /* è®©SVGå›¾æ ‡ç»§æ‰¿çˆ¶å…ƒç´ çš„é¢œè‰² */
            flex-shrink: 0; /* é˜²æ­¢å›¾æ ‡è¢«å‹ç¼© */
        }
        
        /* === @æåŠ å¼¹å‡ºèœå•æ ·å¼ === */
        .at-mention-popup {
            position: absolute; /* ç›¸å¯¹äºçˆ¶å…ƒç´ å®šä½ */
            bottom: 100%; /* æ˜¾ç¤ºåœ¨è¾“å…¥æ¡†çš„ä¸Šæ–¹ */
            left: 40px; /* å’Œè¾“å…¥æ¡†å·¦ä¾§å¯¹é½ (è€ƒè™‘äº†å¤´åƒå®½åº¦) */
            width: calc(100% - 40px); /* å®½åº¦å’Œè¾“å…¥æ¡†å·®ä¸å¤š */
            max-height: 120px;
            overflow-y: auto;
            background-color: var(--secondary-bg);
            border: 1px solid var(--border-color);
            border-radius: 8px;
            box-shadow: 0 -4px 12px rgba(0,0,0,0.1);
            z-index: 10;
            display: none; /* é»˜è®¤éšè— */
        }
        
        .at-mention-item {
            padding: 8px 12px;
            font-size: 14px;
            cursor: pointer;
            color: var(--text-primary);
            border-bottom: 1px solid #f0f0f0;
        }
        
        .at-mention-item:last-child {
            border-bottom: none;
        }
        
        .at-mention-item:hover {
            background-color: #f5f5f5;
        }
        /* è®©æ”¶è—è§†å›¾æˆä¸ºä¸€ä¸ªflexå®¹å™¨, ä»ä¸Šåˆ°ä¸‹æ’åˆ— */
        #favorites-view {
            display: flex;
            flex-direction: column;
        }
        
        /* ç¡®ä¿æ”¶è—é¡µçš„headeré«˜åº¦å›ºå®šï¼Œä¸è¢«å‹ç¼© */
        #favorites-view > .header {
            flex-shrink: 0;
        }
        
        /* === æ”¶è—åˆ—è¡¨æ ·å¼ (ä¿®æ­£å) === */
        #favorites-list {
            flex-grow: 1; 
            overflow-y: auto; 
            overflow-x: hidden; /* <-- æ–°å¢è¿™è¡Œï¼Œç¦æ­¢æ°´å¹³æ»šåŠ¨ */
            padding: 15px; 
            display: flex;
            flex-direction: column;
            gap: 15px; 
        }
        
        
        .favorite-item-card {
            background-color: var(--secondary-bg);
            border-radius: 12px;
            padding: 15px;
            box-shadow: 0 1px 4px rgba(0,0,0,0.06);
            position: relative; /* ä¸ºäº†å®šä½åˆ é™¤æŒ‰é’® */
        }
        
        /* å¡ç‰‡å¤´éƒ¨ï¼ŒåŒ…å«å¤´åƒã€åå­—å’Œæ¥æº */
        .fav-card-header {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 12px;
        }
        
        .fav-card-header .avatar {
            width: 36px;
            height: 36px;
            border-radius: 50%;
            object-fit: cover;
        }
        
        .fav-card-header .info {
            flex-grow: 1;
        }
        
        .fav-card-header .name {
            font-weight: 600;
            font-size: 15px;
        }
        
        .fav-card-header .source {
            font-size: 12px;
            color: var(--text-secondary);
        }
        
        /* å¡ç‰‡å†…å®¹ */
        .fav-card-content {
            font-size: 14px;
            line-height: 1.6;
            color: #333;
            white-space: pre-wrap;
            word-break: break-word;
        }
        
        .fav-card-content .chat-image {
            margin-top: 8px; /* å›¾ç‰‡å’Œæ–‡å­—çš„é—´è· */
        }
        
        /* åˆ é™¤æŒ‰é’® */
        .fav-delete-btn {
            position: absolute;
            top: 10px;
            right: 10px;
            width: 28px;
            height: 28px;
            background: #f0f2f5;
            border: none;
            border-radius: 50%;
            cursor: pointer;
            font-size: 18px;
            color: var(--text-secondary);
            line-height: 28px;
            text-align: center;
        }
        
        .fav-delete-btn:hover {
            background-color: #e9ecef;
            color: #ff3b30;
        }
        /* === æœç´¢æ æ ·å¼ === */
        .search-bar-container {
            padding: 10px 15px;
            background-color: #f9f9f9; /* å’Œåˆ—è¡¨èƒŒæ™¯è‰²ä¿æŒä¸€è‡´ */
            position: relative; /* ä¸ºäº†å®šä½æ¸…é™¤æŒ‰é’® */
            flex-shrink: 0;
        }
        
        #favorites-search-input {
            width: 100%;
            padding: 10px 30px 10px 15px; /* å³ä¾§ç•™å‡ºæ¸…é™¤æŒ‰é’®çš„ä½ç½® */
            font-size: 16px;
            border: 1px solid var(--border-color);
            border-radius: 18px; /* åœ†è§’çŸ©å½¢ï¼Œæ›´ç°ä»£åŒ– */
            background-color: var(--secondary-bg);
            box-sizing: border-box;
            outline: none;
        }
        #favorites-search-input:focus {
            border-color: var(--accent-color);
        }
        
        .search-clear-btn {
            position: absolute;
            right: 25px;
            top: 50%;
            transform: translateY(-50%);
            background: #ccc;
            color: white;
            border: none;
            border-radius: 50%;
            width: 20px;
            height: 20px;
            line-height: 20px;
            text-align: center;
            font-size: 16px;
            cursor: pointer;
        }
        /* === èŠå¤©ç•Œé¢å¤šé€‰æ“ä½œæ ä¼˜åŒ– === */
        #chat-interface-screen .header .selection-controls {
            display: flex;
            justify-content: space-between;
            align-items: center;
            width: 100%;
        }
        
        #chat-interface-screen .selection-controls .action-btn {
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            padding: 5px;
        }
        
        /* === æ”¶è—é¡µé¢å¤šé€‰æ¨¡å¼æ ·å¼ === */
        #favorites-view.selection-mode .favorite-item-card {
            transition: transform 0.2s ease, box-shadow 0.2s ease;
        }
        
        /* é€‰æ‹©æ¡†çš„æ ·å¼ */
        .favorite-item-card::before {
            content: '';
            position: absolute;
            left: -25px; /* æŠŠå®ƒæ”¾åœ¨å¡ç‰‡å·¦è¾¹å¤–é¢ */
            top: 50%;
            transform: translateY(-50%);
            width: 20px;
            height: 20px;
            border: 2px solid #ccc;
            border-radius: 50%;
            background-color: white;
            transition: all 0.2s ease;
            opacity: 0; /* é»˜è®¤éšè— */
        }
        
        /* è¿›å…¥é€‰æ‹©æ¨¡å¼æ—¶ï¼Œå¡ç‰‡å‘å³ç§»åŠ¨ï¼Œéœ²å‡ºé€‰æ‹©æ¡† */
        #favorites-view.selection-mode .favorite-item-card {
            transform: translateX(35px);
        }
        #favorites-view.selection-mode .favorite-item-card::before {
            opacity: 1;
        }
        
        /* é€‰ä¸­åçš„æ ·å¼ */
        #favorites-view.selection-mode .favorite-item-card.selected::before {
            background-color: var(--accent-color);
            border-color: var(--accent-color);
            content: 'âœ”';
            color: white;
            font-size: 14px;
            text-align: center;
            line-height: 20px;
        }
        
        /* åº•éƒ¨æ“ä½œæ  (ç»ˆæä¿®æ­£ç‰ˆ) */
        #favorites-action-bar {
            position: absolute; /* â˜… æ”¹ä¸º absoluteï¼Œç›¸å¯¹äº #phone-screen å®šä½ */
            bottom: 0;
            left: 0;
            right: 0;           /* â˜… æ–°å¢ right: 0ï¼Œå’Œ left: 0 ä¸€èµ·æ’‘æ»¡å®½åº¦ */
            width: auto;        /* â˜… æ”¹ä¸º autoï¼Œè®© left/right å†³å®šå®½åº¦ */
            padding: 10px 15px;
            padding-bottom: calc(10px + env(safe-area-inset-bottom)); /* é€‚é…iPhoneåº•éƒ¨å®‰å…¨åŒº */
            background-color: rgba(247, 247, 247, 0.9);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            border-top: 1px solid var(--border-color);
            box-sizing: border-box;
            z-index: 5;
            display: none;
            /* max-width å·²ç»ä¸éœ€è¦äº†ï¼Œå› ä¸ºçˆ¶å…ƒç´ å·²ç»é™åˆ¶äº†å®½åº¦ */
        }
        
        #favorites-action-bar .action-bar-btn {
            width: 100%;
            padding: 12px;
            border-radius: 8px;
            border: none;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            background-color: #ff3b30;
            color: white;
        }
        
        /* === ã€ä¿®æ­£ã€‘èŠå¤©ç•Œé¢å¤´éƒ¨æ§ä»¶åˆ‡æ¢é€»è¾‘ === */
        
        /* é»˜è®¤çŠ¶æ€ï¼šéšè—å¤šé€‰æ§ä»¶ */
        #chat-interface-screen .header .selection-controls {
            display: none;
        }
        
        /* é»˜è®¤çŠ¶æ€ï¼šæ˜¾ç¤ºé»˜è®¤æ§ä»¶ï¼Œå¹¶è®©å®ƒæ’‘æ»¡æ•´ä¸ªå¤´éƒ¨ */
        #chat-interface-screen .header .default-controls {
            display: flex;
            justify-content: space-between;
            align-items: center;
            width: 100%;
        }
        
        /* å½“è¿›å…¥å¤šé€‰æ¨¡å¼æ—¶ï¼šéšè—é»˜è®¤æ§ä»¶ */
        #chat-interface-screen.selection-mode .header .default-controls {
            display: none;
        }
        
        /* å½“è¿›å…¥å¤šé€‰æ¨¡å¼æ—¶ï¼šæ˜¾ç¤ºå¤šé€‰æ§ä»¶ï¼Œå¹¶è®©å®ƒæ’‘æ»¡æ•´ä¸ªå¤´éƒ¨ */
        #chat-interface-screen.selection-mode .header .selection-controls {
            display: flex;
            justify-content: space-between;
            align-items: center;
            width: 100%;
        }
                
        /* === ä¿®æ­£ï¼šæ”¾å¤§æ‰€æœ‰ä¸»è¦çš„â€œ+â€å·æŒ‰é’® === */
        #add-chat-btn,
        #add-world-book-btn,
        #create-album-btn-page {
            font-size: 28px;   /* æ˜¾è‘—å¢å¤§å­—ä½“å¤§å°ï¼Œä½¿å…¶è§†è§‰ä¸Šä¸æ—è¾¹çš„å›¾æ ‡åŒ¹é… */
            font-weight: 300;  /* ä½¿ç”¨æ›´ç»†çš„å­—é‡ï¼Œè®©åŠ å·çœ‹èµ·æ¥æ›´æ¸…çˆ½ï¼Œä¸æ˜¾ç²—ç¬¨ */
            position: relative;/* å…è®¸è¿›è¡Œä½ç½®å¾®è°ƒ */
            top: -1px;         /* å­—ä½“æ”¾å¤§åï¼Œé€šå¸¸éœ€è¦ç¨å¾®å‘ä¸Šç§»åŠ¨ä¸€ç‚¹ï¼Œä½¿å…¶è§†è§‰ä¸Šæ›´å±…ä¸­ */
        }
        
        /* é¢„è§ˆåŒºå®¹å™¨æ ·å¼ */
        #settings-preview-area {
            width: 100%;
            height: 180px; /* ç»™ä¸€ä¸ªå›ºå®šçš„é«˜åº¦ */
            background-color: #f0f2f5;
            border-radius: 8px;
            padding: 15px;
            box-sizing: border-box;
            overflow: hidden; /* é˜²æ­¢å†…å®¹æº¢å‡º */
            display: flex;
            flex-direction: column;
            gap: 10px; /* é¢„è§ˆæ°”æ³¡ä¹‹é—´çš„é—´è· */
            border: 1px solid var(--border-color);
            position: relative; /* ä¸ºäº†å®šä½èƒŒæ™¯ */
        }
        
        /* é¢„è§ˆåŒºçš„èƒŒæ™¯ï¼Œå¯ä»¥å’ŒçœŸå®èŠå¤©ç•Œé¢åŒæ­¥ */
        #settings-preview-area::before {
            content: '';
            position: absolute;
            top: 0; left: 0;
            width: 100%; height: 100%;
            background-size: cover;
            background-position: center;
            z-index: 1;
            opacity: 0.8;
        }
        
        /* è®©é¢„è§ˆæ°”æ³¡åœ¨èƒŒæ™¯ä¹‹ä¸Š */
        #settings-preview-area .message-wrapper {
            position: relative;
            z-index: 2;
        }
        
        /* é¢„è§ˆåŒºå†…ä½¿ç”¨çš„å¤´åƒè¦å°ä¸€ç‚¹ */
        #settings-preview-area .message-bubble .avatar {
            width: 30px;
            height: 30px;
        }
        
        #settings-preview-area .message-bubble .timestamp {
            display: none; /* é¢„è§ˆåŒºä¸éœ€è¦æ˜¾ç¤ºæ—¶é—´æˆ³ */
        }
        
        /* â–¼â–¼â–¼ è¯·å°†è¿™æ®µæ–°CSSç²˜è´´åˆ° <style> çš„æœ«å°¾ â–¼â–¼â–¼ */
        .existing-group-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 12px;
            background-color: #f9f9f9;
            border-radius: 8px;
            border: 1px solid var(--border-color);
        }
        
        .existing-group-item .group-name {
            font-weight: 500;
        }
        
        .existing-group-item .delete-group-btn {
            color: #ff3b30;
            font-size: 20px;
            cursor: pointer;
            padding: 5px;
        }
        .chat-group-container {
            border-bottom: 1px solid var(--border-color);
        }
        .chat-group-container:first-child {
            border-top: 1px solid var(--border-color);
        }
        
        .chat-group-header {
            display: flex;
            align-items: center;
            padding: 12px 15px;
            cursor: pointer;
            background-color: #f7f7f7;
        }
        
        .chat-group-header .arrow {
            font-size: 14px;
            margin-right: 8px;
            transition: transform 0.2s ease;
        }
        
        .chat-group-header.collapsed .arrow {
            transform: rotate(-90deg);
        }
        
        .chat-group-header .group-name {
            font-weight: 600;
            font-size: 15px;
        }
        
        .chat-group-content {
            max-height: 1000px; /* ä¸€ä¸ªè¶³å¤Ÿå¤§çš„å€¼ */
            overflow: hidden;
            transition: max-height 0.3s ease-in-out;
        }
        
        .chat-group-content.collapsed {
            max-height: 0;
        }
        
        /* æ ¼å¼åŠ©æ‰‹æŒ‰é’®çš„å®¹å™¨ */
        .format-helpers {
            display: flex;
            gap: 10px;
            margin-bottom: 15px; /* ä¸ä¸‹æ–¹çš„æ–‡æœ¬æ¡†æ‹‰å¼€è·ç¦» */
            flex-wrap: wrap; /* å¦‚æœæŒ‰é’®å¤ªå¤šå¯ä»¥æ¢è¡Œ */
        }
        
        /* å•ä¸ªæ ¼å¼åŠ©æ‰‹æŒ‰é’®çš„æ ·å¼ */
        .format-btn {
            background-color: #e9ecef;
            color: var(--text-primary);
            border: none;
            padding: 6px 12px;
            border-radius: 16px; /* èƒ¶å›Šå½¢çŠ¶ï¼Œæ›´å‹å¥½ */
            font-size: 13px;
            font-weight: 500;
            cursor: pointer;
            transition: background-color 0.2s;
        }
        
        .format-btn:hover {
            background-color: #dcdfe3;
        }
        
        /* â€œâ€¦â€æŒ‰é’®çš„æ ·å¼ */
        .post-actions-btn {
            margin-left: auto; /* å…³é”®ï¼šè®©å®ƒè‡ªåŠ¨é åˆ°æœ€å³è¾¹ */
            padding: 5px 10px;
            font-size: 20px;
            font-weight: bold;
            color: var(--text-secondary);
            cursor: pointer;
            border-radius: 50%;
            line-height: 1;
        }
        .post-actions-btn:hover {
            background-color: #f0f0f0;
        }
        
        /* åŠ¨æ€ç¼–è¾‘æ¨¡æ€æ¡†çš„æ ·å¼ (å®ƒå°†å¤ç”¨ç°æœ‰çš„æ“ä½œèœå•æ ·å¼) */
        #post-actions-modal .custom-modal-footer button {
            width: 100%;
            border: none;
            border-bottom: 1px solid #dbdbdb;
            padding: 14px;
            font-size: 18px;
        }
        #post-actions-modal .custom-modal-footer button:last-child {
            border-bottom: none;
        }
        #post-actions-modal #cancel-post-action-btn {
            margin-top: 8px;
            border-radius: 8px;
            background-color: #f0f0f0;
        }
        
        /* â–²â–²â–² æ–°CSSç²˜è´´ç»“æŸ â–²â–²â–² */
        
        /* ç»Ÿä¸€é‡ç½®è½¬è´¦å¡ç‰‡å†…æ‰€æœ‰æ–‡å­—çš„ç‰¹æ•ˆå’Œé¢œè‰² */
        #chat-messages .transfer-card .transfer-title,
        #chat-messages .transfer-card .transfer-amount,
        #chat-messages .transfer-card .transfer-note {
            text-shadow: none !important; /* å¼ºåˆ¶ç§»é™¤ä»»ä½•å‘å…‰æˆ–é˜´å½±æ•ˆæœ */
            color: white !important;      /* å¼ºåˆ¶é”å®šæ–‡å­—é¢œè‰²ä¸ºç™½è‰² */
        }
        
        /* åˆ†åˆ«é”å®šå„è‡ªçš„å­—ä½“å¤§å°å’Œå­—é‡ï¼Œé˜²æ­¢è¢«ç¯¡æ”¹ */
        #chat-messages .transfer-card .transfer-title {
            font-size: 16px !important;
            font-weight: 600 !important;
        }
        
        #chat-messages .transfer-card .transfer-amount {
            font-size: 28px !important;
            font-weight: bold !important;
        }
        
        #chat-messages .transfer-card .transfer-note {
            font-size: 13px !important;
            opacity: 0.9 !important;
        }
        
        /* â–¼â–¼â–¼ è¿™æ˜¯æ–°å¢çš„æ ·å¼ï¼Œç”¨äºä¿®æ­£æ‰€æœ‰å¤´éƒ¨æ ‡é¢˜çš„å±…ä¸­é—®é¢˜ â–¼â–¼â–¼ */
        .header > span:nth-child(2),
        #chat-header-title {
            position: absolute;
            left: 50%;
            transform: translateX(calc(-50% - 2px)); /* åœ¨-50%çš„åŸºç¡€ä¸Šï¼Œå†å‘å·¦æ¨2åƒç´  */
            
            /* (å¯é€‰ä½†æ¨è) é˜²æ­¢é•¿æ ‡é¢˜ä¸ä¸¤è¾¹æŒ‰é’®é‡å  */
            max-width: 60%;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }
        
        /* â–¼â–¼â–¼ ã€å…¨æ–°ã€‘å¯è§†åŒ–æ¶ˆæ¯ç¼–è¾‘å™¨æ ·å¼ â–¼â–¼â–¼ */
        #message-editor-container {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }
        
        .message-editor-block {
            background-color: #f9f9f9;
            border: 1px solid var(--border-color);
            border-radius: 8px;
            padding: 12px;
        }
        
        .message-editor-block textarea {
            width: 100%;
            min-height: 60px;
            resize: vertical;
            border: 1px solid #ccc;
            border-radius: 6px;
            padding: 8px;
            font-size: 16px;
            box-sizing: border-box;
        }
        
        .message-editor-block .format-helpers {
            margin-top: 8px;
            margin-bottom: 0; /* è¦†ç›–é»˜è®¤çš„ margin-bottom */
        }
        
        .message-editor-block .delete-block-btn {
            float: right;
            margin-top: -5px;
            background: none;
            border: none;
            color: #ff3b30;
            font-size: 20px;
            cursor: pointer;
        }
        
        /* â–¼â–¼â–¼ ã€å…¨æ–°ã€‘è”ç³»äººé€‰æ‹©å™¨æ ·å¼ â–¼â–¼â–¼ */
        .contact-picker-item {
            display: flex;
            align-items: center;
            padding: 10px 15px;
            cursor: pointer;
            border-bottom: 1px solid var(--border-color);
        }
        .contact-picker-item .checkbox {
            width: 20px;
            height: 20px;
            border: 2px solid #ccc;
            border-radius: 50%;
            margin-right: 15px;
            transition: all 0.2s ease;
        }
        .contact-picker-item.selected .checkbox {
            background-color: var(--accent-color);
            border-color: var(--accent-color);
            content: 'âœ”';
            color: white;
            font-size: 14px;
            text-align: center;
            line-height: 20px;
        }
        .contact-picker-item .avatar {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            margin-right: 12px;
        }
        .contact-picker-item .name {
            font-weight: 500;
        }
        
        /* â–¼â–¼â–¼ ã€å…¨æ–°ã€‘ç¾¤æˆå‘˜ç®¡ç†ç•Œé¢æ ·å¼ â–¼â–¼â–¼ */
        #member-management-list {
            padding: 0; /* ç§»é™¤é»˜è®¤paddingï¼Œè®©åˆ—è¡¨é¡¹æ’‘æ»¡ */
        }
        
        .member-management-item {
            display: flex;
            align-items: center;
            padding: 12px 15px;
            border-bottom: 1px solid var(--border-color);
        }
        
        .member-management-item .avatar {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            margin-right: 12px;
        }
        
        .member-management-item .name {
            flex-grow: 1;
            font-weight: 500;
        }
        
        .member-management-item .remove-member-btn {
            background-color: #ff3b30;
            color: white;
            border: none;
            width: 28px;
            height: 28px;
            border-radius: 50%;
            font-size: 20px;
            line-height: 28px;
            text-align: center;
            cursor: pointer;
            flex-shrink: 0;
        }
        
        #member-management-actions {
            flex-shrink: 0;
            padding: 15px;
            border-top: 1px solid var(--border-color);
            background-color: #f7f7f7;
            display: flex;
            flex-direction: column;
            gap: 10px;
        }
        
        #member-management-actions button {
            width: 100%;
            padding: 15px;
            background-color: var(--accent-color);
            color: white;
            border: none;
            border-radius: 8px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
        }
        #member-management-actions #create-new-member-btn {
            background-color: #4cd964; /* æ–°å»ºç”¨ç»¿è‰²ï¼Œä»¥ç¤ºåŒºåˆ† */
        }
        /* === ã€æ–°å¢ã€‘ç»Ÿä¸€è®¾ç½®é¡µé¢çš„èƒŒæ™¯è‰² (å·²ä¿®æ­£) === */
        #api-settings-screen,
        #font-settings-screen,
        #wallpaper-screen,
        #memories-view,
        #contact-picker-screen,
        #member-management-screen,
        #world-book-editor-screen {  
            background-color: var(--secondary-bg);
        }
        
        /* ç¡®ä¿è¿™äº›é¡µé¢çš„å†…å®¹åŒºèƒ½æ­£ç¡®æ»šåŠ¨ */
        #api-settings-screen .form-container,
        #font-settings-screen .form-container,
        #wallpaper-screen .form-container {
            padding-top: 100px;
            margin-top: -80px;
            background-color: var(--secondary-bg);
        }
        
        /* å£çº¸è®¾ç½®é¡µé¢çš„é¢„è§ˆåŒºæ¯”è¾ƒç‰¹æ®Šï¼Œéœ€è¦é¢å¤–è°ƒæ•´ */
        #wallpaper-screen .form-container {
            align-items: center; /* ä¿æŒå†…å®¹å±…ä¸­ */
        }
        
        /* â–¼â–¼â–¼ ã€å…¨æ–°ã€‘æ¥ç”µè¯·æ±‚ä¸è§†é¢‘é€šè¯ç•Œé¢æ ·å¼ â–¼â–¼â–¼ */
        
        /* --- æ¥ç”µè¯·æ±‚æ¨¡æ€æ¡† --- */
        #incoming-call-modal .incoming-call-content {
            background-color: rgba(40, 40, 40, 0.85);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            border-radius: 20px;
            width: 280px;
            padding: 30px 20px;
            text-align: center;
            color: white;
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
        }
        
        .caller-avatar {
            width: 80px;
            height: 80px;
            border-radius: 50%;
            object-fit: cover;
            margin-bottom: 12px;
            border: 3px solid rgba(255,255,255,0.5);
        }
        
        .caller-name {
            font-size: 20px;
            font-weight: 600;
            margin-bottom: 5px;
        }
        
        .caller-text {
            font-size: 14px;
            color: #ccc;
            margin-bottom: 30px;
        }
        
        .incoming-call-actions {
            display: flex;
            justify-content: space-around;
            align-items: center;
        }
        
        .action-button-wrapper {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 8px;
            font-size: 13px;
            color: #e0e0e0;
        }
        
        .call-action-btn {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            border: none;
            cursor: pointer;
            background-size: 50%;
            background-repeat: no-repeat;
            background-position: center;
            transition: transform 0.2s, box-shadow 0.2s;
            box-shadow: 0 4px 10px rgba(0,0,0,0.2);
        }
        .call-action-btn:active {
            transform: scale(0.9);
        }
        
        .call-action-btn.decline {
            background-color: #ff3b30;
            background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M13.5 16.5L3 6m18 6l-5.6-5.6a1.2 1.2 0 0 0-1.7 0L3 18.2a1.2 1.2 0 0 0-.3 1.2l1.2 3.6a1.2 1.2 0 0 0 1.2.9h15.6a1.2 1.2 0 0 0 1.2-1.2V7.7a1.2 1.2 0 0 0-.3-1.1z"/></svg>');
        }
        
        .call-action-btn.accept {
            background-color: #4cd964;
            background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"/></svg>');
            animation: pulse 1.5s infinite;
        }
        
        @keyframes pulse {
            0% { box-shadow: 0 0 0 0 rgba(76, 217, 100, 0.7); }
            70% { box-shadow: 0 0 0 15px rgba(76, 217, 100, 0); }
            100% { box-shadow: 0 0 0 0 rgba(76, 217, 100, 0); }
        }
        
        
        /* 1. é€šè¯å±å¹•æ€»å®¹å™¨ (ä¿æŒä¸å˜) */
        #video-call-screen {
            background-color: #1c1c1e;
            color: white;
            display: flex;
            flex-direction: column;
            overflow: hidden;
        }
        
        /* 2. é¡¶éƒ¨æ å’Œåº•éƒ¨æ§åˆ¶æ  (ä¿æŒä¸å˜) */
        .video-call-top-bar {
            position: absolute;
            top: 0; left: 0; width: 100%;
            padding: 15px 20px;
            padding-top: 50px;
            background: linear-gradient(to bottom, rgba(0,0,0,0.5), transparent);
            z-index: 10;
            text-align: center;
            box-sizing: border-box;
            pointer-events: none;
        }
        #call-timer {
            font-size: 16px;
            font-weight: 500;
            letter-spacing: 1px;
        }
        .video-call-controls {
            position: absolute;
            bottom: 0; left: 0; width: 100%;
            display: flex;
            justify-content: space-around;
            align-items: center;
            padding: 20px;
            padding-bottom: 40px;
            background: linear-gradient(to top, rgba(0,0,0,0.5), transparent);
            z-index: 10;
            box-sizing: border-box;
        }
        
        /* 3. å‚ä¸è€…å¤´åƒæ˜¾ç¤ºåŒº (ä¿æŒä¸å˜) */
        .video-call-avatar-area {
            flex-grow: 1; 
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 20px;
            padding-top: 80px; /* ç¡®ä¿é¡¶éƒ¨æœ‰è¶³å¤Ÿç©ºé—´ */
            box-sizing: border-box;
            overflow-y: auto; /* â˜… æ–°å¢ï¼šå¦‚æœå¤´åƒå¤ªå¤šï¼Œå…è®¸æ­¤åŒºåŸŸæ»šåŠ¨ */
        }
        
        /* 4. å¤´åƒç½‘æ ¼å®¹å™¨ (ä¿æŒä¸å˜) */
        #participant-avatars-grid {
            display: flex;
            flex-wrap: wrap; 
            justify-content: center;
            align-items: center;
            gap: 15px; /* â˜… ç¨å¾®å‡å°å¤´åƒé—´è· */
            max-width: 100%;
        }
        
        /* 5. å•ä¸ªå‚ä¸è€…çš„å¤´åƒå®¹å™¨ (å¤´åƒç¼©å°) */
        .participant-avatar-wrapper {
            position: relative;
            text-align: center;
            flex-shrink: 0;
        }
        .participant-avatar {
            width: 70px;   /* â˜… ä» 80px ç¼©å°åˆ° 70px */
            height: 70px;  /* â˜… ä» 80px ç¼©å°åˆ° 70px */
            border-radius: 50%;
            object-fit: cover;
            border: 3px solid rgba(255, 255, 255, 0.2);
            transition: all 0.3s ease;
        }
        .participant-name {
            margin-top: 8px;
            font-size: 12px;
            color: #ccc;
        }
        
        /* 6. å‘è¨€è€…å¤´åƒé«˜äº®æ•ˆæœ (ä¿æŒä¸å˜) */
        .participant-avatar.speaking {
            border-color: #4cd964;
            box-shadow: 0 0 20px rgba(76, 217, 100, 0.6);
            transform: scale(1.05);
        }
        
        /* 7. ã€æœ€ç»ˆç‰ˆã€‘å¯¹è¯æ¡†åŒºåŸŸ */
        #video-call-main {
            flex-shrink: 0; 
            height: 30%;   /* â˜… æ ¸å¿ƒä¿®æ”¹ï¼šé«˜åº¦ä»35%å‡å°åˆ°30% */
            margin: 15px 15px 130px 15px; /* â˜… æ ¸å¿ƒä¿®æ”¹ï¼šåº•éƒ¨è¾¹è·ä»120pxå¢åŠ åˆ°130pxï¼Œåˆ›é€ æ˜æ˜¾ç©ºéš™ */
            overflow-y: auto;
            padding: 15px;
            background-color: rgba(255, 255, 255, 0.05);
            border-radius: 20px;
            display: flex;
            flex-direction: column;
            gap: 15px;
            box-sizing: border-box;
        }
        
        /* 8. æ§åˆ¶æŒ‰é’®æ ·å¼ (ä¿æŒä¸å˜) */
        .control-btn {
            width: 70px;
            height: 70px;
            border-radius: 50%;
            border: none;
            cursor: pointer;
            background-repeat: no-repeat;
            background-position: center;
            transition: transform 0.2s, background-color 0.2s;
        }
        .control-btn:active {
            transform: scale(0.9);
        }
        .control-btn.speak-btn {
            background-color: rgba(255,255,255,0.2);
            background-size: 55%;
            background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="white" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M12 1a3 3 0 0 0-3 3v8a3 3 0 0 0 6 0V4a3 3 0 0 0-3-3z"/><path d="M19 10v2a7 7 0 0 1-14 0v-2"/><line x1="12" y1="19" x2="12" y2="23"/><line x1="8" y1="23" x2="16" y2="23"/></svg>');
        }
        .control-btn.hangup-btn {
            background-color: #ff3b30;
            background-size: 50%;
            background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M13.5 16.5L3 6m18 6l-5.6-5.6a1.2 1.2 0 0 0-1.7 0L3 18.2a1.2 1.2 0 0 0-.3 1.2l1.2 3.6a1.2 1.2 0 0 0 1.2.9h15.6a1.2 1.2 0 0 0 1.2-1.2V7.7a1.2 1.2 0 0 0-.3-1.1z"/></svg>');
        }
        .control-btn.join-btn {
            background-color: #007bff;
            background-size: 50%;
            background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M16 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"></path><circle cx="8.5" cy="7" r="4"></circle><line x1="20" y1="8" x2="20" y2="14"></line><line x1="17" y1="11" x2="23" y2="11"></line></svg>');
        }
        
        
        /* â–¼â–¼â–¼ ã€å…¨æ–°ã€‘è§†é¢‘é€šè¯å¯¹è¯æ°”æ³¡æ ·å¼ â–¼â–¼â–¼ */
        .call-message-bubble {
            padding: 10px 15px;
            border-radius: 12px;
            max-width: 85%;
            line-height: 1.6;
            word-break: break-word;
            white-space: pre-wrap;
        }
        
        .call-message-bubble.ai-speech {
            background-color: rgba(255, 255, 255, 0.15);
            align-self: flex-start; /* AIå‘è¨€é å·¦ */
        }
        
        .call-message-bubble.user-speech {
            background-color: #4cd964; /* ç”¨æˆ·å‘è¨€ç”¨ç»¿è‰²ï¼Œç±»ä¼¼å¾®ä¿¡ */
            align-self: flex-end;   /* ç”¨æˆ·å‘è¨€é å³ */
            text-align: left; /* ç¡®ä¿ç”¨æˆ·æ°”æ³¡å†…çš„æ–‡å­—æ˜¯å·¦å¯¹é½çš„ */
        }
        
        /* â–¼â–¼â–¼ ã€å…¨æ–°æ·»åŠ ã€‘æ­£åœ¨å‘¼å«ç•Œé¢æ ·å¼ â–¼â–¼â–¼ */
        #outgoing-call-screen {
            background-color: #1c1c1e;
            color: white;
            justify-content: center; /* å‚ç›´å±…ä¸­ */
            align-items: center;   /* æ°´å¹³å±…ä¸­ */
        }
        
        .outgoing-call-content {
            display: flex;
            flex-direction: column;
            align-items: center;
            text-align: center;
        }
        
        .outgoing-call-actions {
            margin-top: 50px; /* å’Œä¸Šæ–¹æ–‡å­—æ‹‰å¼€è·ç¦» */
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 8px;
            font-size: 13px;
            color: #e0e0e0;
        }
        
        /* 1. åŠ¨æ€å¸–å­çš„å¤–å±‚å®¹å™¨ï¼Œæˆ‘ä»¬éœ€è¦å®ƒæ¥å®šä½å’Œè£å‰ª */
        .qzone-post-container {
            position: relative; /* è®©å†…éƒ¨çš„åˆ é™¤æŒ‰é’®å¯ä»¥ç›¸å¯¹äºå®ƒå®šä½ */
            overflow: hidden;   /* éšè—æ‰è¶…å‡ºéƒ¨åˆ†çš„åˆ é™¤æŒ‰é’® */
            border-radius: 12px;/* å’Œå†…éƒ¨å¡ç‰‡ä¿æŒä¸€è‡´çš„åœ†è§’ */
        }
        
        /* 2. å¯æ»‘åŠ¨çš„å†…å®¹å¡ç‰‡ï¼Œå¢åŠ ä¸€ä¸ªå¹³æ»‘çš„è¿‡æ¸¡æ•ˆæœ */
        .qzone-post-item {
            transition: transform 0.3s ease;
            background-color: var(--secondary-bg); /* ç¡®ä¿å®ƒæœ‰èƒŒæ™¯è‰²ï¼Œèƒ½ç›–ä½ä¸‹é¢çš„åˆ é™¤æŒ‰é’® */
            position: relative; /* ç¡®ä¿å®ƒåœ¨æœ€ä¸Šå±‚ */
            z-index: 2;
        }
        
        /* 3. ã€æ ¸å¿ƒã€‘è¿™å°±æ˜¯é‚£ä¸ªâ€œåˆ é™¤â€æŒ‰é’®çš„æ ·å¼ï¼*/
        .qzone-post-delete-action {
            position: absolute; /* ç»å¯¹å®šä½ï¼Œè„±ç¦»æ–‡æ¡£æµ */
            top: 0;
            right: 0;
            bottom: 0;
            width: 90px; /* åˆ é™¤æŒ‰é’®çš„å®½åº¦ */
            background-color: #ff3b30; /* æ‚¨æƒ³è¦çš„çº¢è‰²èƒŒæ™¯ */
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 500;
            cursor: pointer;
            z-index: 1; /* ç¡®ä¿å®ƒåœ¨å¡ç‰‡ä¸‹é¢ */
        }
        
        /* 4. å½“å¡ç‰‡å·¦æ»‘æ—¶ï¼ŒæŠŠå®ƒå‘å·¦ç§»åŠ¨ï¼Œéœ²å‡ºåˆ é™¤æŒ‰é’® */
        .qzone-post-item.swiped {
            transform: translateX(-90px); /* ç§»åŠ¨çš„è·ç¦»å’Œåˆ é™¤æŒ‰é’®çš„å®½åº¦ä¸€è‡´ */
        }
        
        
        /* 1. â€œæ‹ä¸€æ‹â€çš„å±å¹•éœ‡åŠ¨åŠ¨ç”» */
        @keyframes pat-shake {
            0%, 100% { transform: translateX(0); }
            10%, 30%, 50%, 70%, 90% { transform: translateX(-3px); }
            20%, 40%, 60%, 80% { transform: translateX(3px); }
        }
        
        .pat-animation {
            animation: pat-shake 0.4s ease-in-out;
        }
        
        /* 2. â€œæ‹ä¸€æ‹â€ç³»ç»Ÿæç¤ºæ¶ˆæ¯çš„æ ·å¼ */
        .system-message {
            align-self: center; /* å±…ä¸­æ˜¾ç¤º */
            padding: 4px 12px;
            margin: 5px 0;
            background-color: rgba(0, 0, 0, 0.1);
            color: var(--text-secondary);
            font-size: 12px;
            border-radius: 10px;
            text-align: center;
            max-width: 80%;
        }
        
        
        /* è®©â€œæ‹ä¸€æ‹â€ç±»å‹çš„ wrapper å±…ä¸­ */
        .message-wrapper.system-pat {
            justify-content: center;
            align-self: center;
            margin: 5px 0;
            max-width: 80%;
        }
        /* â€œæ‹ä¸€-æ‹â€æ¶ˆæ¯æ°”æ³¡çš„æ ·å¼ */
        .message-bubble.system-bubble {
            background-color: rgba(0, 0, 0, 0.1);
            color: var(--text-secondary);
            font-size: 12px;
            padding: 4px 12px;
            border-radius: 10px;
        }
        
        
        /* === ä¿®æ­£ï¼šè®©é¡¶éƒ¨æ“ä½œæ å¯ä»¥æ¨ªå‘æ»šåŠ¨ === */
        #chat-input-actions-top {
            display: flex;
            gap: 8px;
            padding: 0 5px;
        
            /* --- æ ¸å¿ƒä»£ç å¼€å§‹ --- */
            overflow-x: auto;      
            flex-wrap: nowrap;     
            -webkit-overflow-scrolling: touch; 
        
            scrollbar-width: none; 
            -ms-overflow-style: none;  
        }
        
        #chat-input-actions-top::-webkit-scrollbar {
            display: none; 
        }
        /* === ã€å…¨æ–°ã€‘èŠå¤©ç•Œé¢å¤´éƒ¨çŠ¶æ€æ æ ·å¼ === */
        
        /* 1. æ ‡é¢˜å’ŒçŠ¶æ€çš„æ€»å®¹å™¨ï¼Œä½¿ç”¨flexå¸ƒå±€è®©å®ƒä»¬å‚ç›´æ’åˆ— */
        #chat-header-title-wrapper {
            display: flex;
            flex-direction: column;
            align-items: center; /* æ°´å¹³å±…ä¸­ */
            gap: 2px; /* æ ‡é¢˜å’ŒçŠ¶æ€ä¹‹é—´çš„å¾®å°é—´è· */
            
            /* ä¸ºäº†è®©å®ƒèƒ½åœ¨flexå¸ƒå±€ä¸­æ­£ç¡®å±…ä¸­ */
            position: absolute;
            left: 50%;
            transform: translateX(-50%);
            max-width: 60%;
        }
        
        /* 2. ä¸»æ ‡é¢˜çš„æ ·å¼å¾®è°ƒ */
        #chat-header-title {
            font-size: 16px; /* å¯ä»¥ç¨å¾®ç¼©å°ä¸€ç‚¹ï¼Œç»™çŠ¶æ€æ ç•™å‡ºç©ºé—´ */
            font-weight: 600;
            position: static; /* è¦†ç›–æ‰æ—§çš„absoluteå®šä½ */
            transform: none;  /* è¦†ç›–æ‰æ—§çš„transform */
            /* ä¿è¯é•¿æ ‡é¢˜ä¹Ÿèƒ½æ­£ç¡®æ˜¾ç¤ºçœç•¥å· */
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
            max-width: 100%;
        }
        
        /* 3. çŠ¶æ€æ å®¹å™¨ */
        #chat-header-status {
            display: flex;
            align-items: center;
            gap: 5px;
            font-size: 11px;
            color: var(--text-secondary);
            transition: all 0.3s ease;
        }
        
        /* 4. çŠ¶æ€å°åœ†ç‚¹ */
        .status-dot {
            width: 7px;
            height: 7px;
            border-radius: 50%;
            background-color: #4cd964; /* é»˜è®¤ç»¿è‰²ï¼Œä»£è¡¨åœ¨çº¿ */
            transition: background-color 0.3s ease;
        }
        
        /* å½“AIçŠ¶æ€ä¸ºâ€œå¿™ç¢Œâ€æˆ–â€œç¦»å¼€â€æ—¶ï¼Œè®©åœ†ç‚¹å˜ç°è‰² */
        #chat-header-status.busy .status-dot {
            background-color: #cccccc;
        }
        
        /* 5. çŠ¶æ€æ–‡æœ¬ */
        .status-text {
            font-weight: 500;
        }
        
        /* === ã€å…¨æ–°ç¾åŒ–ç‰ˆã€‘å›å¿†å¡ç‰‡æ ·å¼ === */
        
        /* 1. å¡ç‰‡æ€»å®¹å™¨ï¼šè¿™é‡Œè´Ÿè´£å®šä¹‰æ•´ä½“çš„èƒŒæ™¯è‰²å’Œè¾¹æ¡† */
        .memory-card {
            background-color: #fffaf0; /* ç»Ÿä¸€çš„ã€æ¸©æš–çš„ç±³é»„è‰²èƒŒæ™¯ */
            border-radius: 12px;
            padding: 15px; /* åœ¨å¡ç‰‡å››å‘¨ç•™å‡ºå†…è¾¹è· */
            box-shadow: 0 2px 6px rgba(0,0,0,0.07);
            border-left: 5px solid #ffb74d; 
            display: flex; /* è®©å®ƒæˆä¸ºflexå®¹å™¨ï¼Œæ–¹ä¾¿å†…éƒ¨å…ƒç´ æ’åˆ— */
            flex-direction: column; /* è®©å¤´éƒ¨å’Œå†…å®¹å‚ç›´å †å  */
            gap: 8px; /* åœ¨å¤´éƒ¨å’Œå†…å®¹ä¹‹é—´åˆ›é€ ä¸€ä¸ªè‡ªç„¶çš„é—´è· */
        }
        
        /* 2. å¤´éƒ¨å®¹å™¨ï¼šç°åœ¨åªè´Ÿè´£å¸ƒå±€å’Œåˆ†å‰²çº¿ */
        .memory-card .header {
            border-bottom: 1px solid rgba(217, 129, 0, 0.15); /* åˆ†å‰²çº¿é¢œè‰²å¯ä»¥ç¨å¾®åŠ æ·±ä¸€ç‚¹ */
            padding-bottom: 8px; 
        }
        
        /* 3. æ—¥æœŸæ ·å¼ (ä¿æŒä¸å˜) */
        .memory-card .header .date {
            font-size: 11px;
            color: #a1887f;
            margin-bottom: 4px; 
        }
        
        /* 4. ä½œè€…æ ·å¼ (ä¿æŒä¸å˜) */
        .memory-card .header .author {
            font-weight: 600;
            color: #d98100;
            font-size: 15px;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }
        
        /* 5. å†…å®¹åŒºæ ·å¼ (ä¿æŒä¸å˜) */
        .memory-card .content {
            font-size: 14px;
            line-height: 1.7;
            color: #5d4037;
            white-space: pre-wrap;
        }
        
        /* === ã€å…¨æ–°ã€‘çº¦å®š/å€’è®¡æ—¶å¡ç‰‡æ ·å¼ === */
        .countdown-card {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            border-radius: 12px;
            padding: 20px;
            box-shadow: 0 4px 15px rgba(118, 75, 162, 0.4);
            text-align: center;
            position: relative;
            overflow: hidden;
            flex-shrink: 0;
        }
        .countdown-card::before {
            content: 'âœ¨';
            position: absolute;
            top: -10px;
            left: -10px;
            font-size: 50px;
            opacity: 0.1;
            transform: rotate(-15deg);
        }
        .countdown-card .title {
            font-size: 18px;
            font-weight: 600;
            margin-bottom: 15px;
        }
        .countdown-card .timer {
            font-size: 28px;
            font-weight: 300;
            letter-spacing: 2px;
            margin-bottom: 15px;
        }
        .countdown-card .target-date {
            font-size: 12px;
            opacity: 0.8;
            border-top: 1px solid rgba(255,255,255,0.2);
            padding-top: 10px;
        }
        
        /* === ã€å…¨æ–°ã€‘èŠå¤©é”å®šé®ç½©å±‚æ ·å¼ === */
        #chat-lock-overlay {
            position: absolute;
            bottom: 0;
            left: 0;
            width: 100%;
            background-color: rgba(247, 247, 247, 0.9);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            z-index: 150; /* æ¯”è¾“å…¥æ¡†é«˜ï¼Œæ¯”è´´çº¸é¢æ¿ä½ */
            display: none; /* é»˜è®¤éšè— */
            align-items: center;
            justify-content: center;
            padding: 20px;
            box-sizing: border-box;
            border-top: 1px solid var(--border-color);
            text-align: center;
        }
        #chat-lock-content {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }
        #chat-lock-content .lock-text {
            color: var(--text-secondary);
            font-size: 14px;
        }
        #chat-lock-content .lock-action-btn {
            padding: 10px 20px;
            border-radius: 20px;
            border: 1px solid var(--accent-color);
            background-color: var(--accent-color);
            color: white;
            cursor: pointer;
        }
        #chat-lock-content .lock-action-btn.secondary {
            background-color: transparent;
            color: var(--accent-color);
        }
        /* â–¼â–¼â–¼ ã€å…¨æ–°ã€‘çº¢åŒ…å¡ç‰‡æ ·å¼ â–¼â–¼â–¼ */
        
        
        .red-packet-card {
            width: 220px;
            border-radius: 8px;
            background: linear-gradient(160deg, #F96259, #E44D44);
            color: #ffd700; /* é‡‘è‰²æ–‡å­— */
            padding: 12px;
            cursor: pointer;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
            position: relative;
            overflow: hidden;
        }
        
        .red-packet-card.opened {
            background: linear-gradient(160deg, #d3c4a0, #c4b693);
            cursor: default;
        }
        
        .red-packet-card::before {
            content: 'ğŸ§§';
            position: absolute;
            top: -5px;
            left: -5px;
            font-size: 30px;
            opacity: 0.2;
            transform: rotate(-10deg);
        }
        
        .rp-header {
            display: flex;
            align-items: center;
            gap: 8px;
            margin-bottom: 8px;
        }
        
        .rp-icon {
            width: 20px;
            height: 20px;
        }
        
        .rp-greeting {
            font-size: 15px;
            font-weight: 500;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }
        
        .rp-type {
            font-size: 11px;
            color: white;
            opacity: 0.8;
            border-top: 1px solid rgba(255, 255, 255, 0.2);
            padding-top: 8px;
            margin-top: 8px;
        }
        
        .rp-claimed-info {
            font-size: 13px;
            color: white;
            margin-top: 10px;
            padding-top: 10px;
            border-top: 1px solid rgba(255,255,255,0.3);
        }
        /* â–²â–²â–² æ–°CSSç²˜è´´ç»“æŸ â–²â–²â–² */
        
        /* â–¼â–¼â–¼ ã€å…¨æ–°ã€‘çº¢åŒ…è¯¦æƒ…åˆ—è¡¨æ ·å¼ â–¼â–¼â–¼ */
        .rp-details-item {
            display: flex;
            align-items: center;
            padding: 8px 0;
            border-bottom: 1px solid #eee;
        }
        .rp-details-item:last-child {
            border-bottom: none;
        }
        .rp-details-item .name {
            flex-grow: 1;
            font-weight: 500;
            color: #333;
        }
        .rp-details-item .amount {
            font-weight: 500;
            color: #555;
        }
        .rp-details-item .lucky-king-tag {
            font-size: 10px;
            background-color: #ffd700;
            color: #a67c00;
            padding: 2px 5px;
            border-radius: 4px;
            margin-left: 8px;
            font-weight: bold;
        }
        /* â–²â–²â–² æ–°CSSç²˜è´´ç»“æŸ â–²â–²â–² */
        
        /* â–¼â–¼â–¼ ã€å…¨æ–°ã€‘æŠ•ç¥¨åŠŸèƒ½æ ·å¼ â–¼â–¼â–¼ */
        
        /* æŠ•ç¥¨å¡ç‰‡åœ¨æ¶ˆæ¯æ°”æ³¡ä¸­çš„æ ·å¼ */
        
        /* æŠ•ç¥¨å¡ç‰‡ä¸»ä½“ */
        .poll-card {
            width: 250px;
            background-color: #f9f9f9;
            border-radius: 10px;
            border: 1px solid #e0e0e0;
            padding: 12px;
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
        }
        
        .poll-card.closed {
            background-color: #e9ecef; /* ç»“æŸåå˜ç° */
        }
        
        /* æŠ•ç¥¨é—®é¢˜ */
        .poll-question {
            font-weight: 600;
            font-size: 15px;
            margin-bottom: 12px;
            line-height: 1.4;
            word-break: break-word;
        }
        
        /* æŠ•ç¥¨é€‰é¡¹åˆ—è¡¨ */
        .poll-options-list {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }
        
        /* å•ä¸ªæŠ•ç¥¨é€‰é¡¹ */
        .poll-option-item {
            background-color: white;
            border: 1px solid #dcdcdc;
            border-radius: 8px;
            padding: 10px;
            cursor: pointer;
            position: relative;
            overflow: hidden;
            transition: background-color 0.2s;
        }
        
        .poll-card:not(.closed) .poll-option-item:hover {
            background-color: #f0f8ff;
        }
        
        /* ç”¨æˆ·å·²æŠ•ç¥¨çš„é€‰é¡¹æ ·å¼ */
        .poll-option-item.voted {
            border-color: var(--accent-color);
            background-color: #e7f3ff;
            font-weight: 500;
        }
        
        /* æŠ•ç¥¨è¿›åº¦æ¡ */
        .poll-option-bar {
            position: absolute;
            top: 0;
            left: 0;
            height: 100%;
            background-color: rgba(0, 123, 255, 0.1);
            z-index: 1;
            transition: width 0.3s ease-in-out;
        }
        
        /* é€‰é¡¹å†…å®¹ï¼ˆæ–‡å­—å’Œç¥¨æ•°ï¼‰ï¼Œç¡®ä¿åœ¨è¿›åº¦æ¡ä¹‹ä¸Š */
        .poll-option-content {
            position: relative;
            z-index: 2;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .poll-option-text {
            font-size: 14px;
        }
        
        .poll-option-votes {
            font-size: 13px;
            color: #8a8a8a;
            font-weight: 500;
        }
        
        /* æŠ•ç¥¨å¡ç‰‡åº•éƒ¨ */
        .poll-footer {
            margin-top: 12px;
            padding-top: 8px;
            border-top: 1px solid #e9e9e9;
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-size: 12px;
            color: var(--text-secondary);
        }
        
        .poll-total-votes {
            font-weight: 500;
        }
        
        .poll-action-btn {
            background: none;
            border: 1px solid var(--accent-color);
            color: var(--accent-color);
            padding: 4px 10px;
            border-radius: 15px;
            cursor: pointer;
            font-size: 12px;
        }
        .poll-card.closed .poll-action-btn {
            background-color: #6c757d;
            color: white;
            border-color: #6c757d;
        }
        
        /* åˆ›å»ºæŠ•ç¥¨æ¨¡æ€æ¡†çš„é€‰é¡¹è¾“å…¥ */
        .poll-option-input-wrapper {
            display: flex;
            align-items: center;
            gap: 8px;
        }
        .poll-option-input-wrapper input {
            flex-grow: 1;
        }
        .poll-option-input-wrapper .remove-option-btn {
            width: 28px;
            height: 28px;
            border-radius: 50%;
            background-color: #f0f0f0;
            color: #ff3b30;
            border: none;
            cursor: pointer;
            font-size: 18px;
            line-height: 28px;
            text-align: center;
            flex-shrink: 0;
        }
        
        /* === ã€å…¨æ–°ã€‘èŠå¤©å¤´éƒ¨â€œæ­£åœ¨è¾“å…¥â€çŠ¶æ€æ ·å¼ === */
        #chat-header-title.typing-status {
            color: var(--text-secondary);
            animation: typing-pulse 1.5s infinite;
            font-style: italic;
        }
        
        @keyframes typing-pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.6; }
        }
        
        #chat-header-title {
            transition: opacity 0.2s ease-in-out;
        }
        
        @keyframes message-pop-in {
          from {
            opacity: 0;
            transform: translateY(15px);
          }
          to {
            opacity: 1;
            transform: translateY(0);
          }
        }
        
        .message-wrapper.animate-in {
          animation: message-pop-in 0.3s cubic-bezier(0.25, 0.1, 0.25, 1) forwards;
          }
        
        /* â–¼â–¼â–¼ ã€å…¨æ–°ã€‘Appå›¾æ ‡è®¾ç½®æ ·å¼ â–¼â–¼â–¼ */
#icon-settings-grid,
#cphone-icon-settings-grid { /* <--- æ ¸å¿ƒä¿®å¤ï¼šåœ¨è¿™é‡Œä¸ºä¸¤ä¸ªå®¹å™¨åŒæ—¶åº”ç”¨æ ·å¼ */
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(70px, 1fr));
    gap: 20px;
    width: 100%;
    padding: 0 10px;
    box-sizing: border-box;
}
        
        .icon-setting-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 8px;
        }
        
        .icon-preview {
            width: 60px;
            height: 60px;
            border-radius: 15px;
            background-size: cover;
            background-position: center;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }
        
        .change-icon-btn {
            padding: 4px 10px;
            font-size: 12px;
            border: 1px solid #ccc;
            background-color: #f0f0f0;
            border-radius: 5px;
            cursor: pointer;
        }
        /* â–¼â–¼â–¼ ã€å…¨æ–°ã€‘å¤–è§‚è®¾ç½®é¡µé¢å¸ƒå±€ä¿®æ­£ â–¼â–¼â–¼ */
        
        /* 1. ä¿®æ­£æ»šåŠ¨é—®é¢˜ */
        #wallpaper-screen .form-container {
            /* æ ¸å¿ƒä¿®æ­£1: è§£å†³flexå¸ƒå±€ä¸‹çš„æ»šåŠ¨å†²çªï¼Œè®©æ»šåŠ¨æ¡èƒ½æ­£å¸¸å‡ºç° */
            min-height: 0; 
        }
        
        /* 2. ä¿®æ­£å£çº¸é¢„è§ˆè¢«å‹æ‰çš„é—®é¢˜ */
        #wallpaper-preview {
            /* æ ¸å¿ƒä¿®æ­£2: é˜²æ­¢é¢„è§ˆæ¡†è¢«è¿‡å¤šçš„å†…å®¹æŒ¤å‹å˜å½¢ï¼Œè®©å®ƒä¿æŒè‡ªå·±çš„é«˜åº¦ */
            flex-shrink: 0; 
        }
        /* â–¼â–¼â–¼ ã€å…¨æ–°ã€‘åˆ†äº«é“¾æ¥åŠŸèƒ½æ ·å¼ (æ— å›¾ç‰ˆ) â–¼â–¼â–¼ */
        
        /* 1. æµè§ˆå™¨ç•Œé¢èƒŒæ™¯è‰²å’Œå†…å®¹åŒºæ ·å¼ (ä¿æŒä¸å˜) */
        #browser-screen {
            background-color: #f8f9fa;
        }
        #browser-content {
            padding: 20px;
            font-size: 16px;
            line-height: 1.8;
            color: #333;
            overflow-y: auto;
            background-color: #f8f9fa;
        }
        #browser-content .article-title {
            font-size: 24px;
            font-weight: 700;
            margin-bottom: 10px;
        }
        #browser-content .article-meta {
            font-size: 13px;
            color: #8a8a8a;
            margin-bottom: 25px;
            padding-bottom: 15px;
            border-bottom: 1px solid #e0e0e0;
        }
        #browser-content .article-body {
            white-space: pre-wrap;
            word-break: break-word;
        }
        #browser-content .article-body p {
            margin-bottom: 1em;
        }
        
        /* 2. èŠå¤©æ°”æ³¡ä¸­çš„é“¾æ¥å¡ç‰‡æ ·å¼ (æ— å›¾ç‰ˆ) */
        
        
        .link-share-card {
            width: 210px; 
            background-color: #fff;
            border-radius: 10px;
            border: 1px solid #e0e0e0;
            padding: 12px;
            cursor: pointer;
            transition: background-color 0.2s;
            display: flex;
            flex-direction: column;
            gap: 8px;
        }
        .link-share-card:hover {
            background-color: #f9f9f9;
        }
        
        .link-share-card .title {
            font-weight: 600;
            font-size: 15px;
            line-height: 1.4;
            color: #1f1f1f;
            display: -webkit-box;
            -webkit-line-clamp: 2;
            -webkit-box-orient: vertical;
            overflow: hidden;
            text-overflow: ellipsis;
        }
        
        .link-share-card .description {
            font-size: 13px;
            color: #8a8a8a;
            display: -webkit-box;
            -webkit-line-clamp: 3;
            -webkit-box-orient: vertical;
            overflow: hidden;
            text-overflow: ellipsis;
        }
        
        .link-share-card .footer {
            display: flex; /* è®©å›¾æ ‡å’Œæ–‡å­—æ°´å¹³å¯¹é½ */
            align-items: center;
            gap: 6px; /* å›¾æ ‡å’Œæ–‡å­—çš„é—´è· */
            font-size: 12px;
            color: var(--text-secondary);
            margin-top: 4px; /* å’Œä¸Šé¢çš„æè¿°æ‹‰å¼€ä¸€ç‚¹è·ç¦» */
        }
        .link-share-card .footer-icon{
            width: 14px;
            height: 14px;
            flex-shrink: 0; /* é˜²æ­¢å›¾æ ‡è¢«å‹ç¼© */
        }
        
        /* â–²â–²â–² æ–°CSSç²˜è´´ç»“æŸ â–²â–²â–² */
        
        /* â–¼â–¼â–¼ è¯·å°†è¿™æ®µæ–°æ ·å¼ç²˜è´´åˆ° <style> çš„æœ«å°¾ â–¼â–¼â–¼ */
        
        /* å•æ¡è¯„è®ºçš„å®¹å™¨ï¼Œç°åœ¨éœ€è¦ç›¸å¯¹å®šä½ */
        .comment-item {
            position: relative;
            padding-right: 25px; /* åœ¨å³ä¾§ç•™å‡ºåˆ é™¤æŒ‰é’®çš„ç©ºé—´ */
        }
        
        /* è¯„è®ºåˆ é™¤æŒ‰é’®çš„æ ·å¼ */
        .comment-delete-btn {
            position: absolute;
            top: 50%;
            right: 0;
            transform: translateY(-50%);
            width: 22px;
            height: 22px;
            line-height: 22px;
            text-align: center;
            border-radius: 50%;
            color: var(--text-secondary);
            font-size: 18px;
            cursor: pointer;
            transition: all 0.2s ease;
            opacity: 0; /* é»˜è®¤éšè— */
        }
        
        /* é¼ æ ‡æ‚¬åœåœ¨è¯„è®ºä¸Šæ—¶ï¼Œæ˜¾ç¤ºåˆ é™¤æŒ‰é’® */
        .comment-item:hover .comment-delete-btn {
            opacity: 1;
        }
        
        .comment-delete-btn:hover {
            background-color: #f0f0f0;
            color: #ff3b30;
        }
        /* === ã€å…¨æ–°ã€‘å¤œé—´æ¨¡å¼æ ·å¼ === */
        
        /* æ ¸å¿ƒï¼šå½“ #phone-screen æ‹¥æœ‰ .dark-mode ç±»æ—¶ï¼Œæ¿€æ´»ä»¥ä¸‹æ‰€æœ‰æ ·å¼ */
        
        /* 1. å…¨å±€èƒŒæ™¯å’Œæ–‡æœ¬é¢œè‰² */
        #phone-screen.dark-mode {
            --secondary-bg: #1c1c1e; /* ä¸»è¦å¡ç‰‡èƒŒæ™¯è‰² */
            --border-color: #38383a;  /* è¾¹æ¡†é¢œè‰² */
            --text-primary: #ffffff;   /* ä¸»è¦æ–‡å­—é¢œè‰² */
            --text-secondary: #8d8d92; /* æ¬¡è¦æ–‡å­—/å›¾æ ‡é¢œè‰² */
        }
        
        /* 2. å„ä¸ªé¡µé¢çš„ä¸»èƒŒæ™¯è‰² */
        #phone-screen.dark-mode #chat-list-screen,
        #phone-screen.dark-mode #qzone-screen .qzone-content,
        #phone-screen.dark-mode #memories-view {
            background-color: #000000;
        }
        
        /* 3. èŠå¤©åˆ—è¡¨ */
        #phone-screen.dark-mode #chat-list {
            background-color: #000000;
        }
        #phone-screen.dark-mode .chat-list-item {
            border-bottom-color: rgba(255, 255, 255, 0.15);
        }
        #phone-screen.dark-mode .chat-group-header {
            background-color: #1c1c1e; /* ä»ç™½è‰²æ”¹ä¸ºæ·±ç°è‰² */
            border-bottom: 1px solid #38383a; /* ç»™å®ƒä¸€ä¸ªç»†å¾®çš„ä¸‹è¾¹æ¡† */
        }
        #phone-screen.dark-mode .chat-list-item .name,
        #phone-screen.dark-mode .chat-group-header .group-name {
            color: #ffffff;
        }
        #phone-screen.dark-mode .chat-list-item:hover {
            background-color: #1c1c1e;
        }
        
        /* 4. é¡¶éƒ¨/åº•éƒ¨å¯¼èˆªæ  */
        #phone-screen.dark-mode .header,
        #phone-screen.dark-mode .qzone-header {
            background-color: rgba(25, 25, 25, 0.9);
            backdrop-filter: blur(15px);
            -webkit-backdrop-filter: blur(15px);
            border-bottom-color: rgba(255, 255, 255, 0.15);
            color: #ffffff;
        }
        #phone-screen.dark-mode .header .back-btn,
        #phone-screen.dark-mode .header .action-btn,
        #phone-screen.dark-mode .header .save-btn {
            color: #ffffff;
        }
        #phone-screen.dark-mode #chat-list-bottom-nav {
            background-color: rgba(25, 25, 25, 0.9);
            border-top-color: rgba(255, 255, 255, 0.15);
        }
        #phone-screen.dark-mode .nav-item.active {
            color: #ffffff;
        }
        
        /* 5. èŠå¤©ç•Œé¢ */
        #phone-screen.dark-mode #chat-input-area {
            background-color: rgba(5, 5, 5, 0.8);
            border-top: none;
        }
        #phone-screen.dark-mode #chat-input {
            background-color: #3e3e42;
            color: #ffffff;
        }
        #phone-screen.dark-mode #chat-input::placeholder {
            color: #8d8d92;
        }
        #phone-screen.dark-mode .chat-action-icon-btn {
            color: #ffffff;
            background-color: rgba(255, 255, 255, 0.1);
            border: none;
        }
        #phone-screen.dark-mode #send-btn {
            background-color: var(--accent-color);
        }
        
        /* 6. åŠ¨æ€ (QZone) ç•Œé¢ */
        #phone-screen.dark-mode .qzone-actions-bar,
        #phone-screen.dark-mode .qzone-post-item {
            background-color: #1c1c1e;
            border: 1px solid #333;
            box-shadow: 0 2px 8px rgba(255, 255, 255, 0.05);
        }
        #phone-screen.dark-mode .action-item:not(:last-child)::after {
            background-color: #333;
        }
        #phone-screen.dark-mode .post-footer,
        #phone-screen.dark-mode .post-likes-section {
            border-top-color: #333;
        }
        #phone-screen.dark-mode .post-likes-section {
            background-color: rgba(0, 123, 255, 0.1);
        }
        #phone-screen.dark-mode .comment-input {
            background-color: #333;
            color: #ffffff;
        }
        #phone-screen.dark-mode .comment-input::placeholder {
            color: #8d8d92;
        }
        #phone-screen.dark-mode .post-actions-btn:hover {
            background-color: #333;
        }
        #phone-screen.dark-mode .at-mention-popup {
            background-color: #1c1c1e;
            border-color: #333;
        }
        #phone-screen.dark-mode .at-mention-item {
            border-bottom-color: #333;
        }
        #phone-screen.dark-mode .at-mention-item:hover {
            background-color: #333;
        }
        
        /* 7. å›å¿†å½•ç•Œé¢ */
        #phone-screen.dark-mode .memory-card {
            background-color: #1c1c1e;
            border-left-color: #e6a753;
            box-shadow: 0 4px 12px rgba(255, 255, 255, 0.08);
        }
        #phone-screen.dark-mode .memory-card .header {
            background-color: #2c2c2e;
            border-bottom-color: #38383a;
            margin: -15px -15px 8px -15px;
            padding: 12px 15px;
            border-radius: 12px 12px 0 0;
        }
        #phone-screen.dark-mode .memory-card .header .date,
        #phone-screen.dark-mode .memory-card .header .author,
        #phone-screen.dark-mode .memory-card .content {
            color: #e0e0e0;
        }
        
        /* 8. å…¶ä»–è®¾ç½®å’Œåˆ—è¡¨é¡µ */
        #phone-screen.dark-mode #api-settings-screen,
        #phone-screen.dark-mode #font-settings-screen,
        #phone-screen.dark-mode #wallpaper-screen,
        #phone-screen.dark-mode #contact-picker-screen,
        #phone-screen.dark-mode #member-management-screen,
        #phone-screen.dark-mode #world-book-editor-screen,
        #phone-screen.dark-mode #world-book-list,
        #phone-screen.dark-mode .list-item:hover,
        #phone-screen.dark-mode .list-container,
        #phone-screen.dark-mode .form-container {
            background-color: #000000;
        }
        #phone-screen.dark-mode .form-group input, 
        #phone-screen.dark-mode .form-group select, 
        #phone-screen.dark-mode .form-group textarea {
            background-color: #1c1c1e;
            color: #ffffff;
            border-color: #38383a;
        }
        #phone-screen.dark-mode .form-button-secondary {
            background-color: #333;
            border-color: #555;
            color: #fff;
        }
        #phone-screen.dark-mode #font-preview {
            background-color: #1c1c1e;
            border-color: #38383a;
        }
        #phone-screen.dark-mode #font-preview p {
            color: #ffffff;
        }
        
        /* === ã€å…¨æ–°ã€‘å¤œé—´æ¨¡å¼è§†è§‰ä¿®æ­£ === */
        
        /* 1. ä¿®æ­£åŠ¨æ€å¡ç‰‡å†…çš„æ–‡å­—é¢œè‰² */
        #phone-screen.dark-mode .qzone-post-item .post-nickname,
        #phone-screen.dark-mode .qzone-post-item .post-content {
            color: #f0f0f0; /* ä»æ·±ç°è‰²æ”¹ä¸ºæ˜äº®çš„æµ…ç°è‰² */
        }
        
        /* 2. ä¿®æ­£æ”¶è—å¡ç‰‡å†…çš„æ–‡å­—é¢œè‰² */
        #phone-screen.dark-mode .favorite-item-card .fav-card-header .name,
        #phone-screen.dark-mode .favorite-item-card .fav-card-content {
            color: #f0f0f0; /* åŒæ ·æ”¹ä¸ºæµ…ç°è‰² */
        }
        #phone-screen.dark-mode .favorite-item-card .fav-card-header .source {
            color: #8d8d92; /* æ¥æºæ–‡å­—ç”¨æ¬¡è¦ç°è‰² */
        }
        
        /* 3. ä¿®æ­£æ”¶è—é¡µçš„æœç´¢æ èƒŒæ™¯å’Œè¾“å…¥æ¡†æ ·å¼ */
        #phone-screen.dark-mode .search-bar-container {
            background-color: #000000; /* å®¹å™¨èƒŒæ™¯å˜ä¸ºçº¯é»‘ */
        }
        #phone-screen.dark-mode #favorites-search-input {
            background-color: #1c1c1e; /* è¾“å…¥æ¡†èƒŒæ™¯å˜ä¸ºæ·±ç° */
            border-color: #38383a;     /* è¾¹æ¡†é¢œè‰²å˜æš— */
            color: #ffffff;            /* è¾“å…¥æ–‡å­—å˜ä¸ºç™½è‰² */
        }
        #phone-screen.dark-mode #favorites-search-input::placeholder {
            color: #8d8d92; /* å ä½ç¬¦æ–‡å­—é¢œè‰²å˜æš— */
        }
        /* === ã€å…¨æ–°ã€‘iOSé£æ ¼çš„Toggle Switchå¼€å…³æ ·å¼ === */
        
        /* 1. å¼€å…³çš„å®¹å™¨ */
        .toggle-switch {
            position: relative;
            display: inline-block;
            width: 51px;
            height: 31px;
        }
        
        /* 2. éšè—æ‰åŸå§‹çš„ checkbox è¾“å…¥æ¡† */
        .toggle-switch input {
            opacity: 0;
            width: 0;
            height: 0;
        }
        
        /* 3. å¼€å…³çš„èƒŒæ™¯ï¼ˆé‚£ä¸ªæ¤­åœ†ï¼‰ */
        .slider {
            position: absolute;
            cursor: pointer;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: #e9e9eb; /* å…³é—­æ—¶çš„èƒŒæ™¯è‰² */
            transition: .4s;
            border-radius: 34px;
        }
        
        /* 4. å¼€å…³ä¸Šçš„åœ†ç‚¹ */
        .slider:before {
            position: absolute;
            content: "";
            height: 27px;
            width: 27px;
            left: 2px;
            bottom: 2px;
            background-color: white;
            transition: .4s;
            border-radius: 50%;
            box-shadow: 0 1px 2px rgba(0,0,0,0.1);
        }
        
        /* 5. ã€æ ¸å¿ƒã€‘å½“ checkbox è¢«é€‰ä¸­æ—¶ï¼ˆå³å¼€å¯çŠ¶æ€ï¼‰ */
        input:checked + .slider {
            background-color: #34c759; /* å¼€å¯æ—¶çš„èƒŒæ™¯è‰²ï¼ˆiOSç»¿è‰²ï¼‰*/
        }
        
        input:checked + .slider:before {
            transform: translateX(20px); /* è®©åœ†ç‚¹æ»‘åŠ¨åˆ°å³è¾¹ */
        }
        
        /* â–²â–²â–² æ–°CSSç²˜è´´ç»“æŸ â–²â–²â–² */
        
        /* â–¼â–¼â–¼ ã€å…¨æ–°ã€‘å¼•ç”¨å›å¤åŠŸèƒ½æ ·å¼ â–¼â–¼â–¼ */
        
        /* â–¼â–¼â–¼ ã€å…¨æ–°ã€‘å¼•ç”¨å›å¤åŠŸèƒ½æ ·å¼ â–¼â–¼â–¼ */
        
        /* 1. è¾“å…¥æ¡†ä¸Šæ–¹çš„â€œå›å¤é¢„è§ˆæ â€ */
        #reply-preview-bar {
            display: none; /* é»˜è®¤éšè— */
            padding: 8px 12px;
            margin: 0 8px 8px 8px; /* å’Œè¾“å…¥æ¡†å‘¨å›´çš„è¾¹è·ä¿æŒä¸€è‡´ */
            background-color: rgba(0, 0, 0, 0.05);
            border-left: 3px solid var(--accent-color);
            border-radius: 6px;
            position: relative;
            font-size: 13px;
            color: var(--text-secondary);
        }
        
        #phone-screen.dark-mode #reply-preview-bar {
            background-color: rgba(255, 255, 255, 0.1);
        }
        
        .reply-preview-content .sender {
            font-weight: 600;
            color: var(--text-primary);
        }
        
        .reply-preview-content .text {
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
            display: block; /* ç¡®ä¿çœç•¥å·ç”Ÿæ•ˆ */
            max-width: 95%;
        }
        
        #cancel-reply-btn {
            position: absolute;
            top: 50%;
            right: 8px;
            transform: translateY(-50%);
            width: 20px;
            height: 20px;
            line-height: 20px;
            text-align: center;
            border-radius: 50%;
            background-color: rgba(0,0,0,0.1);
            cursor: pointer;
            font-size: 14px;
        }
        
        /* 2. æ¶ˆæ¯æ°”æ³¡å†…éƒ¨çš„â€œå¼•ç”¨æ¶ˆæ¯å—â€ */
        .quoted-message {
            padding: 6px 10px;
            margin-bottom: 6px;
            background-color: rgba(0, 0, 0, 0.04);
            border-left: 2px solid var(--accent-color);
            border-radius: 4px;
            font-size: 0.9em; /* å­—ä½“æ¯”æ­£æ–‡å°ä¸€ç‚¹ */
            opacity: 0.8;
        }
        
        #phone-screen.dark-mode .quoted-message {
            background-color: rgba(255, 255, 255, 0.08);
            border-left-color: #a0cff1;
        }
        
        .quoted-message .quoted-sender {
            font-weight: 600;
            color: var(--accent-color);
        }
        #phone-screen.dark-mode .quoted-message .quoted-sender {
            color: #a0cff1;
        }
        
        .quoted-message .quoted-content {
            color: var(--text-secondary);
            white-space: normal;     /* æ ¸å¿ƒä¿®æ­£1: å…è®¸æ–‡æœ¬æ­£å¸¸æ¢è¡Œ */
            word-break: break-word;  /* æ ¸å¿ƒä¿®æ­£2: å¼ºåˆ¶é•¿å•è¯æˆ–è¿ç»­å­—ç¬¦æ–­å¼€ï¼Œé˜²æ­¢æº¢å‡º */
            display: block;
        }
        
        /* === å­—ä½“é¢„è§ˆæ¡†æ ·å¼ (ä¿®æ­£å) === */
        
        /* é»˜è®¤ï¼ˆæ—¥é—´æ¨¡å¼ï¼‰çš„æ ·å¼ */
        #font-preview {
            padding: 20px;
            border: 1px solid var(--border-color);
            border-radius: 8px;
            background-color: #f9f9f9; /* æ—¥é—´æ¨¡å¼çš„æµ…ç°è‰²èƒŒæ™¯ */
            transition: background-color 0.3s, border-color 0.3s;
        }
        
        /* é¢„è§ˆæ¡†é‡Œçš„æ–‡å­—é¢œè‰²ï¼Œé»˜è®¤æ˜¯é»‘è‰² */
        #font-preview p {
            color: var(--text-primary);
        }
        
        /* å¤œé—´æ¨¡å¼ä¸‹çš„ä¿®æ­£æ ·å¼ */
        #phone-screen.dark-mode #font-preview {
            background-color: #1c1c1e; /* æ·±ç°è‰²èƒŒæ™¯ */
            border-color: #38383a;     /* æš—è‰²è¾¹æ¡† */
        }
        
        /* å¤œé—´æ¨¡å¼ä¸‹ï¼Œé¢„è§ˆæ¡†é‡Œçš„æ–‡å­—å˜ä¸ºç™½è‰² */
        #phone-screen.dark-mode #font-preview p {
            color: #ffffff;
        }
        
        /* â–¼â–¼â–¼ ã€å…¨æ–°ã€‘ç²¾è‡´ç‰ˆè½¬è´¦æ“ä½œå¼¹çª—æ ·å¼ â–¼â–¼â–¼ */
        .transfer-actions-content {
            background-color: #fff0f5; /* ç²‰å«©çš„èƒŒæ™¯è‰² */
            border-radius: 20px;
            width: 290px;
            padding: 20px;
            box-shadow: 0 5px 25px rgba(255, 105, 180, 0.3); /* ç²‰è‰²é˜´å½± */
            text-align: center;
            position: relative;
            border: 1px solid #ffcce0;
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
        }
        
        .transfer-actions-header {
            font-size: 20px;
            font-weight: bold;
            color: #a35c7b; /* æ·±ç²‰è‰²æ ‡é¢˜ */
            margin-bottom: 15px;
        }
        
        .transfer-actions-body p {
            font-size: 15px;
            color: #555;
            margin: 0 0 25px 0;
            line-height: 1.5;
        }
        
        .transfer-actions-footer {
            display: flex;
            justify-content: space-between;
            gap: 15px;
        }
        
        .transfer-actions-footer .action-btn {
            flex: 1;
            padding: 12px;
            border: none;
            border-radius: 12px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: transform 0.2s, box-shadow 0.2s;
            color: white;
        }
        
        .transfer-actions-footer .action-btn:active {
            transform: scale(0.95);
        }
        
        .transfer-actions-footer .action-btn.accept {
            background: linear-gradient(135deg, #ff85b3, #ff69b4);
            box-shadow: 0 4px 10px rgba(255, 105, 180, 0.4);
        }
        
        .transfer-actions-footer .action-btn.decline {
            background: linear-gradient(135deg, #c2c2c2, #a0a0a0);
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.2);
        }
        
        .transfer-actions-content .cancel-btn {
            position: absolute;
            top: 10px;
            right: 10px;
            width: 28px;
            height: 28px;
            border-radius: 50%;
            border: none;
            background-color: rgba(0, 0, 0, 0.1);
            color: #a35c7b;
            font-size: 20px;
            line-height: 28px;
            cursor: pointer;
        }
        /* â–²â–²â–² æ–°CSSç²˜è´´ç»“æŸ â–²â–²â–² */
        
        /* â–¼â–¼â–¼ è¯·å°†è¿™æ®µæ–°æ ·å¼ç²˜è´´åˆ° <style> çš„æœ«å°¾ â–¼â–¼â–¼ */
        
        /* === æœªè¯»æ¶ˆæ¯çº¢ç‚¹æ ·å¼ === */
        .unread-count-wrapper {
            flex-shrink: 0;
            width: 40px;
            display: flex;
            justify-content: center;
            align-items: flex-start;
            padding-top: 20px; /* è®©çº¢ç‚¹å’Œåå­—å·®ä¸å¤šé«˜ */
        }
        
        .unread-count {
            min-width: 20px;
            height: 20px;
            padding: 0 6px;
            background-color: #ff3b30; /* iOS é£æ ¼çš„çº¢è‰² */
            color: white;
            font-size: 13px;
            font-weight: 500;
            line-height: 20px;
            text-align: center;
            border-radius: 10px; /* åœ†è§’çŸ©å½¢ */
            box-shadow: 0 1px 2px rgba(0,0,0,0.15);
            display: none; /* é»˜è®¤éšè— */
            justify-content: center;
            align-items: center;
        }
        /* â–²â–²â–² æ–°æ ·å¼ç²˜è´´ç»“æŸ â–²â–²â–² */
        
        /* â–¼â–¼â–¼ ã€å…¨æ–°ã€‘é€šè¯è®°å½•é¡µé¢ä¸å¡ç‰‡æ ·å¼ â–¼â–¼â–¼ */
        
        /* ç¡®ä¿é¡µé¢èƒŒæ™¯è‰²ç»Ÿä¸€ */
        #call-history-screen {
            background-color: #f0f2f5;
        }
        
        /* é€šè¯è®°å½•å¡ç‰‡æ ·å¼ */
        .call-record-card {
            background-color: var(--secondary-bg);
            border-radius: 12px;
            padding: 15px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.08);
            cursor: pointer;
            transition: transform 0.2s ease, box-shadow 0.2s ease;
            border-left: 5px solid var(--accent-color);
        }
        .call-record-card:hover {
            transform: translateY(-3px);
            box-shadow: 0 6px 12px rgba(0,0,0,0.1);
        }
        
        /* å¡ç‰‡å¤´éƒ¨ï¼šåŒ…å«æ—¥æœŸå’Œæ—¶é•¿ */
        .call-record-card .card-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-size: 13px;
            color: var(--text-secondary);
            margin-bottom: 12px;
            padding-bottom: 8px;
            border-bottom: 1px solid var(--border-color);
        }
        .call-record-card .card-header .duration {
            font-weight: 500;
            color: var(--text-primary);
        }
        
        /* å¡ç‰‡ä¸»ä½“ï¼šå‚ä¸è€…å¤´åƒ */
        .call-record-card .card-body {
            display: flex;
            align-items: center;
        }
        .call-record-card .participants-avatars {
            display: flex;
            align-items: center;
        }
        .call-record-card .participant-avatar {
            width: 36px;
            height: 36px;
            border-radius: 50%;
            object-fit: cover;
            border: 2px solid white;
            box-shadow: 0 1px 3px rgba(0,0,0,0.1);
        }
        /* è®©å¤´åƒæœ‰ä¸€ä¸ªæ¼‚äº®çš„å †å æ•ˆæœ */
        .call-record-card .participant-avatar:not(:first-child) {
            margin-left: -12px;
        }
        .call-record-card .participants-names {
            margin-left: 12px;
            font-weight: 600;
            color: var(--text-primary);
            font-size: 15px;
        }
        
        /* --- é€šè¯è¯¦æƒ…å¼¹çª—æ ·å¼ --- */
        #transcript-modal-body {
            display: flex;
            flex-direction: column;
            gap: 12px;
            padding: 15px;
        }
        .transcript-entry {
            padding: 8px 12px;
            border-radius: 10px;
            max-width: 85%;
            line-height: 1.5;
            word-break: break-word;
        }
        .transcript-entry.user {
            background-color: #dcf8c6; /* ç±»ä¼¼å¾®ä¿¡çš„ç»¿è‰² */
            align-self: flex-end;
        }
        .transcript-entry.assistant {
            background-color: #ffffff;
            align-self: flex-start;
        }
        /* â–²â–²â–² æ–°CSSç²˜è´´ç»“æŸ â–²â–²â–² */
        
        #chat-list-title {
            cursor: pointer;
        }
        
        /* â–¼â–¼â–¼ ã€å…¨æ–°ã€‘é€šè¯è®°å½•å¡ç‰‡ç¾åŒ–æ ·å¼ â–¼â–¼â–¼ */
        
        .call-record-card .card-body {
            /* å°† body æ”¹ä¸º flex å¸ƒå±€ï¼Œè®©æ ‡é¢˜å’Œå‚ä¸è€…ä¿¡æ¯å‚ç›´æ’åˆ— */
            display: flex;
            flex-direction: column;
            gap: 8px; /* æ ‡é¢˜å’Œå‚ä¸è€…ä¿¡æ¯ä¹‹é—´çš„é—´è· */
        }
        
        .call-record-card .custom-title {
            font-size: 16px;
            font-weight: 600; /* åŠ ç²—ï¼Œè®©å®ƒåƒä¸ªæ ‡é¢˜ */
            color: var(--text-primary);
            padding-bottom: 8px; /* æ ‡é¢˜ä¸‹çš„ç•™ç™½ */
            border-bottom: 1px solid var(--border-color); /* åœ¨æ ‡é¢˜ä¸‹åŠ ä¸€æ¡åˆ†å‰²çº¿ */
            margin-bottom: 4px; /* å’Œä¸‹é¢çš„å‚ä¸è€…ä¿¡æ¯æ‹‰å¼€ä¸€ç‚¹è·ç¦» */
        }
        
        .call-record-card .participants-info {
            /* è¿™ä¸ªæ–°å®¹å™¨è®©å¤´åƒå’Œâ€œä¸xxâ€èƒ½æ°´å¹³å¯¹é½ */
            display: flex;
            align-items: center;
        }
        
        /* å‚ä¸è€…åå­—çš„æ ·å¼å¾®è°ƒï¼Œè®©å®ƒä¸é‚£ä¹ˆçªå‡º */
        .call-record-card .participants-names {
            margin-left: 12px;
            font-weight: 500; /* ä¸å†åŠ ç²— */
            font-size: 14px; /* ç¨å¾®å°ä¸€ç‚¹ */
            color: var(--text-secondary); /* ä½¿ç”¨æ¬¡è¦æ–‡å­—é¢œè‰² */
        }
        
        /* â–²â–²â–² æ–°æ ·å¼ç²˜è´´ç»“æŸ â–²â–²â–² */
        
        /* â–¼â–¼â–¼ ã€å…¨æ–°ã€‘è¯­éŸ³è½¬æ–‡å­—åŠŸèƒ½æ ·å¼ â–¼â–¼â–¼ */
        
        /* 1. è¯­éŸ³æ–‡å­—å†…å®¹çš„æ ·å¼ */
        .voice-transcript {
            font-size: 14px;         /* æ–‡å­—å¤§å° */
            line-height: 1.6;        /* è¡Œé«˜ï¼Œè®©å¤šè¡Œæ–‡æœ¬æ›´æ˜“è¯» */
            color: var(--text-secondary); /* ä½¿ç”¨æ¬¡è¦æ–‡å­—é¢œè‰²ï¼Œä¸è¯­éŸ³æ¡åŒºåˆ† */
            padding: 8px 12px;       /* å†…è¾¹è· */
            margin-top: 6px;         /* å’Œä¸Šæ–¹çš„è¯­éŸ³æ¡æ‹‰å¼€ä¸€ç‚¹è·ç¦» */
            background-color: rgba(0, 0, 0, 0.04); /* ç»™ä¸€ä¸ªæ·¡æ·¡çš„èƒŒæ™¯ï¼Œæ›´æœ‰å±‚æ¬¡æ„Ÿ */
            border-radius: 6px;      /* åœ†è§’ */
            word-break: break-word;  /* ç¡®ä¿é•¿æ–‡æœ¬èƒ½æ­£å¸¸æ¢è¡Œ */
            display: none;           /* é»˜è®¤éšè— */
        }
        
        #phone-screen.dark-mode .voice-transcript {
            background-color: rgba(255, 255, 255, 0.1); /* å¤œé—´æ¨¡å¼ä¸‹çš„èƒŒæ™¯è‰² */
        }
        
        /* 2. æ—‹è½¬åŠ è½½åŠ¨ç”»çš„æ ·å¼ */
        .loading-spinner {
            display: none; /* é»˜è®¤éšè— */
            width: 16px;
            height: 16px;
            border: 2px solid rgba(0, 0, 0, 0.2);
            border-top-color: var(--accent-color); /* æ—‹è½¬éƒ¨åˆ†çš„é¢œè‰² */
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin: 0 8px; /* å’Œæ³¢å½¢å›¾ã€æ—¶é•¿ä¿æŒä¸€ç‚¹é—´è· */
        }
        
        /* 3. å®šä¹‰æ—‹è½¬åŠ¨ç”» */
        @keyframes spin {
            to {
        transform: rotate(360deg);
            }
        }
        /* â–²â–²â–² æ–°æ ·å¼ç²˜è´´ç»“æŸ â–²â–²â–² */
        
        /* â–¼â–¼â–¼ ã€å…¨æ–°ã€‘åˆ†äº«è®°å½•æŸ¥çœ‹å™¨æ ·å¼ä¿®æ­£ â–¼â–¼â–¼ */
        #shared-history-viewer-content {
            display: flex;
            flex-direction: column; /* è®©æ°”æ³¡å‚ç›´æ’åˆ— */
            gap: 20px; /* åœ¨æ¯ä¸ªæ°”æ³¡ä¹‹é—´å¢åŠ 20åƒç´ çš„é—´è· */
            padding: 15px; /* åœ¨å®¹å™¨å››å‘¨ä¹Ÿå¢åŠ ä¸€äº›å†…è¾¹è·ï¼Œé¿å…æ°”æ³¡è´´è¾¹ */
        }
        /* â–²â–²â–² æ–°CSSç²˜è´´ç»“æŸ â–²â–²â–² */
        
        /* â–¼â–¼â–¼ ã€å…¨æ–°ã€‘æ’­æ”¾å™¨å’Œæ­Œè¯æ ·å¼ â–¼â–¼â–¼ */
        #music-player-overlay {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 50;
            display: flex;
            justify-content: center;
            align-items: flex-start;
            padding-top: 60px;
            background-color: rgba(0,0,0,0.3);
            opacity: 0;
            visibility: hidden;
            transform: translateY(-50px);
            transition: opacity 0.4s ease-out, transform 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
        }
        
        #music-player-overlay.visible {
            opacity: 1;
            visibility: visible;
            transform: translateY(0);
        }
        
        .music-player-window { 
            width: 70%; 
            min-height: 420px;
            background-color: rgba(255, 255, 255, 0.6); 
            backdrop-filter: blur(20px); 
            -webkit-backdrop-filter: blur(20px); 
            border-radius: 25px; 
            box-shadow: 0 8px 32px 0 rgba(25, 25, 25, 0.37); 
            border: 1px solid rgba(255, 255, 255, 0.18); 
            padding: 25px; 
            display: flex; 
            flex-direction: column; 
            align-items: center; 
            color: #1f1f1f; 
            position: relative;
            justify-content: space-between;
            padding-bottom: 15px;
        }
        
        .music-player-top-actions {
            position: absolute;
            top: 15px;
            left: 15px;
            right: 15px;
            width: calc(100% - 30px);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        .top-left-cluster {
            display: flex;
            align-items: center;
            gap: 15px;
        }
        #music-return-btn, #music-exit-btn {
            background: none;
            border: none;
            font-size: 28px;
            font-weight: 300;
            cursor: pointer;
            color: #555;
            padding: 5px;
            line-height: 1;
        }
        #music-exit-btn {
            font-size: 24px;
            font-weight: 400;
        }
        
        .music-progress-bar-container {
            width: 100%;
            display: flex;
            align-items: center;
            gap: 10px;
            margin-top: 25px;
            margin-bottom: 10px;
        }
        .time-display {
            font-size: 11px;
            color: #888;
            width: 35px;
            text-align: center;
            flex-shrink: 0;
            font-family: 'SF Mono', 'Menlo', monospace;
        }
        .progress-bar {
            flex-grow: 1;
            height: 5px;
            background-color: #e5e5e5;
            border-radius: 2.5px;
            cursor: pointer;
        }
        .progress-bar-fill {
            width: 0%;
            height: 100%;
            background-color: #333;
            border-radius: 2.5px;
        }
        
        #music-lyrics-container {
            width: 100%;
            height: 192px;
            overflow: hidden;
            position: relative;
            -webkit-mask-image: linear-gradient(transparent, black 20%, black 80%, transparent);
            mask-image: linear-gradient(transparent, black 20%, black 80%, transparent);
        }
        
        #music-lyrics-list {
            display: flex;
            flex-direction: column;
            align-items: center;
            transition: transform 0.5s cubic-bezier(0.25, 0.1, 0.25, 1);
        }
        
        .lyric-line {
            padding: 4px 0;
            font-size: 14px;
            color: #666;
            text-align: center;
            line-height: 1.5;
            transition: all 0.5s ease;
            opacity: 0.7;
            transform: scale(0.95);
        }
        
        .lyric-line.active {
            font-size: 16px;
            color: #000;
            opacity: 1;
            transform: scale(1);
        }
        
        .music-player-controls-wrapper {
            width: 100%;
            display: flex;
            flex-direction: column;
            gap: 10px;
        }
        
        .music-controls {
            margin-top: 0;
        }
        
        #music-return-btn, #music-exit-btn, #music-playlist-btn {
            position: relative;
        }
        
        #music-return-btn { top: -2px; }
        #music-playlist-btn { top: -3px; }
        
        .playlist-item-actions {
            display: flex;
            align-items: center;
            gap: 15px;
        }
        .playlist-action-btn {
            font-size: 18px;
            color: #888;
            cursor: pointer;
            transition: color 0.2s;
        }
        .playlist-action-btn:hover { color: #000; }
        .delete-track-btn { font-size: 24px; color: #ff3b30; }
        .delete-track-btn:hover { color: #c00; }
        .lyrics-btn { font-weight: 500; }
        
        /* --- ã€æ ¸å¿ƒä¿®æ­£ã€‘ç¡®ä¿å¤´åƒå°ºå¯¸ --- */
        .message-bubble .avatar {
            width: 34px;
            height: 34px;
            border-radius: 20%;
            object-fit: cover;
            flex-shrink: 0; /* é˜²æ­¢è¢«å‹ç¼© */
        }
        
        /* â–¼â–¼â–¼ ã€å…¨æ–°ã€‘æ’¤å›æ¶ˆæ¯æ ·å¼ â–¼â–¼â–¼ */
        
        /* 1. æ’¤å›æ¶ˆæ¯çš„å ä½ç¬¦æ ·å¼ */
        .recalled-message-placeholder {
            align-self: center; /* å±…ä¸­æ˜¾ç¤º */
            padding: 4px 12px;
            margin: 5px 0;
            background-color: rgba(0, 0, 0, 0.1);
            color: var(--text-secondary);
            font-size: 12px;
            border-radius: 10px;
            text-align: center;
            max-width: 80%;
            cursor: pointer; /* è®©å®ƒçœ‹èµ·æ¥å¯ä»¥ç‚¹å‡» */
        }
        
        /* 2. å¤œé—´æ¨¡å¼ä¸‹çš„é€‚é… */
        #phone-screen.dark-mode .recalled-message-placeholder {
            background-color: rgba(255, 255, 255, 0.15);
        }
        
        /* 3. AIæ’¤å›æ¶ˆæ¯æ—¶çš„åŠ¨ç”»æ•ˆæœ */
        @keyframes recall-animation {
          from {
            opacity: 1;
            transform: scale(1);
          }
          to {
            opacity: 0;
            transform: scale(0.8);
          }
        }
        
        .message-wrapper.recalled-animation {
          animation: recall-animation 0.3s ease-out forwards;
        }
        
        /* â–²â–²â–² æ–°CSSç²˜è´´ç»“æŸ â–²â–²â–² */
        
        /* â–¼â–¼â–¼ ã€å…¨æ–°ã€‘æ’¤å›æ¶ˆæ¯æ ·å¼ä¿®æ­£ â–¼â–¼â–¼ */
        
        /* å¼ºåˆ¶æ’¤å›æ¶ˆæ¯çš„å ä½ç¬¦ä¸æ¢è¡Œï¼Œå¹¶ä¿æŒå†…å®¹å±…ä¸­ */
        .recalled-message-placeholder {
            white-space: nowrap; /* æ ¸å¿ƒï¼šç¦æ­¢æ–‡æœ¬æ¢è¡Œ */
            display: inline-block; /* è®©èƒŒæ™¯æ ¹æ®å†…å®¹è‡ªé€‚åº”å®½åº¦ */
            padding: 4px 12px;
        }
        
        /* â–²â–²â–² æ–°CSSç²˜è´´ç»“æŸ â–²â–²â–² */
        
        /* â–¼â–¼â–¼ ã€å…¨æ–°ã€‘ä¸–ç•Œä¹¦åˆ†ç±»åˆ—è¡¨æ ·å¼ â–¼â–¼â–¼ */
        .world-book-group-container {
            border-bottom: 1px solid var(--border-color);
        }
        .world-book-group-container:first-child {
            border-top: 1px solid var(--border-color);
        }
        .world-book-group-header {
            display: flex;
            align-items: center;
            padding: 12px 15px;
            cursor: pointer;
            background-color: #f7f7f7;
        }
        .world-book-group-header .arrow {
            font-size: 14px;
            margin-right: 8px;
            transition: transform 0.2s ease;
        }
        .world-book-group-header.collapsed .arrow {
            transform: rotate(-90deg);
        }
        .world-book-group-header .group-name {
            font-weight: 600;
            font-size: 15px;
        }
        .world-book-group-content {
            max-height: 1000px;
            overflow: hidden;
            transition: max-height 0.3s ease-in-out;
        }
        .world-book-group-content.collapsed {
            max-height: 0;
        }
        #phone-screen.dark-mode .world-book-group-header {
            background-color: #1c1c1e;
        }
        /* â–²â–²â–² æ–°CSSç²˜è´´ç»“æŸ â–²â–²â–² */
        /* â–¼â–¼â–¼ ã€å…¨æ–°ã€‘èŠå¤©ç½®é¡¶æ ·å¼ â–¼â–¼â–¼ */
        .chat-list-item.pinned {
            background-color: #f0f2f5; /* ç»™ä¸€ä¸ªæ·¡æ·¡çš„ã€ä¸åŒçš„èƒŒæ™¯è‰² */
        }
        
        #phone-screen.dark-mode .chat-list-item.pinned {
            background-color: #2c2c2e; /* å¤œé—´æ¨¡å¼ä¸‹çš„ç½®é¡¶èƒŒæ™¯è‰² */
        }
        /* â–¼â–¼â–¼ ä¿®å¤è¾“å…¥æ¡†é®æŒ¡æŒ‰é’®çš„å¸ƒå±€é—®é¢˜ â–¼â–¼â–¼ */
        #chat-input-area {
            display: flex;
            flex-direction: column;
            flex-shrink: 0; /* é˜²æ­¢æ•´ä¸ªè¾“å…¥åŒºè¢«æ„å¤–å‹ç¼© */
            background-color: var(--secondary-bg); /* ç¡®ä¿èƒŒæ™¯è‰²ç»Ÿä¸€ï¼Œé¿å…é€æ˜é‡å  */
        }
        
        #chat-input-actions-top {
            flex-shrink: 0; /* é˜²æ­¢æŒ‰é’®è¡Œè¢«å‹ç¼© */
            padding-bottom: 8px; /* å¢åŠ ä¸€ç‚¹å’Œè¾“å…¥æ¡†çš„é—´è·ï¼Œæ”¹å–„è§‚æ„Ÿ */
        }
        
        #chat-input-main-row {
            flex-shrink: 0; /* é˜²æ­¢è¾“å…¥æ¡†è¡Œè¢«å‹ç¼© */
        }
        /* â–²â–²â–² ä¿®å¤ç»“æŸ â–²â–²â–² */
        /* â–¼â–¼â–¼ ã€å…¨æ–°ã€‘ç¾¤èŠ@åŠŸèƒ½æ ·å¼ â–¼â–¼â–¼ */
        
        /* â–¼â–¼â–¼ ã€æ ¸å¿ƒä¿®å¤ã€‘è¯·ç”¨è¿™æ®µä»£ç æ›¿æ¢æ‚¨ç°æœ‰çš„ #chat-input-area æ ·å¼ â–¼â–¼â–¼ */
        #chat-input-area {
            position: relative; /* ä¿æŒç›¸å¯¹å®šä½ï¼Œä½œä¸ºå¼¹çª—çš„â€œé”šç‚¹â€ */
            z-index: 20;      /* ã€å…³é”®ä¿®å¤ã€‘æå‡æ•´ä¸ªè¾“å…¥åŒºçš„å±‚çº§ */
            flex-shrink: 0;
            padding: 8px;
            background-color: rgba(247, 247, 247, 0.8);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            border-top: 1px solid var(--border-color);
            display: flex;
            flex-direction: column;
            gap: 5px;
        }
        /* â–²â–²â–² æ›¿æ¢ç»“æŸ â–²â–²â–² */
        
        /* 2. å®šä¹‰èŠå¤©@å¼¹çª—çš„å…·ä½“ä½ç½®å’Œæ ·å¼ */
        #chat-at-mention-popup {
            bottom: 100%; /* æ˜¾ç¤ºåœ¨æ•´ä¸ªè¾“å…¥åŒºçš„ä¸Šæ–¹ */
            left: 8px;    /* ä¸è¾“å…¥åŒºå·¦è¾¹å†…è¾¹è·å¯¹é½ */
            right: 8px;   /* ä¸è¾“å…¥åŒºå³è¾¹å†…è¾¹è·å¯¹é½ */
            width: auto;  /* å®½åº¦è‡ªåŠ¨æ’‘æ»¡ */
            margin-bottom: 5px; /* å’Œè¾“å…¥åŒºæ‹‰å¼€ä¸€ç‚¹è·ç¦» */
            /* å…¶ä»–æ ·å¼å°†å¤ç”¨ .at-mention-popup çš„ç°æœ‰æ ·å¼ */
        }
        /* â–²â–²â–² æ–°æ ·å¼ç²˜è´´ç»“æŸ â–²â–²â–² */
        /* â–¼â–¼â–¼ ã€å…¨æ–°ã€‘ç¾¤å…¬å‘Šæ¿å¼¹çª—æ ·å¼ â–¼â–¼â–¼ */
        #announcement-board-modal .modal-content {
            height: 70%;
            background-color: #f0f2f5;
        }
        #announcement-board-content {
            padding: 15px;
            flex-grow: 1;
            overflow-y: auto;
            display: flex;
            flex-direction: column;
            gap: 15px; /* å…¬å‘Šä¹‹é—´çš„é—´è· */
        }
        #announcement-board-content .message-wrapper {
            max-width: 100%; /* è®©å…¬å‘Šæ¶ˆæ¯å¯ä»¥æ’‘æ»¡å®½åº¦ */
            align-self: center;
        }
        #announcement-board-content .timestamp {
            display: none; /* å…¬å‘Šæ¿å†…ä¸æ˜¾ç¤ºæ—¶é—´æˆ³ */
        }
        /* â–²â–²â–² æ–°CSSç²˜è´´ç»“æŸ â–²â–²â–² */
        /* â–¼â–¼â–¼ ã€å…¨æ–°ã€‘å…¬å‘Šæ¿å¡ç‰‡ç®¡ç†æ ·å¼ â–¼â–¼â–¼ */
        .announcement-item-wrapper {
            position: relative; /* ä¸ºäº†å®šä½æ“ä½œæŒ‰é’® */
            padding: 10px;
            background-color: white;
            border-radius: 12px;
            box-shadow: 0 1px 3px rgba(0,0,0,0.05);
        }
        .announcement-item-actions {
            position: absolute;
            top: 15px;
            right: 15px;
            font-size: 20px;
            font-weight: bold;
            color: var(--text-secondary);
            cursor: pointer;
            padding: 5px;
            line-height: 1;
            border-radius: 50%;
        }
        .announcement-item-actions:hover {
            background-color: #f0f0f0;
        }
        .pinned-indicator {
            position: absolute;
            top: -8px;
            left: -8px;
            width: 28px;
            height: 28px;
            background-color: #ffc107;
            color: white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 16px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.2);
            border: 2px solid white;
        }
        /* â–²â–²â–² æ–°CSSç²˜è´´ç»“æŸ â–²â–²â–² */
        /* â–¼â–¼â–¼ ã€å…¨æ–°ã€‘è½¬å‘åŠŸèƒ½æ ·å¼ â–¼â–¼â–¼ */
        
        /* 1. è½¬å‘åçš„åŠ¨æ€ï¼Œå†…åµŒçš„åŸå§‹å†…å®¹å®¹å™¨ */
        .reposted-content-wrapper {
            background-color: #f7f7f8;
            border: 1px solid var(--border-color);
            border-radius: 8px;
            padding: 10px;
            margin-top: 10px;
        }
        
        /* åœ¨å¤œé—´æ¨¡å¼ä¸‹ï¼Œä¸ºå†…åµŒå®¹å™¨æä¾›ä¸€ä¸ªæ·±è‰²èƒŒæ™¯ */
        #phone-screen.dark-mode .reposted-content-wrapper {
            background-color: #2c2c2e;
            border-color: #38383a;
        }
        
        /* 2. ç§»é™¤å†…åµŒåŸå§‹å†…å®¹çš„åº•éƒ¨äº’åŠ¨åŒºï¼Œé¿å…æ··æ·† */
        .reposted-content-wrapper .post-footer,
        .reposted-content-wrapper .post-feedback-icons,
        .reposted-content-wrapper .post-likes-section {
            display: none;
        }
        
        /* 3. è®©å†…åµŒå†…å®¹çš„å¤´éƒ¨ä¿¡æ¯ç¨å¾®ç´§å‡‘ä¸€äº› */
        .reposted-content-wrapper .post-header {
            margin-bottom: 8px;
        }
        .reposted-content-wrapper .post-avatar {
            width: 32px;
            height: 32px;
        }
        .reposted-content-wrapper .post-nickname {
            font-size: 14px;
        }
        /* â–²â–²â–² æ–°CSSç²˜è´´ç»“æŸ â–²â–²â–² */

             
        /* â–¼â–¼â–¼ ã€å…¨æ–°ã€‘å…±äº«ä½ç½®å¡ç‰‡æ ·å¼ (å¾®ä¿¡é£æ ¼ V2 - æ”¯æŒå›¾ç‰‡èƒŒæ™¯) â–¼â–¼â–¼ */
        
        /* 1. å¡ç‰‡æ€»å®¹å™¨ (ä¿æŒä¸å˜) */
        .location-share-card {
            width: 230px;
            border-radius: 10px;
            overflow: hidden; 
            background-color: #fff;
            border: 1px solid #f0f0f0;
            box-shadow: 0 1px 4px rgba(0,0,0,0.05);
            cursor: pointer; /* è®©å¡ç‰‡çœ‹èµ·æ¥å¯ä»¥ç‚¹å‡» */
        }
        
        /* 2. ä¸ŠåŠéƒ¨åˆ†ï¼šç™½è‰²æ–‡å­—åŒº (ä¿æŒä¸å˜) */
        .card-text-area {
            padding: 12px;
            border-bottom: 1px solid #f0f0f0;
        }
        .card-text-primary {
            font-size: 16px;
            font-weight: 600;
            color: #222;
            margin-bottom: 4px;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }
        .card-text-secondary {
            font-size: 12px;
            color: #a0a0a0;
        }
        
        /* 3. ä¸‹åŠéƒ¨åˆ†ï¼šã€æ ¸å¿ƒä¿®æ”¹ã€‘åœ°å›¾/å›¾ç‰‡åŒº */
        .card-map-area {
            height: 100px; /* å¢åŠ é«˜åº¦ä»¥æ›´å¥½åœ°å±•ç¤ºå›¾ç‰‡ */
            display: flex;
            justify-content: center;
            align-items: center;
            
            /* å›¾ç‰‡èƒŒæ™¯çš„å…³é”®æ ·å¼ */
            background-size: cover;
            background-position: center;
            
            /* é»˜è®¤çš„çº¯è‰²èƒŒæ™¯ (å½“æ²¡æœ‰æä¾›å›¾ç‰‡æ—¶ç”Ÿæ•ˆ) */
            background-color: #FFF0F5; /* AIçš„å¡ç‰‡ç”¨æŸ”å’Œç²‰è‰² */
        }
        
        /* 4. ç”¨æˆ·å‘é€çš„å¡ç‰‡ï¼Œåœ°å›¾åŒºé»˜è®¤ç”¨æŸ”å’Œç»¿è‰² */
        .message-bubble.user .location-share-card .card-map-area {
            background-color: #F0FFF8;
        }
        
        /* 5. ã€æ ¸å¿ƒä¿®æ”¹ã€‘ç¾åŒ–å›¾é’‰å›¾æ ‡ï¼Œå¢åŠ é˜´å½±ä½¿å…¶æ›´çªå‡º */
        .card-pin-icon {
            font-size: 40px;
            color: #FF6B6B; /* ã€æ ¸å¿ƒä¿®æ”¹ã€‘å°†é¢œè‰²ä» white æ”¹ä¸ºæ‚¨å–œæ¬¢çš„ä»»æ„é¢œè‰² */
        
            text-shadow: 0 2px 5px rgba(0, 0, 0, 0.4); 
        }
        /* â–²â–²â–² æ–°CSSç²˜è´´ç»“æŸ â–²â–²â–² */
        /* â–¼â–¼â–¼ ã€å…¨æ–°ã€‘AI è§’è‰²è¡ŒåŠ¨å‘¼å¸ç¯æ•ˆæœ â–¼â–¼â–¼ */
        @keyframes breathing-light {
            0% {
        box-shadow: 0 0 6px rgba(0, 123, 255, 0.4);
            }
            50% {
        box-shadow: 0 0 18px 4px rgba(0, 123, 255, 0.8);
            }
            100% {
        box-shadow: 0 0 6px rgba(0, 123, 255, 0.4);
            }
        }
        
        .chat-list-item .avatar.is-acting {
            /* æ ¸å¿ƒï¼šåº”ç”¨å‘¼å¸ç¯åŠ¨ç”» */
            animation: breathing-light 2s ease-in-out infinite;
            /* (å¯é€‰) åŒæ—¶æ·»åŠ ä¸€ä¸ªå¸¸äº®çš„è¾¹æ¡†ï¼Œè®©æ•ˆæœæ›´æ˜æ˜¾ */
            border: 1.5px solid rgba(0, 123, 255, 0.7);
        }
        /* â–²â–²â–² æ–°æ ·å¼ç²˜è´´ç»“æŸ â–²â–²â–² */
        /* â–¼â–¼â–¼ ã€å…¨æ–°ã€‘åŠ¨æ€è¯„è®ºåŒºè¡¨æƒ…åŠŸèƒ½æ ·å¼ â–¼â–¼â–¼ */
        
        /* === ã€å…¨æ–°ã€‘è¯„è®ºåŒºè¡¨æƒ…æŒ‰é’®æ ·å¼ (ä¸action-iconé£æ ¼ç»Ÿä¸€) === */
        .comment-sticker-btn {
            /* 1. é‡ç½®æŒ‰é’®é»˜è®¤æ ·å¼ */
            background: none;
            border: none;
            padding: 5px; /* å¢åŠ ä¸€ç‚¹å¯ç‚¹å‡»åŒºåŸŸ */
            cursor: pointer;
            
            /* 2. ä¸å…¶ä»–å›¾æ ‡é¢œè‰²å’Œè¿‡æ¸¡æ•ˆæœå¯¹é½ */
            color: var(--text-secondary);
            transition: all 0.2s ease-in-out;
        
            /* 3. ä½¿ç”¨Flexå¸ƒå±€è®©å†…éƒ¨çš„SVGå®Œç¾å±…ä¸­ */
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .comment-sticker-btn:hover {
            color: var(--text-primary); /* é¼ æ ‡æ‚¬åœæ—¶å˜è‰²ï¼Œæä¾›åé¦ˆ */
        }
        
        /* 4. å®šä¹‰SVGå›¾æ ‡çš„æ ·å¼ï¼Œä¸ç‚¹èµ/è½¬å‘å›¾æ ‡å®Œå…¨ä¸€è‡´ */
        .comment-sticker-btn svg {
            width: 22px;
            height: 22px;
            fill: none;
            stroke: currentColor;
            stroke-width: 2;
            stroke-linecap: round;
            stroke-linejoin: round;
        }
        
        /* 2. è¯„è®ºåŒºè¡¨æƒ…é¢æ¿å®¹å™¨ */
        #qzone-sticker-panel {
            position: absolute; /* ä½¿ç”¨ç»å¯¹å®šä½ï¼Œç”±JSæ§åˆ¶ä½ç½® */
            width: 280px;
            height: 200px;
            background-color: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            border: 1px solid var(--border-color);
            border-radius: 12px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.15);
            z-index: 1010; /* ç¡®ä¿åœ¨å…¶ä»–å…ƒç´ ä¹‹ä¸Š */
            display: none; /* é»˜è®¤éšè— */
            flex-direction: column;
            overflow: hidden;
        }
        
        /* 3. é¢æ¿å†…çš„è¡¨æƒ…ç½‘æ ¼ (ä¸å˜) */
        #qzone-sticker-grid {
            flex-grow: 1;
            overflow-y: auto;
            padding: 10px;
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(60px, 1fr));
            gap: 10px;
        }
        
        #qzone-sticker-grid .sticker-item {
            position: relative;
            aspect-ratio: 1 / 1;
            background-color: white;
            border-radius: 8px;
            background-size: contain;
            background-repeat: no-repeat;
            background-position: center;
            cursor: pointer;
            box-shadow: 0 1px 3px rgba(0,0,0,0.08);
        }
        
        
        /* 4. è¯„è®ºåŒºé‡Œçš„è¡¨æƒ…å›¾ç‰‡æ ·å¼ (å°ºå¯¸ä¿®æ­£å) */
        .comment-text .comment-sticker {
            max-width: 100px;  /* å‡å°æœ€å¤§å®½åº¦ */
            max-height: 100px; /* å‡å°æœ€å¤§é«˜åº¦ */
            display: block;
            background-color: transparent;
        }
        
        /* 5. ã€æ–°å¢ã€‘ä¼˜åŒ–ï¼šå½“è¯„è®ºå†…å®¹æ˜¯è¡¨æƒ…æ—¶ï¼Œè°ƒæ•´é—´è· */
        .comment-item .comment-text:has(.comment-sticker) {
            /* å¦‚æœ .comment-text å†…éƒ¨åªæœ‰è¡¨æƒ…ï¼Œå°±ç§»é™¤æ–‡å­—è¡Œé«˜å¸¦æ¥çš„é¢å¤–è¾¹è· */
            line-height: 1;
        }
        
        /* â–²â–²â–² æ–°æ ·å¼ç²˜è´´ç»“æŸ â–²â–²â–² */
        /* === å¤´åƒæ¡†é€‰æ‹©æ¨¡æ€æ¡†æ ·å¼ === */
        .change-frame-btn {
            padding: 6px 10px;
            border: 1px solid #ccc;
            background-color: #f0f0f0;
            border-radius: 5px;
            cursor: pointer;
            font-size: 13px;
            margin-left: 10px;
        }
        
        #avatar-frame-modal .modal-content {
            height: 70%;
        }
        
        #avatar-frame-modal .modal-body {
            padding: 0;
            display: flex;
            flex-direction: column;
        }
        
        .frame-tabs {
            display: flex;
            border-bottom: 1px solid var(--border-color);
            flex-shrink: 0;
        }
        
        .frame-tab {
            flex: 1;
            padding: 12px;
            text-align: center;
            font-weight: 500;
            cursor: pointer;
            color: var(--text-secondary);
            border-bottom: 2px solid transparent;
        }
        
        .frame-tab.active {
            color: var(--accent-color);
            border-bottom-color: var(--accent-color);
        }
        
        .frame-content {
            flex-grow: 1;
            overflow-y: auto;
            padding: 15px;
        }
        
        .frame-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(70px, 1fr));
            gap: 15px;
        }
        
        .frame-item {
            aspect-ratio: 1 / 1;
            border: 2px solid transparent;
            border-radius: 10px;
            cursor: pointer;
            background-color: #f0f0f0;
            background-size: cover;
            background-position: center;
            padding: 5px;
            transition: all 0.2s ease;
            position: relative;
        }
        
        .frame-item.selected {
            border-color: var(--accent-color);
            transform: scale(1.05);
        }
        
        .frame-item .preview-avatar {
            width: 100%;
            height: 100%;
            border-radius: 50%;
            object-fit: cover;
        }
        
        .frame-item .preview-frame {
            position: absolute;
            top: -7px;
            left: 0;
            width: 100%;
            height: 100%;
        }
        
        
        /* â–¼â–¼â–¼ ã€æœ€ç»ˆä¿®å¤æ–¹æ¡ˆã€‘è¯·ç”¨è¿™ä¸€æ•´å—ä»£ç æ›¿æ¢æ‰€æœ‰æ—§çš„å¤´åƒç›¸å…³æ ·å¼ â–¼â–¼â–¼ */
        
        /* 1. å¤´åƒæœ€å¤–å±‚å®¹å™¨ï¼Œè´Ÿè´£å ä½å’ŒåŠ¨æ€å˜å®½ */
        .avatar-group {
            width: 34px;
            flex-shrink: 0; /* ç¡®ä¿åœ¨flexå¸ƒå±€ä¸­ä¸è¢«å‹ç¼© */
            position: relative;
            transition: width 0.2s ease;
        }
        /* å½“ä½©æˆ´å¤´åƒæ¡†æ—¶ï¼Œå¤–å±‚å®¹å™¨å˜å®½ï¼Œä¸ºæ›´å¤§çš„å¤´åƒæ¡†åˆ›é€ ç©ºé—´ */
        .avatar-group.has-frame {
            width: 42px; 
        }
        
        /* 2. åŸºç¡€çš„ã€æ— æ¡†çš„å¤´åƒæ ·å¼ */
        .message-bubble .avatar {
            width: 34px;
            height: 34px;
            border-radius: 20%; /* é»˜è®¤çš„æ–¹åœ†å½¢å¤´åƒ */
            object-fit: cover;
        }
        
        /* 3. å¸¦æ¡†å¤´åƒçš„â€œå†…éƒ¨å®¹å™¨â€ */
        .avatar-with-frame {
            position: relative; /* å…³é”®ï¼šä¸ºå†…éƒ¨çš„å¤´åƒå’Œæ¡†æä¾›å®šä½é”šç‚¹ */
            width: 38px;
            height: 38px;
            margin: 0 auto;
            transition: all 0.2s ease;
        }
        /* ã€æ ¸å¿ƒã€‘å½“æœ‰æ¡†æ—¶ï¼Œè¿™ä¸ªå†…éƒ¨å®¹å™¨ä¹Ÿå˜å¤§ï¼Œè®©é‡Œé¢çš„å›¾ç‰‡å¯ä»¥æ›´å¤§ */
        .avatar-group.has-frame .avatar-with-frame {
            width: 43px;
            height: 43px;
        }
        
        /* 4. å¸¦æ¡†å¤´åƒä¸­çš„â€œå¤´åƒå›¾ç‰‡æœ¬èº«â€ */
        .avatar-with-frame .avatar-img {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%; /* å®½åº¦æ’‘æ»¡å…¶çˆ¶å®¹å™¨ (.avatar-with-frame) */
            height: 100%;/* é«˜åº¦ä¹Ÿæ’‘æ»¡ */
            border-radius: 50%; /* ä½©æˆ´å¤´åƒæ¡†æ—¶ï¼Œå›¾ç‰‡æœ¬èº«å˜ä¸ºåœ†å½¢ä»¥æ›´å¥½åœ°é€‚é… */
            object-fit: cover;
            z-index: 1; /* ç¡®ä¿åœ¨å¤´åƒæ¡†ä¸‹æ–¹ */
        }
        
        /* 5. â€œå¤´åƒæ¡†å›¾ç‰‡æœ¬èº«â€ */
        .avatar-with-frame .avatar-frame {
            position: absolute;
            width: 120%;  
            height: 120%; 
        
            /* --- è¿™å°±æ˜¯ç¡®ä¿å®Œç¾åŒ…è£¹å’Œå±…ä¸­çš„å…³é”®ä»£ç  --- */
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            /* --- å…³é”®ä»£ç ç»“æŸ --- */
            z-index: 2; /* ç¡®ä¿åœ¨å¤´åƒå›¾ç‰‡ä¸Šæ–¹ */
            pointer-events: none; /* è®©é¼ æ ‡äº‹ä»¶å¯ä»¥ç©¿é€å¤´åƒæ¡†ï¼Œç‚¹åˆ°ä¸‹é¢çš„å¤´åƒ */
        }
        
        /* â–²â–²â–² æ›¿æ¢ç»“æŸ â–²â–²â–² */
/* â–¼â–¼â–¼ ã€æœ€ç»ˆä¿®å¤æ–¹æ¡ˆã€‘è¯·ç”¨è¿™æ•´å—ä»£ç æ›¿æ¢æ‰€æœ‰æ—§çš„å¤´åƒå’Œæ°”æ³¡ç›¸å…³æ ·å¼ â–¼â–¼â–¼ */

/* 1. å¼ºåˆ¶å¤–å±‚æ°”æ³¡å®¹å™¨(.message-bubble)æˆä¸ºä¸€ä¸ªçœŸæ­£çš„â€œå¼¹æ€§â€é¡¹ç›®ã€‚*/
.message-bubble {
    flex: 1;
    min-width: 0;
    display: flex;
    align-items: flex-start;
    gap: 12px;
    max-width: 100%;
}

.message-bubble.user { 
    flex-direction: row-reverse; 
}

/* 2. å¼ºåˆ¶å†…å±‚å†…å®¹åŒº(.content)ä¹Ÿæˆä¸ºä¸€ä¸ªâ€œå¼¹æ€§â€é¡¹ç›®ã€‚*/
.message-bubble .content {
    flex: 1;
    min-width: 0;
    
    /* --- æ ¸å¿ƒä¿®å¤ï¼šä¿®æ”¹è¿™é‡Œçš„æ¢è¡Œè§„åˆ™ --- */
    overflow-wrap: break-word; /* ä½¿ç”¨è¿™ä¸ªæ ‡å‡†å±æ€§æ¥ä¿è¯å•è¯å®Œæ•´æ€§ */
    word-wrap: break-word;     /* å…¼å®¹æ—§ç‰ˆæµè§ˆå™¨ */
    /* --- ä¿®å¤ç»“æŸ (å·²æ›¿æ¢æ—§çš„ break-all è§„åˆ™) --- */

    position: relative;
    font-size: var(--chat-font-size, 16px);
    padding: 8px 12px;
    line-height: 1.5;
}

/* 3. å†æ¬¡ç¡®ä¿å¤´åƒå®¹å™¨ç»å¯¹ä¸æ”¶ç¼© (ä½œä¸ºæœ€ç»ˆä¿é™©) */
.message-bubble .avatar-group {
    flex-shrink: 0 !important;
}

/* â–²â–²â–² ä¿®å¤æ–¹æ¡ˆç»“æŸ â–²â–²â–² */
        /* â–¼â–¼â–¼ ã€ç»ˆæå¼ºåˆ¶ä¿®æ­£ã€‘è¯·å°†è¿™æ®µä»£ç ç²˜è´´åˆ° <style> çš„æœ€æœ«å°¾ â–¼â–¼â–¼ */
        
        /* ä½¿ç”¨IDé€‰æ‹©å™¨å’Œ!importantï¼Œå¼ºåˆ¶æå‡è¿™æ¡è§„åˆ™çš„ä¼˜å…ˆçº§åˆ°æœ€é«˜ï¼Œ
           ä»¥è¦†ç›–ä»»ä½•å¯èƒ½å­˜åœ¨çš„æœªçŸ¥å†²çªæ ·å¼ã€‚*/
        
        #chat-interface-screen .message-bubble .avatar-group.has-frame .avatar-with-frame {
            width: 43px !important;
            height: 43px !important;
        }
        
        #chat-interface-screen .message-bubble .avatar-with-frame .avatar-img {
            width: 100% !important;
            height: 100% !important;
        }
        /* â–²â–²â–² ä¿®æ­£ç»“æŸ â–²â–²â–² */
        /* â–¼â–¼â–¼ ã€å…¨æ–°ã€‘å¡ç‰‡/ç‰¹æ®Šå†…å®¹å±…ä¸­ä¿®æ­£ â–¼â–¼â–¼ */
        .message-bubble.is-link-share .content,
        .message-bubble.is-transfer .content,
        .message-bubble.is-red-packet .content,
        .message-bubble.is-poll .content,
        .message-bubble.is-location-share .content,
        .message-bubble.is-sticker .content,
        .message-bubble.is-ai-image .content {
            display: flex;
            justify-content: center;
            align-items: center;
        }
        /* â–²â–²â–² ä¿®æ­£ç»“æŸ â–²â–²â–² */
        /* â–¼â–¼â–¼ ã€å…¨æ–°ã€‘éšè—èŠå¤©åˆ—è¡¨ä¸­çš„å¤´åƒæ¡† (æœ€ç»ˆä¿®æ­£ç‰ˆ) â–¼â–¼â–¼ */
        
        /* 1. åœ¨èŠå¤©åˆ—è¡¨å±å¹•ä¸­ï¼Œç›´æ¥éšè—å¤´åƒæ¡†å›¾ç‰‡ */
        #chat-list-screen .avatar-frame {
            display: none;
        }
        
        /* 2. å¼ºåˆ¶æ‰€æœ‰å¤´åƒçš„æœ€å¤–å±‚å®¹å™¨ï¼Œåœ¨åˆ—è¡¨é¡µéƒ½ä¿æŒ 45px çš„æ­£ç¡®å°ºå¯¸ */
        #chat-list-screen .avatar-group {
            width: 45px;
            height: 45px;
        }
        
        /* 3. å¦‚æœä¸€ä¸ªå¤´åƒæ˜¯å¸¦æ¡†ç»“æ„ï¼Œä¹Ÿå¼ºåˆ¶å…¶å†…éƒ¨å®¹å™¨å’Œå›¾ç‰‡é€‚åº” 45px çš„å°ºå¯¸ */
        #chat-list-screen .avatar-group.has-frame .avatar-with-frame,
        #chat-list-screen .avatar-group.has-frame .avatar-img {
            width: 45px;
            height: 45px;
        }
        
        /* 4. ç¡®ä¿æ‰€æœ‰å¤´åƒåœ¨åˆ—è¡¨é¡µéƒ½æ˜¯åœ†å½¢çš„ï¼Œä¿æŒç»Ÿä¸€ */
        #chat-list-screen .avatar-img,
        #chat-list-screen .avatar {
            border-radius: 50%;
        }
        
        /* â–²â–²â–² æ–°å¢CSSç»“æŸ â–²â–²â–² */
        /* â–¼â–¼â–¼ ã€å…¨æ–°ã€‘å¢åŠ èŠå¤©åˆ—è¡¨å¤´åƒä¸æ–‡å­—çš„é—´è· â–¼â–¼â–¼ */
        
        /* 1. å¼ºåˆ¶ä¸ºèŠå¤©åˆ—è¡¨ä¸­çš„å¤´åƒå®¹å™¨è®¾ç½®å³è¾¹è· */
        /*    è¿™å°†è¦†ç›–ä»»ä½•å¯èƒ½å­˜åœ¨çš„æ—§æ ·å¼ï¼Œå¹¶ç¡®ä¿é—´è·ç”Ÿæ•ˆ */
        #chat-list .chat-list-item .avatar-group {
            margin-right: 15px !important; /* æ ¸å¿ƒï¼šå¢åŠ å³è¾¹è·ï¼Œå°†æ–‡å­—æ¨å¼€ */
        }
        
        /* 2. (å¯é€‰ä½†æ¨è) ç¡®ä¿æ—§çš„å¤´åƒæ ·å¼ä¸å†å¹²æ‰°å¸ƒå±€ */
        #chat-list .chat-list-item .avatar {
            margin-right: 0; /* ç§»é™¤æ—§çš„è¾¹è·ï¼Œé˜²æ­¢é‡å¤è®¡ç®— */
        }
        
        /* â–²â–²â–² æ–°å¢CSSç»“æŸ â–²â–²â–² */
        /* â–¼â–¼â–¼ ã€å…¨æ–°ã€‘åŠ¨æ€è¯„è®ºåŒºå›å¤åŠŸèƒ½æ ·å¼ â–¼â–¼â–¼ */
        
        /* è®©è¯„è®ºé¡¹åœ¨é¼ æ ‡æ‚¬åœæ—¶é«˜äº®ï¼Œå¹¶æ˜¾ç¤ºæ‰‹å‹å…‰æ ‡ */
        .comment-item {
            cursor: pointer;
            transition: background-color 0.2s;
            /* ä½¿ç”¨Flexå¸ƒå±€ï¼Œè®©è¯„è®ºå†…å®¹å’Œåˆ é™¤æŒ‰é’®èƒ½æ­£ç¡®å¯¹é½ */
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            gap: 8px; /* å†…å®¹å’Œåˆ é™¤æŒ‰é’®çš„é—´è· */
            padding: 4px 6px; /* å¢åŠ ä¸€ç‚¹å†…è¾¹è·ï¼Œæ–¹ä¾¿ç‚¹å‡» */
            margin: 0 -6px; /* æŠµæ¶ˆå†…è¾¹è·ï¼Œä¿æŒè§†è§‰å¯¹é½ */
            border-radius: 4px;
        }
        
        .comment-item:hover {
            background-color: #f0f2f5;
        }
        
        /* å¤œé—´æ¨¡å¼ä¸‹çš„æ‚¬åœæ•ˆæœ */
        #phone-screen.dark-mode .comment-item:hover {
            background-color: #2c2c2e;
        }
        
        /* è¯„è®ºå†…å®¹æ–‡æœ¬çš„å®¹å™¨ */
        .comment-item .comment-text {
            flex-grow: 1; /* å æ®ä¸»è¦ç©ºé—´ */
            word-break: break-word; /* ç¡®ä¿é•¿å†…å®¹èƒ½æ¢è¡Œ */
        }
        
        /* â–²â–²â–² æ–°æ ·å¼ç²˜è´´ç»“æŸ â–²â–²â–² */
        /* â–¼â–¼â–¼ ã€å…¨æ–°ã€‘ç”¨äºå…¼å®¹æ—§æ ¼å¼è¯„è®ºçš„æ ·å¼ â–¼â–¼â–¼ */
        .legacy-comment-item {
            line-height: 1.5;
            padding: 4px 6px; /* å’Œæ–°æ ·å¼ä¿æŒä¸€è‡´çš„å†…è¾¹è· */
            color: var(--text-secondary); /* ç”¨æ¬¡è¦é¢œè‰²æ˜¾ç¤ºï¼Œä»¥ç¤ºåŒºåˆ« */
        }
        /* â–²â–²â–² æ–°æ ·å¼ç²˜è´´ç»“æŸ â–²â–²â–² */
        /* â–¼â–¼â–¼ ã€å…¨æ–°ã€‘å¡ç‰‡/ç‰¹æ®Šå†…å®¹å±…ä¸­ä¿®æ­£ â–¼â–¼â–¼ */
        .message-bubble.is-link-share .content,
        .message-bubble.is-transfer .content,
        .message-bubble.is-red-packet .content,
        .message-bubble.is-poll .content,
        .message-bubble.is-location-share .content,
        .message-bubble.is-sticker .content,
        .message-bubble.is-ai-image .content {
            display: flex;
            justify-content: center;
            align-items: center;
        }
        /* â–²â–²â–² ä¿®æ­£ç»“æŸ â–²â–²â–² */
        /* â–¼â–¼â–¼ ã€ç»ˆæå¼ºåˆ¶ä¿®æ­£ã€‘è¯·å°†è¿™æ®µä»£ç ç²˜è´´åˆ° <style> çš„æœ€æœ«å°¾ â–¼â–¼â–¼ */
        
        /* ä½¿ç”¨IDé€‰æ‹©å™¨å’Œ!importantï¼Œå¼ºåˆ¶æå‡è¿™æ¡è§„åˆ™çš„ä¼˜å…ˆçº§åˆ°æœ€é«˜ï¼Œ
           ä»¥è¦†ç›–ä»»ä½•å¯èƒ½å­˜åœ¨çš„æœªçŸ¥å†²çªæ ·å¼ã€‚*/
        
        #chat-interface-screen .message-bubble .avatar-group.has-frame .avatar-with-frame {
            width: 43px !important;
            height: 43px !important;
        }
        
        #chat-interface-screen .message-bubble .avatar-with-frame .avatar-img {
            width: 100% !important;
            height: 100% !important;
        }
        /* â–²â–²â–² ä¿®æ­£ç»“æŸ â–²â–²â–² */
        /* â–¼â–¼â–¼ ã€Safari/iOS æœ€ç»ˆå¡ç‰‡å¸ƒå±€ä¿®å¤ã€‘è¯·ç”¨è¿™ä¸€æ•´å—å…¨æ–°çš„ä»£ç  â–¼â–¼â–¼ */
        
        /* 
          ç¬¬ä¸€æ­¥ï¼šã€æ ¸å¿ƒä¿®å¤ã€‘
          è¿™ä¸ªé€‰æ‹©å™¨ä¼šä¸€æ¬¡æ€§é€‰ä¸­æ‰€æœ‰åŒ…å«ç‰¹æ®Šå¡ç‰‡çš„æ¶ˆæ¯æ°”æ³¡å®¹å™¨(.message-bubble)ã€‚
          æˆ‘ä»¬å‘Šè¯‰å®ƒä¸è¦å†å¼ºåˆ¶æ‹‰ä¼¸ï¼Œè€Œæ˜¯æ ¹æ®å†…éƒ¨å¡ç‰‡çš„å¤§å°è‡ªé€‚åº”å®½åº¦ã€‚
        */
        .message-bubble.is-sticker,
        .message-bubble.is-voice-message,
        .message-bubble.is-transfer,
        .message-bubble.is-ai-image,
        .message-bubble.is-red-packet,
        .message-bubble.is-poll,
        .message-bubble.is-link-share,
        .message-bubble.is-location-share {
            flex: initial; /* è¦†ç›–æ‰é€šç”¨çš„ flex: 1ï¼Œè¿™æ˜¯è§£å†³é—®é¢˜çš„å…³é”®ï¼Œè®©æ°”æ³¡æœ¬èº«ä¸å†æ‹‰ä¼¸ */
            min-width: auto; /* åŒæ ·é‡ç½® min-widthï¼Œå…è®¸å…¶è‡ªç”±æ”¶ç¼© */
        }
        
        /* 
          ç¬¬äºŒæ­¥ï¼šä¿æŒå¯¹å¡ç‰‡å†…éƒ¨ .content åŒºåŸŸçš„æ ·å¼é‡ç½®ã€‚
          æˆ‘ä»¬ç§»é™¤å®ƒçš„èƒŒæ™¯å’Œå†…è¾¹è·ï¼Œè®©å¡ç‰‡è‡ªå·±è´Ÿè´£å¤–è§‚ã€‚
        */
        .message-bubble.is-sticker .content,
        .message-bubble.is-voice-message .content,
        .message-bubble.is-transfer .content,
        .message-bubble.is-ai-image .content,
        .message-bubble.is-red-packet .content,
        .message-bubble.is-poll .content,
        .message-bubble.is-link-share .content,
        .message-bubble.is-location-share .content {
            /* ä¿æŒè¿™ä¸ªå¥½ä¹ æƒ¯ï¼Œç¡®ä¿å†…å®¹åŒºä¹Ÿä¸æ‹‰ä¼¸ */
            flex: initial; 
            
            /* ç§»é™¤æ‰€æœ‰å¯èƒ½å¹²æ‰°å¡ç‰‡æ˜¾ç¤ºçš„æ ·å¼ */
            padding: 0;
            background: transparent;
            box-shadow: none;
            border: none;
            backdrop-filter: none;
            -webkit-backdrop-filter: none;
        }
        
        /* â–²â–²â–² ä¿®å¤ç»“æŸ â–²â–²â–² */
        /* â–¼â–¼â–¼ ã€ç»ˆæç‰ˆã€‘ç¾¤å…¬å‘Šå¯¹é½ä¿®å¤ (å¼ºåˆ¶æ‰€æœ‰å†…å®¹é å·¦) â–¼â–¼â–¼ */
        
        /* 
          ç¬¬ä¸€æ­¥ï¼šå¼ºåˆ¶æ‰€æœ‰æ¶ˆæ¯å—ï¼ˆæ— è®ºæ˜¯AIè¿˜æ˜¯ç”¨æˆ·ï¼‰éƒ½åœ¨å…¬å‘Šæ¿å†…é å·¦å¯¹é½ã€‚
          è¿™ç¡®ä¿äº†AIå’Œç”¨æˆ·çš„æ¶ˆæ¯å—åœ¨å‚ç›´æ–¹å‘ä¸Šæ˜¯å¯¹é½çš„ã€‚
        */
        #announcement-board-content .message-wrapper {
            align-self: flex-start !important;
        }
        
        /* 
          ç¬¬äºŒæ­¥ï¼šè¿™æ˜¯æœ€å…³é”®çš„ä¸€æ­¥ï¼
          æˆ‘ä»¬ä¸“é—¨é’ˆå¯¹ç”¨æˆ·çš„æ¶ˆæ¯æ°”æ³¡ï¼Œå¼ºåˆ¶å°†å…¶å†…éƒ¨çš„å…ƒç´ é¡ºåºï¼ˆå¤´åƒå’Œå†…å®¹ï¼‰
          ä»â€œåå‘â€æ¢å¤ä¸ºâ€œæ­£å‘â€ï¼Œä½¿å…¶ä¸AIçš„æ¶ˆæ¯æ°”æ³¡å¸ƒå±€å®Œå…¨ä¸€è‡´ã€‚
        */
        #announcement-board-content .message-bubble.user {
            flex-direction: row !important;
        }
        
        /* 
          ç¬¬ä¸‰æ­¥ (å¯é€‰ä½†æ¨è): 
          åŒæ—¶ï¼Œæˆ‘ä»¬ä¹Ÿå¼ºåˆ¶å°†ç”¨æˆ·æ¶ˆæ¯å—å¤–éƒ¨çš„æ—¶é—´æˆ³å’Œæ°”æ³¡é¡ºåºæ¢å¤æ­£å¸¸ï¼Œ
          ä»¥é˜²æœªæ¥å¯èƒ½å‡ºç°çš„å¸ƒå±€é—®é¢˜ã€‚
        */
        #announcement-board-content .message-wrapper.user {
            flex-direction: row !important;
        }
        
        /* â–²â–²â–² ä¿®å¤ç»“æŸ â–²â–²â–² */
        /* â–¼â–¼â–¼ ã€ç»ˆæä¿®å¤ã€‘è¯·ç”¨è¿™ä¸€æ•´å—ä»£ç ï¼Œæ›¿æ¢æ‰ä½ ä¸Šä¸€æ¬¡ç²˜è´´çš„ä»£ç  â–¼â–¼â–¼ */
        
        /* === èŠå¤©ç•Œé¢å¤´éƒ¨æµ®åŠ¨ä¸å±‚çº§ç»ˆæä¿®å¤ === */
        
        /* 
          è¿™æ¬¡çš„ä¿®å¤æœ‰ä¸¤ä¸ªå…³é”®ç‚¹ï¼š
          1. ä¾ç„¶ä½¿ç”¨ absolute å®šä½è®©å¤´éƒ¨æµ®åŠ¨èµ·æ¥ã€‚
          2. é¢å¤–ç»™å®ƒä¸€ä¸ªéå¸¸é«˜çš„ z-index å¹¶ç”¨ !important æ ‡è®°ï¼Œ
             èµ‹äºˆå®ƒâ€œè‡³é«˜æ— ä¸Šâ€çš„æƒåŠ›ï¼Œå¼ºåˆ¶å®ƒå‹åˆ¶é¡µé¢ä¸Šä»»ä½•å…¶ä»–å…ƒç´ ã€‚
        */
        
        /* 1. å¼ºåˆ¶èŠå¤©ç•Œé¢çš„å¤´éƒ¨å˜ä¸ºç»å¯¹å®šä½ï¼Œå¹¶èµ‹äºˆä¸€ä¸ªæé«˜çš„å±‚çº§ */
        #chat-interface-screen > .header {
            position: absolute !important; /* æ ¸å¿ƒä¿®æ­£1: è„±ç¦»æ–‡æ¡£æµï¼Œæµ®åŠ¨èµ·æ¥ */
            top: 0;
            left: 0;
            width: 100%;
            z-index: 100 !important; /* æ ¸å¿ƒä¿®æ­£2: èµ‹äºˆä¸€ä¸ªéå¸¸é«˜çš„ z-indexï¼Œå‹åˆ¶ä¸€åˆ‡ */
        }
        
        /* 2. ä¿®æ­£èŠå¤©å†…å®¹åŒºçš„å¸ƒå±€ï¼Œç§»é™¤ä¸å†éœ€è¦çš„è´Ÿå¤–è¾¹è·ï¼Œè®©ä¸ºå¤´éƒ¨é¢„ç•™çš„ padding ç”Ÿæ•ˆ */
        #chat-interface-screen #chat-messages {
            margin-top: 0 !important; /* æ ¸å¿ƒä¿®æ­£3: ç§»é™¤ç”¨äºâ€œä¸Šæ‹‰â€çš„è´Ÿå¤–è¾¹è· */
        }
        
        /* â–²â–²â–² ä¿®å¤ä»£ç ç²˜è´´ç»“æŸ â–²â–²â–² */
        /* â–¼â–¼â–¼ ã€æœ€ç»ˆè§£å†³æ–¹æ¡ˆã€‘è¯·ç”¨è¿™ä¸€æ•´å—ä»£ç ï¼Œæ›¿æ¢æ‰æ‰€æœ‰æ—§çš„ä¿®å¤ä»£ç  â–¼â–¼â–¼ */
        
        /* === èŠå¤©ç•Œé¢å¸ƒå±€ä¸å±‚çº§ç»ˆæä¿®å¤ === */
        
        /* 
          ç¬¬ä¸€éƒ¨åˆ†ï¼šä¿®å¤éŸ³ä¹æ’­æ”¾å™¨è¢«é®æŒ¡çš„é—®é¢˜
          æˆ‘ä»¬ç»™æ’­æ”¾å™¨ä¸€ä¸ªæ¯”å¤´éƒ¨æ›´é«˜çš„ z-indexï¼Œè®©å®ƒèƒ½æ­£ç¡®åœ°è¦†ç›–æ‰€æœ‰å†…å®¹ã€‚
        */
        #music-player-overlay {
            z-index: 200 !important;
        }
        
        /* 
          ç¬¬äºŒéƒ¨åˆ†ï¼šå½»åº•é‡æ„èŠå¤©é¡µé¢çš„å¸ƒå±€ï¼Œè§£å†³å®½åº¦å’Œé®æŒ¡é—®é¢˜
          æˆ‘ä»¬å°†é‡‡ç”¨æœ€ç¨³å®šã€æœ€ç°ä»£çš„å¸ƒå±€æ–¹å¼ï¼š
          - å¤´éƒ¨å’Œè¾“å…¥æ¡†éƒ½ä½¿ç”¨ç»å¯¹å®šä½ï¼Œåˆ†åˆ«â€œé’‰â€åœ¨å±å¹•çš„é¡¶éƒ¨å’Œåº•éƒ¨ã€‚
          - èŠå¤©å†…å®¹åŒºåˆ™å æ®æ•´ä¸ªå±å¹•çš„é«˜åº¦ï¼Œå¹¶é€šè¿‡å†…è¾¹è·ï¼ˆpaddingï¼‰ä¸ºå¤´éƒ¨å’Œè¾“å…¥æ¡†ç•™å‡ºç©ºé—´ã€‚
          è¿™æ ·å¯ä»¥å®Œç¾å®ç°å†…å®¹åœ¨é€æ˜é¡¶/åº•éƒ¨ä¹‹ä¸‹æ»šåŠ¨çš„ç¾è§‚æ•ˆæœï¼Œä¸”ä¸ä¼šå†å‡ºç°å®½åº¦è®¡ç®—é”™è¯¯ã€‚
        */
        
        /* â–¼â–¼â–¼ è¯·ç”¨è¿™ä¸€æ•´å—å…¨æ–°çš„ä»£ç ï¼Œæ›¿æ¢æ‰€æœ‰æ—§çš„èŠå¤©ç•Œé¢å¸ƒå±€CSS â–¼â–¼â–¼ */
        
        /* 1. ç¡®ä¿èŠå¤©ç•Œé¢å®¹å™¨æ˜¯å¯é çš„å®šä½é”šç‚¹ */
        #chat-interface-screen {
            position: relative !important;
            height: 100%;
            width: 100%;
            overflow: hidden; /* é˜²æ­¢ä»»ä½•æ„å¤–æº¢å‡º */
        }
        
        /* 2. å¼ºåˆ¶ã€å¤´éƒ¨ã€‘ç»å¯¹å®šä½ï¼Œå¹¶â€œé’‰â€åœ¨å±å¹•é¡¶éƒ¨ */
        #chat-interface-screen > .header {
            position: absolute !important;
            top: 0;
            left: 0;
            right: 0; /* ä½¿ç”¨ left/right æ’‘æ»¡å®½åº¦ï¼Œæ¯” width:100% æ›´å¯é  */
            width: auto !important; 
            z-index: 100 !important; /* èµ‹äºˆä¸€ä¸ªéå¸¸é«˜çš„å±‚çº§ï¼Œç¡®ä¿å®ƒåœ¨æœ€ä¸Šå±‚ */
        }
        
        /* 3. å¼ºåˆ¶ã€è¾“å…¥æ¡†ã€‘ä¹Ÿç»å¯¹å®šä½ï¼Œå¹¶â€œé’‰â€åœ¨å±å¹•åº•éƒ¨ */
        #chat-interface-screen #chat-input-area {
            position: absolute !important;
            bottom: 0;
            left: 0;
            right: 0;
            width: auto !important;
            z-index: 100 !important;
            /* æ ¸å¿ƒï¼šä¸ºè¾“å…¥æ¡†æœ¬èº«æ·»åŠ é€‚é…â€œå°é»‘æ¡â€çš„åº•éƒ¨å†…è¾¹è· */
            padding-bottom: calc(8px + env(safe-area-inset-bottom)); 
        }
        
        /* 4. ã€æ ¸å¿ƒã€‘é‡æ–°å®šä¹‰ã€èŠå¤©å†…å®¹åŒºã€‘çš„å¸ƒå±€ */
        #chat-interface-screen #chat-messages {
            /* è®©å®ƒå¡«æ»¡æ•´ä¸ªå±å¹• */
            height: 100% !important; 
            width: 100% !important;
            
            /* å…è®¸å…¶å†…å®¹å‚ç›´æ»šåŠ¨ */
            overflow-y: auto !important; 
            
            /* ç¡®ä¿ padding çš„è®¡ç®—æ–¹å¼æ­£ç¡® */
            box-sizing: border-box !important; 
            
            /* ç§»é™¤æ‰€æœ‰å¯èƒ½å¹²æ‰°å¸ƒå±€çš„ margin */
            margin-top: 0 !important; 
        
            /* å…³é”®ï¼šä½¿ç”¨å†…è¾¹è·ä¸ºé¡¶éƒ¨çš„â€œå¤´éƒ¨â€å’Œåº•éƒ¨çš„â€œè¾“å…¥æ¡†â€ç•™å‡ºç©ºé—´ */
            /* è¿™æ ·å†…å®¹å°±ä¼šåœ¨åŠé€æ˜çš„é¡¶/åº•éƒ¨ä¹‹ä¸‹æ»šåŠ¨ï¼Œæ•ˆæœç¾è§‚ä¸”ç²¾å‡† */
            padding-top: 150px !important;  /* ä¸ºå¤´éƒ¨é¢„ç•™çº¦110pxç©ºé—´ */
            padding-bottom: 150px !important; /* ä¸ºè¾“å…¥æ¡†é¢„ç•™çº¦120pxç©ºé—´ */
        }
        
        /* â–²â–²â–² æ›¿æ¢ç»“æŸ â–²â–²â–² */
        
        /* â–²â–²â–² ä¿®å¤ä»£ç ç²˜è´´ç»“æŸ â–²â–²â–² */
        /* â–¼â–¼â–¼ ã€å…¨æ–°ã€‘â€œåŠ¨æ€å·²åˆ é™¤â€æç¤ºæ ·å¼ â–¼â–¼â–¼ */
        .post-deleted-placeholder {
            align-self: center;
            padding: 4px 12px;
            margin: 5px 0;
            background-color: rgba(0, 0, 0, 0.1);
            color: var(--text-secondary);
            font-size: 12px;
            border-radius: 10px;
            text-align: center;
            max-width: 80%;
            cursor: pointer; /* å…³é”®ï¼šè®©å®ƒçœ‹èµ·æ¥å¯ä»¥ç‚¹å‡» */
        }
        
        #phone-screen.dark-mode .post-deleted-placeholder {
            background-color: rgba(255, 255, 255, 0.15);
        }
        /* â–²â–²â–² æ–°æ ·å¼ç²˜è´´ç»“æŸ â–²â–²â–² */
        /* â–¼â–¼â–¼ ã€å…¨æ–°ã€‘ä¸ºæ¶‚é»‘ï¼ˆå‰§é€ï¼‰åŠŸèƒ½æ·»åŠ çš„æ ·å¼ â–¼â–¼â–¼ */
        .spoiler {
            background-color: #333; /* æ¶‚é»‘çš„èƒŒæ™¯è‰² */
            color: #333;           /* æ¶‚é»‘çš„æ–‡å­—é¢œè‰²ï¼Œä½¿å…¶ä¸èƒŒæ™¯èä¸ºä¸€ä½“ */
            padding: 0 4px;         /* è½»å¾®çš„å·¦å³å†…è¾¹è·ï¼Œä½¿å…¶æ›´ç¾è§‚ */
            border-radius: 4px;     /* åœ†è§’ */
            cursor: pointer;        /* é¼ æ ‡æ‚¬åœæ—¶æ˜¾ç¤ºä¸ºå¯ç‚¹å‡»çš„æ‰‹å‹ */
            transition: all 0.2s ease-in-out; /* è®©æ˜¾ç¤º/éšè—æ•ˆæœæ›´å¹³æ»‘ */
        }
        
        /* é¼ æ ‡æ‚¬åœæˆ–ç‚¹å‡»æ—¶ï¼Œæ¢å¤èƒŒæ™¯å’Œæ–‡å­—é¢œè‰²ä»¥æ˜¾ç¤ºå†…å®¹ */
        .spoiler:hover, .spoiler:active {
            background-color: #e0e0e0; /* æ˜¾ç¤ºæ—¶ç»™ä¸€ä¸ªæ·¡æ·¡çš„èƒŒæ™¯è‰² */
            color: inherit;           /* æ¢å¤ä¸ºæ­£å¸¸çš„æ–‡å­—é¢œè‰² */
        }
        /* â–²â–²â–² æ–°æ ·å¼ç²˜è´´ç»“æŸ â–²â–²â–² */
        /* â–¼â–¼â–¼ ã€å…¨æ–°ã€‘é•¿æœŸè®°å¿†ç®¡ç†æŒ‰é’®ç¾åŒ–æ ·å¼ â–¼â–¼â–¼ */
        .memory-action-btn {
            background: none;
            border: none;
            cursor: pointer;
            padding: 5px; /* å¢åŠ ä¸€ç‚¹å¯ç‚¹å‡»åŒºåŸŸï¼Œæ–¹ä¾¿ç”¨æˆ·æ“ä½œ */
            border-radius: 50%; /* åœ†å½¢èƒŒæ™¯ */
            display: flex;
            align-items: center;
            justify-content: center;
            transition: background-color 0.2s;
        }
        
        .memory-action-btn svg {
            width: 18px;  /* è®©å›¾æ ‡æ¯”é¡¶éƒ¨çš„ç¨å°ä¸€ç‚¹ï¼Œæ›´æ˜¾ç²¾è‡´ */
            height: 18px;
            stroke: var(--text-secondary); /* é»˜è®¤ä½¿ç”¨æ¬¡è¦æ–‡å­—çš„ç°è‰² */
            transition: stroke 0.2s;
        }
        
        .memory-action-btn:hover {
            background-color: #e9ecef; /* é¼ æ ‡æ‚¬åœæ—¶ç»™ä¸€ä¸ªæ·¡æ·¡çš„èƒŒæ™¯è‰² */
        }
        
        /* å¤œé—´æ¨¡å¼ä¸‹çš„æ‚¬åœæ•ˆæœ */
        #phone-screen.dark-mode .memory-action-btn:hover {
            background-color: #38383a;
        }
        
        /* ç¼–è¾‘æŒ‰é’®æ‚¬åœæ—¶ï¼Œå›¾æ ‡å˜ä¸ºè“è‰² */
        .memory-action-btn.edit-memory-btn:hover svg {
            stroke: var(--accent-color);
        }
        
        /* åˆ é™¤æŒ‰é’®æ‚¬åœæ—¶ï¼Œå›¾æ ‡å˜ä¸ºå±é™©çš„çº¢è‰² */
        .memory-action-btn.delete-memory-btn:hover svg {
            stroke: #ff3b30;
        }
        /* â–²â–²â–² æ–°CSSç²˜è´´ç»“æŸ â–²â–²â–² */
        /* â–¼â–¼â–¼ ã€å…¨æ–°ã€‘è¡¨æƒ…æ‰¹é‡åˆ é™¤åŠŸèƒ½æ ·å¼ â–¼â–¼â–¼ */
        
        /* ç®¡ç†æ¨¡å¼ä¸‹ï¼Œä¸ºè¡¨æƒ…é¡¹æ·»åŠ ä¸€ä¸ªé€‰ä¸­æ¡† */
        #sticker-grid.management-mode .sticker-item::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            border: 3px solid transparent;
            border-radius: 10px;
            box-sizing: border-box;
            transition: border-color 0.2s;
        }
        
        /* ç®¡ç†æ¨¡å¼ä¸‹ï¼Œè¢«é€‰ä¸­çš„è¡¨æƒ…é¡¹ï¼Œæ˜¾ç¤ºè“è‰²è¾¹æ¡† */
        #sticker-grid.management-mode .sticker-item.selected::after {
            border-color: var(--accent-color);
        }
        
        /* ç®¡ç†æ¨¡å¼ä¸‹ï¼Œæ€»æ˜¯æ˜¾ç¤ºåˆ é™¤æŒ‰é’® */
        #sticker-grid.management-mode .sticker-item .delete-btn {
            display: block;
            background-color: rgba(0, 0, 0, 0.5);
            color: white;
            border: 1px solid white;
        }
        
        /* åº•éƒ¨æ‰¹é‡åˆ é™¤æ“ä½œæ  */
        #sticker-action-bar {
            display: none; /* é»˜è®¤éšè— */
            padding: 10px 15px;
            padding-bottom: calc(10px + env(safe-area-inset-bottom));
            background-color: rgba(247, 247, 247, 0.9);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            border-top: 1px solid var(--border-color);
        }
        
        #sticker-action-bar button {
            width: 100%;
            padding: 12px;
            border-radius: 8px;
            border: none;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            background-color: #ff3b30;
            color: white;
        }
        /* â–²â–²â–² æ–°CSSç²˜è´´ç»“æŸ â–²â–²â–² */

        /* â–¼â–¼â–¼ ã€å…¨æ–°ã€‘å¯¼æ¼”å‰ªè¾‘å®¤æ ·å¼ â–¼â–¼â–¼ */
        #ai-response-editor-container {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }
        
        .ai-response-editor-block {
            background-color: #f9f9f9;
            border: 1px solid var(--border-color);
            border-radius: 8px;
            padding: 12px;
        }
        
        .ai-response-editor-block textarea {
            width: 100%;
            min-height: 80px; /* é»˜è®¤ç»™ä¸€ä¸ªæ›´å¤§çš„é«˜åº¦ */
            resize: vertical;
            border: 1px solid #ccc;
            border-radius: 6px;
            padding: 8px;
            font-size: 14px; /* ä½¿ç”¨å°ä¸€ç‚¹çš„å­—ä½“ï¼Œæ–¹ä¾¿æŸ¥çœ‹JSON */
            font-family: monospace; /* ä½¿ç”¨ç­‰å®½å­—ä½“ï¼Œè®©JSONå¯¹é½æ›´ç¾è§‚ */
            box-sizing: border-box;
        }
        
        .ai-response-editor-block .format-helpers {
            margin-top: 8px;
            margin-bottom: 0; /* è¦†ç›–é»˜è®¤çš„ margin-bottom */
        }
        
        .ai-response-editor-block .delete-block-btn {
            float: right;
            margin-top: -5px;
            background: none;
            border: none;
            color: #ff3b30;
            font-size: 20px;
            cursor: pointer;
        }
        
        #phone-screen.dark-mode .ai-response-editor-block {
            background-color: #2c2c2e;
            border-color: #38383a;
        }
        #phone-screen.dark-mode .ai-response-editor-block textarea {
            background-color: #1c1c1e;
            color: #f0f0f0;
            border-color: #4a4a4e;
        }
        /* â–²â–²â–² æ–°CSSç²˜è´´ç»“æŸ â–²â–²â–² */
/* â–¼â–¼â–¼ ã€å…¨æ–° | çº¿ä¸‹æ¨¡å¼å†…å¿ƒç‹¬ç™½æ ·å¼ (å·²ä¿®å¤æ–œä½“)ã€‘ â–¼â–¼â–¼ */
.offline-dialogue {
    /* å¯¹è¯éƒ¨åˆ†å¯ä»¥ä¿æŒé»˜è®¤æ ·å¼ï¼Œæˆ–è€…ç¨ä½œå¼ºè°ƒ */
    font-weight: 500;
}
.offline-description {
    display: block; 
    color: inherit; /* ä¿æŒæ™®é€šæå†™æ–‡å­—é¢œè‰²ä¸å¯¹è¯ä¸€è‡´ */
    font-style: normal; 
    margin-top: 4px; 
    white-space: pre-wrap; 
    line-height: 1.6;
}

/* âœ¨ æ ¸å¿ƒæ–°å¢ï¼šä¸“é—¨ä¸ºå†…å¿ƒç‹¬ç™½ï¼ˆæ–œä½“ï¼‰è®¾ç½®æ ·å¼ */
.offline-description em {
    color: var(--text-secondary); /* å°†é¢œè‰²è®¾ç½®ä¸ºæ¬¡è¦æ–‡å­—çš„æµ…ç°è‰² */
    /* font-style: normal;  <-- å·²åˆ é™¤æ­¤è¡Œï¼Œæ¢å¤æ–œä½“ */
}

#phone-screen.dark-mode .offline-description {
    color: inherit; /* å¤œé—´æ¨¡å¼ä¸‹ä¹Ÿä¿æŒæ™®é€šæå†™æ–‡å­—é¢œè‰²ä¸€è‡´ */
}
/* â–²â–²â–² ä¿®æ”¹ç»“æŸ â–²â–²â–² */
        /* â–¼â–¼â–¼ ã€å…¨æ–°ã€‘å¼•ç”¨è·³è½¬é«˜äº®æ•ˆæœ â–¼â–¼â–¼ */
        
        /* 1. ä¸ºæ¶ˆæ¯æ°”æ³¡çš„å†…å®¹åŒºæ·»åŠ ä¸€ä¸ªå¹³æ»‘çš„èƒŒæ™¯è‰²è¿‡æ¸¡æ•ˆæœ */
        .message-bubble .content {
            transition: background-color 0.5s ease-out;
        }
        
        /* 2. å®šä¹‰é«˜äº®æ—¶çš„èƒŒæ™¯è‰² */
        /*    æˆ‘ä»¬ä½¿ç”¨ !important æ¥ç¡®ä¿å®ƒèƒ½è¦†ç›–æ‰æ‰€æœ‰ä¸»é¢˜çš„é»˜è®¤é¢œè‰² */
        .message-bubble.highlighted .content {
            background-color: rgba(0, 123, 255, 0.2) !important;
        }
        /* â–²â–²â–² æ–°æ ·å¼ç²˜è´´ç»“æŸ â–²â–²â–² */
        /* â–¼â–¼â–¼ ã€å¸ƒå±€ç»ˆæä¿®å¤ã€‘è¯·ç”¨è¿™ä¸€æ•´å—å…¨æ–°çš„CSSï¼Œæ›¿æ¢æ‰æ‚¨æ—§çš„æ‰€æœ‰äº”å­æ£‹ç›¸å…³æ ·å¼ â–¼â–¼â–¼ */
        
        /* â–¼â–¼â–¼ ã€è¾¹æ¡†ç»ˆæä¿®å¤V2ã€‘è¯·ç”¨è¿™ä¸€æ•´å—å…¨æ–°çš„CSSï¼Œæ›¿æ¢æ‰æ‚¨æ—§çš„æ‰€æœ‰äº”å­æ£‹ç›¸å…³æ ·å¼ â–¼â–¼â–¼ */
        
        /* 1. æ£‹ç›˜çš„å¤–éƒ¨å®¹å™¨ (è´Ÿè´£å®šä½å’ŒåŠ¨ç”»çª—å£) */
        #gomoku-overlay {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 350px;
            z-index: 50;
            pointer-events: none; /* è®©ç‚¹å‡»å¯ä»¥ç©¿é€ */
            overflow: hidden;     /* ã€æ ¸å¿ƒã€‘éšè—æ‰æ»‘å‡ºå±å¹•å¤–çš„å†…å®¹ */
            display: none;        /* é»˜è®¤ä¸æ˜¾ç¤ºï¼Œç”±JSæ§åˆ¶ */
        }
        
        /* â–¼â–¼â–¼ ã€é®ç½©ç»ˆæä¿®å¤ã€‘è¯·ç”¨è¿™æ•´å—å…¨æ–°çš„CSSï¼Œæ›¿æ¢æ‰æ‚¨æ—§çš„ #gomoku-content-wrapper æ ·å¼ â–¼â–¼â–¼ */
        
        /* 2. æ£‹ç›˜çš„å†…éƒ¨åŒ…è£…å™¨ (è´Ÿè´£å¤–è§‚å’Œå†…å®¹å¸ƒå±€) */
        #gomoku-content-wrapper {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            /* ã€æ ¸å¿ƒã€‘ç§»é™¤æ‰€æœ‰èƒŒæ™¯å’Œæ•ˆæœï¼Œä½¿å…¶å®Œå…¨é€æ˜ */
            background-color: transparent !important;
            backdrop-filter: none !important;
            box-shadow: none !important;
            /* --- å…¶ä»–å¸ƒå±€æ ·å¼ä¿æŒä¸å˜ --- */
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            gap: 15px;
            padding: 15px 0;
            box-sizing: border-box;
            transition: transform 0.3s ease-out;
            transform: translateY(-100%);
            pointer-events: auto;
        }
        
        /* â–²â–²â–² æ›¿æ¢ç»“æŸ â–²â–²â–² */
        
        #phone-screen.dark-mode #gomoku-content-wrapper {
            background-color: rgba(28, 28, 30, 0.9);
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.2);
        }
        
        /* å½“æ£‹ç›˜å¯è§æ—¶ï¼Œå°†å†…éƒ¨åŒ…è£…å™¨æ»‘å…¥è§†å›¾ */
        #gomoku-overlay.visible #gomoku-content-wrapper {
            transform: translateY(0);
        }
        
        /* 3. èŠå¤©æ¶ˆæ¯åŒº (ä¿æŒä¸å˜) */
        #chat-messages {
            transition: padding-top 0.3s ease-out;
        }
        
        /* 4. æ£‹ç›˜ç”»å¸ƒå’Œæ§åˆ¶æŒ‰é’® (ä¿æŒä¸å˜) */
        #gomoku-board {
            background-color: #e4b591;
            border-radius: 8px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.15);
            cursor: pointer;
        }
        
        #gomoku-controls {
            width: 100%;
            text-align: center;
            flex-shrink: 0;
        }
        
        #close-gomoku-btn {
            padding: 6px 15px;
            border-radius: 15px;
            border: 1px solid var(--text-secondary);
            background-color: rgba(255,255,255,0.5);
            color: var(--text-secondary);
            cursor: pointer;
            font-size: 13px;
        }
        #phone-screen.dark-mode #close-gomoku-btn {
            background-color: rgba(0,0,0,0.2);
            border-color: var(--text-secondary);
        }
        
        /* â–²â–²â–² æ›¿æ¢ç»“æŸ â–²â–²â–² */
        /* â–¼â–¼â–¼ ã€æ£‹ç›˜äº¤äº’ç»ˆæä¿®å¤ã€‘è¯·å°†è¿™æ•´å—CSSç²˜è´´åˆ° <style> çš„æœ€æœ«å°¾ â–¼â–¼â–¼ */
        
        /* 
          ç¬¬ä¸€æ­¥ï¼šã€æ ¸å¿ƒã€‘è®©æ£‹ç›˜çš„å·¨å¤§é€æ˜å®¹å™¨â€œç©¿é€â€æ‰€æœ‰é¼ æ ‡/è§¦æ‘¸ç‚¹å‡»ã€‚
          è¿™æ ·æ‚¨å°±å¯ä»¥ç‚¹å‡»åˆ°å®ƒä¸‹æ–¹çš„èŠå¤©æ¶ˆæ¯äº†ã€‚
        */
        #gomoku-overlay {
            pointer-events: none;
        }
        
        /* 
          ç¬¬äºŒæ­¥ï¼šç°åœ¨ï¼Œæˆ‘ä»¬å¿…é¡»â€œæ¢å¤â€æ£‹ç›˜å’ŒæŒ‰é’®æœ¬èº«çš„å¯ç‚¹å‡»æ€§ã€‚
          æˆ‘ä»¬å°†å®ƒä»¬è®¾ç½®ä¸º autoï¼Œè¿™æ ·å®ƒä»¬å°±åˆèƒ½å“åº”æ‚¨çš„æ“ä½œäº†ã€‚
        */
        #gomoku-board,
        #gomoku-controls {
            pointer-events: auto;
        }
        
        /* â–¼â–¼â–¼ ã€æ£€æŸ¥å¹¶æ·»åŠ ã€‘å¡ç‰‡/ç‰¹æ®Šå†…å®¹æ°”æ³¡å¸ƒå±€è§„åˆ™ â–¼â–¼â–¼ */
        .message-bubble.is-card-like {
            flex: initial; /* è¦†ç›–é€šç”¨çš„ flex: 1ï¼Œè®©æ°”æ³¡æœ¬èº«ä¸å†æ‹‰ä¼¸ */
            min-width: auto; /* å…è®¸å…¶è‡ªç”±æ”¶ç¼© */
        }
        .message-bubble.is-card-like .content {
            flex: initial; 
            padding: 0;
            background: transparent;
        }
       
        /* 1. å½»åº•éšè—æ—§çš„å¿ƒç‡æ˜¾ç¤ºå™¨ï¼Œä¸å†éœ€è¦å®ƒäº† */
        #ai-heart-rate-display {
            display: none !important;
        }
        
        /* 2. ä¸ºæ­Œè¯æ åº”ç”¨æ–°çš„æ ·å¼ï¼Œä½¿å…¶å¤–è§‚å’Œå®šä½ä¸åŸå¿ƒç‡æ˜¾ç¤ºå™¨å®Œå…¨ä¸€è‡´ */
        /* â–¼â–¼â–¼ ã€å…¨æ–°ã€‘æ­Œè¯æ ä½ç½®æ§åˆ¶æ ·å¼ â–¼â–¼â–¼ */
        #global-lyrics-bar {
            /* æ ¸å¿ƒå®šä½ï¼šç»å¯¹å®šä½ */
            position: absolute;
            z-index: 20;
        
            /* å¤–è§‚æ ·å¼ (ä¿æŒä¸å˜) */
            display: flex;
            align-items: center;
            font-size: 13px;
            font-weight: 500;
            color: var(--text-secondary);
            background-color: rgba(0, 0, 0, 0.05);
            padding: 4px 12px;
            border-radius: 12px;
            
            /* åŠ¨ç”»æ•ˆæœ (ä¿æŒä¸å˜) */
            opacity: 0;
            visibility: hidden;
            /* ã€æ ¸å¿ƒä¿®æ”¹ã€‘ä¸ºä½ç½®å±æ€§æ·»åŠ å¹³æ»‘è¿‡æ¸¡ */
            transition: opacity 0.4s ease, visibility 0.4s ease, top 0.3s ease, bottom 0.3s ease, left 0.3s ease, right 0.3s ease, transform 0.3s ease;
        
            /* é™„åŠ æ ·å¼ (ä¿æŒä¸å˜) */
            pointer-events: none;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
            max-width: 65%;
        }
        
        #phone-screen.dark-mode #global-lyrics-bar {
            color: #a0a0a0;
            background-color: rgba(255, 255, 255, 0.1);
        }
        
        /* 3. å½“JSæ·»åŠ .visibleç±»æ—¶ï¼Œæ˜¾ç¤ºæ­Œè¯æ  */
        #global-lyrics-bar.visible {
            opacity: 1;
            visibility: visible;
        }
        
        /* 4. é€‚é…å¤œé—´æ¨¡å¼ */
        #phone-screen.dark-mode #global-lyrics-bar {
            color: #a0a0a0;
            background-color: rgba(255, 255, 255, 0.1);
        }
        
        /* â–²â–²â–² æ–°æ ·å¼ç²˜è´´ç»“æŸ â–²â–²â–² */
        /* â–¼â–¼â–¼ ã€å…¨æ–°ã€‘ä¸–ç•Œä¹¦é¡µé¢ç¾åŒ–æ ·å¼ (V2 - é¡µç­¾åˆ‡æ¢ç‰ˆ) â–¼â–¼â–¼ */
        
        /* 1. ç¡®ä¿ä¸–ç•Œä¹¦é¡µé¢èƒŒæ™¯è‰²ç»Ÿä¸€ */
        #world-book-screen {
            background-color: #f0f2f5;
            display: flex; /* æ”¹ä¸ºflexå¸ƒå±€ï¼Œè®©å¤´éƒ¨ã€é¡µç­¾ã€å†…å®¹åŒºå‚ç›´æ’åˆ— */
            flex-direction: column;
        }
        
        #phone-screen.dark-mode #world-book-screen {
            background-color: #000000;
        }
        
        /* 2. é¡µç­¾æ æ ·å¼ */
        #world-book-tabs {
            display: flex;
            overflow-x: auto; /* å¦‚æœåˆ†ç±»å¤ªå¤šï¼Œå¯ä»¥æ¨ªå‘æ»šåŠ¨ */
            padding: 10px 15px 0 15px;
            flex-shrink: 0; /* é˜²æ­¢è¢«å‹ç¼© */
            border-bottom: 1px solid var(--border-color);
            background-color: var(--secondary-bg);
        
            /* éšè—æ»šåŠ¨æ¡ */
            -ms-overflow-style: none;  /* IE and Edge */
            scrollbar-width: none;  /* Firefox */
        }
        #world-book-tabs::-webkit-scrollbar {
            display: none; /* Chrome, Safari, and Opera */
        }
        
        
        /* 3. å•ä¸ªé¡µç­¾æŒ‰é’®æ ·å¼ */
        .world-book-tab {
            padding: 8px 16px;
            cursor: pointer;
            border: none;
            background-color: transparent;
            font-size: 15px;
            font-weight: 500;
            color: var(--text-secondary);
            border-bottom: 2px solid transparent;
            margin-bottom: -1px; /* è®©åº•è¾¹æ¡†ä¸å®¹å™¨è¾¹æ¡†é‡åˆ */
            transition: all 0.2s ease-in-out;
            white-space: nowrap; /* é˜²æ­¢åˆ†ç±»åæ¢è¡Œ */
        }
        
        /* 4. æ¿€æ´»çš„é¡µç­¾æ ·å¼ */
        .world-book-tab.active {
            color: var(--accent-color);
            border-bottom-color: var(--accent-color);
            font-weight: 600;
        }
        #phone-screen.dark-mode .world-book-tab.active {
            color: #ffffff;
        }
        
        
        /* 5. å†…å®¹åŒºæ€»å®¹å™¨ï¼Œè´Ÿè´£æ»šåŠ¨ */
        #world-book-content-container {
            flex-grow: 1;
            overflow-y: auto;
        }
        
        /* 6. å•ä¸ªåˆ†ç±»çš„å†…å®¹é¢æ¿ï¼Œä½¿ç”¨Gridå¸ƒå±€ç¾åŒ– */
        .world-book-category-pane {
            display: none; /* é»˜è®¤éšè— */
            grid-template-columns: repeat(2, 1fr); /* æ¯è¡Œæ˜¾ç¤º2æœ¬ä¹¦ */
            gap: 15px;
            padding: 15px;
        }
        
        /* 7. æ¿€æ´»çš„å†…å®¹é¢æ¿ */
        .world-book-category-pane.active {
            display: grid;
        }
        

/* 8. ç¾åŒ–åçš„ä¸–ç•Œä¹¦å¡ç‰‡æ ·å¼ (æœ€ç»ˆä¿®å¤ç‰ˆ) */
.world-book-card {
    background-color: var(--secondary-bg);
    border-radius: 12px;
    padding: 15px;
    box-shadow: 0 2px 8px rgba(0,0,0,0.08);
    cursor: pointer;
    transition: transform 0.2s ease, box-shadow 0.2s ease;
    display: flex;
    flex-direction: column;
    gap: 8px;
    
    /* æ ¸å¿ƒä¿®å¤ 1: å…è®¸å¡ç‰‡åœ¨ç½‘æ ¼å¸ƒå±€ä¸­æ­£ç¡®åœ°æ”¶ç¼©ï¼Œè¿™æ˜¯è§£å†³é—®é¢˜çš„å…³é”® */
    min-width: 0;

    /* æ ¸å¿ƒä¿®å¤ 2: å¼ºåˆ¶å¯¹æ‰€æœ‰å†…å®¹ï¼ˆåŒ…æ‹¬ä¸­è‹±æ–‡ï¼‰è¿›è¡Œæ¢è¡Œï¼Œä½œä¸ºåŒé‡ä¿é™© */
    word-break: break-all;
}
        
        .world-book-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 6px 12px rgba(0,0,0,0.12);
        }
        #phone-screen.dark-mode .world-book-card {
            box-shadow: 0 2px 8px rgba(255,255,255,0.05);
        }
        
        .world-book-card .card-title {
            font-weight: 600;
            font-size: 15px;
            color: var(--text-primary);
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis; /* é˜²æ­¢é•¿æ ‡é¢˜æº¢å‡º */
        }
        
        .world-book-card .card-content-preview {
            font-size: 13px;
            color: var(--text-secondary);
            line-height: 1.5;
            /* å¤šè¡Œçœç•¥æ•ˆæœ */
            display: -webkit-box;
            -webkit-line-clamp: 3; /* æœ€å¤šæ˜¾ç¤º3è¡Œ */
            -webkit-box-orient: vertical;
            overflow: hidden;
        }
        /* â–²â–²â–² æ–°æ ·å¼ç²˜è´´ç»“æŸ â–²â–²â–² */
        /* â–¼â–¼â–¼ ã€å…¨æ–°ã€‘æ¸²æŸ“å™¨é¡µé¢ç¾åŒ–æ ·å¼ (V2 - é¡µç­¾åˆ‡æ¢ç‰ˆ) â–¼â–¼â–¼ */
        
        /* 1. ç¡®ä¿æ¸²æŸ“å™¨é¡µé¢èƒŒæ™¯è‰²ç»Ÿä¸€ */
        #rendering-rules-screen {
            background-color: #f0f2f5;
            display: flex; /* æ”¹ä¸ºflexå¸ƒå±€ï¼Œè®©å…ƒç´ å‚ç›´æ’åˆ— */
            flex-direction: column;
        }
        
        #phone-screen.dark-mode #rendering-rules-screen {
            background-color: #000000;
        }
        
        /* 2. é¡µç­¾æ æ ·å¼ (ä»¿ä¸–ç•Œä¹¦) */
        #rules-tabs {
            display: flex;
            overflow-x: auto;
            padding: 10px 15px 0 15px;
            flex-shrink: 0;
            border-bottom: 1px solid var(--border-color);
            background-color: var(--secondary-bg);
            -ms-overflow-style: none;
            scrollbar-width: none;
        }
        #rules-tabs::-webkit-scrollbar {
            display: none;
        }
        
        /* 3. å•ä¸ªé¡µç­¾æŒ‰é’®æ ·å¼ */
        .rules-tab {
            padding: 8px 16px;
            cursor: pointer;
            border: none;
            background-color: transparent;
            font-size: 15px;
            font-weight: 500;
            color: var(--text-secondary);
            border-bottom: 2px solid transparent;
            margin-bottom: -1px;
            transition: all 0.2s ease-in-out;
            white-space: nowrap;
        }
        
        /* 4. æ¿€æ´»çš„é¡µç­¾æ ·å¼ */
        .rules-tab.active {
            color: var(--accent-color);
            border-bottom-color: var(--accent-color);
            font-weight: 600;
        }
        #phone-screen.dark-mode .rules-tab.active {
            color: #ffffff;
        }
        
        /* 5. å†…å®¹åŒºæ€»å®¹å™¨ */
        #rules-content-container {
            flex-grow: 1;
            overflow-y: auto;
        }
        
        /* 6. å•ä¸ªåˆ†ç±»çš„å†…å®¹é¢æ¿ (Gridå¸ƒå±€) */
        .rules-category-pane {
            display: none; /* é»˜è®¤éšè— */
            grid-template-columns: repeat(2, 1fr); /* æ¯è¡Œæ˜¾ç¤º2ä¸ª */
            gap: 15px;
            padding: 15px;
        }
        
        .rules-category-pane.active {
            display: grid;
        }
        
        /* 7. ç¾åŒ–åçš„è§„åˆ™å¡ç‰‡æ ·å¼ */
        .rule-card {
            background-color: var(--secondary-bg);
            border-radius: 12px;
            padding: 15px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.08);
            cursor: pointer;
            transition: transform 0.2s ease, box-shadow 0.2s ease;
            display: flex;
            flex-direction: column;
            gap: 8px; /* æ ‡é¢˜å’Œå†…å®¹çš„é—´è· */
            border-left: 5px solid #6c757d; /* é»˜è®¤ç»™ä¸€ä¸ªç°è‰²è¾¹æ¡† */
        }
        .rule-card.enabled {
            border-left-color: #28a745; /* å¯ç”¨çš„è§„åˆ™ç”¨ç»¿è‰²è¾¹æ¡† */
        }
        
        .rule-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 6px 12px rgba(0,0,0,0.12);
        }
        #phone-screen.dark-mode .rule-card {
            box-shadow: 0 2px 8px rgba(255,255,255,0.05);
        }
        
        .rule-card .card-title {
            font-weight: 600;
            font-size: 15px;
            color: var(--text-primary);
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }
        
        .rule-card .card-content-preview {
            font-size: 12px;
            font-family: monospace; /* ä½¿ç”¨ç­‰å®½å­—ä½“ï¼Œæ˜¾ç¤ºæ­£åˆ™æ›´æ¸…æ™° */
            color: var(--text-secondary);
            background-color: #f0f2f5;
            padding: 5px 8px;
            border-radius: 4px;
            word-break: break-all;
        }
        #phone-screen.dark-mode .rule-card .card-content-preview {
            background-color: #2c2c2e;
        }
        
        /* â–²â–²â–² æ–°CSSç²˜è´´ç»“æŸ â–²â–²â–² */

        /* â–¼â–¼â–¼ ã€å…¨æ–°ç¾åŒ–ç‰ˆã€‘é‡æ–°ç”Ÿæˆå›å¤æŒ‰é’®æ ·å¼ â–¼â–¼â–¼ */
        .control-btn.regenerate-btn {
            /* æ ¸å¿ƒä¿®æ”¹ï¼šå°†èƒŒæ™¯è‰²æ”¹ä¸ºä¸å…¶ä»–åŠŸèƒ½æŒ‰é’®ä¸€è‡´çš„åŠé€æ˜ç°è‰² */
            background-color: rgba(255, 255, 255, 0.2);
            background-size: 55%; /* å›¾æ ‡å¤§å°ä¿æŒä¸å˜ */
            /* SVGå›¾æ ‡ä¿æŒä¸å˜ï¼Œä¾ç„¶æ˜¯æˆ‘ä»¬çš„åˆ·æ–°å›¾æ ‡ */
            background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M20 11A8.1 8.1 0 0 0 4.5 9M4 5v4h4"/><path d="M4 13a8.1 8.1 0 0 0 15.5 2m.5 4v-4h-4"/></svg>');
        }
        /* â–²â–²â–² æ–°å¢CSSç»“æŸ â–²â–²â–² */
        /* â–¼â–¼â–¼ ã€å…¨æ–°ã€‘æ¨è¿›å‰§æƒ…æŒ‰é’®æ ·å¼ â–¼â–¼â–¼ */
        .control-btn.propel-btn {
            background-color: rgba(255, 255, 255, 0.2);
            background-size: 55%;
            background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polygon points="13 19 22 12 13 5 13 19"></polygon><polygon points="2 19 11 12 2 5 2 19"></polygon></svg>');
        }
        /* â–²â–²â–² æ–°å¢CSSç»“æŸ â–²â–²â–² */
/* â–¼â–¼â–¼ ã€å…¨æ–°ã€‘è¿™æ˜¯è§£å†³HTMLä»£ç è¢«æ°”æ³¡æ ·å¼â€œå‹ç¼©â€çš„æ ¸å¿ƒCSS â–¼â–¼â–¼ */

/* å½“ä¸€ä¸ªæ¶ˆæ¯æ°”æ³¡è¢«æ ‡è®°ä¸º is-raw-html æ—¶ */
.message-bubble.is-raw-html .content {
    padding: 0 !important; /* å¼ºåˆ¶ç§»é™¤æ‰€æœ‰å†…è¾¹è· */
    background: transparent !important; /* å¼ºåˆ¶èƒŒæ™¯é€æ˜ */
    border: none !important; /* å¼ºåˆ¶ç§»é™¤è¾¹æ¡† */
    box-shadow: none !important; /* å¼ºåˆ¶ç§»é™¤é˜´å½± */
}
/* â–²â–²â–² æ–°å¢CSSç»“æŸ â–²â–²â–² */
/* â–¼â–¼â–¼ ã€å…¨æ–°ã€‘é˜²æ­¢é•¿æŒ‰æ—¶è§¦å‘è“è‰²æ–‡æœ¬é€‰ä¸­ â–¼â–¼â–¼ */

#phone-screen {
    /* æ ¸å¿ƒå±æ€§ï¼Œé€‚ç”¨äºå¤§å¤šæ•°ç°ä»£æµè§ˆå™¨ */
    user-select: none;

    /* å…¼å®¹æ—§ç‰ˆ Safari, iOS Safari, Chrome */
    -webkit-user-select: none;

    /* å…¼å®¹æ—§ç‰ˆ Firefox */
    -moz-user-select: none;

    /* å…¼å®¹ Internet Explorer/Edge */
    -ms-user-select: none;

    /* é˜²æ­¢åœ¨ iOS ä¸Šé•¿æŒ‰é“¾æ¥ã€å›¾ç‰‡æ—¶å¼¹å‡ºèœå• */
    -webkit-touch-callout: none;
}

/* â–²â–²â–² æ–°å¢CSSç»“æŸ â–²â–²â–² */
/* â–¼â–¼â–¼ æ­¥éª¤ 2ï¼šç”¨è¿™æ•´å—æ–°ä»£ç ï¼Œæ›¿æ¢æ‰æ‰€æœ‰æ—§çš„ä¸»å±å¹•å’Œä¸ªäººèµ„æ–™ç›¸å…³CSS â–¼â–¼â–¼ */

/* --- 1. éšè—æ‰€æœ‰æ—§çš„ä¸»å±å¹•å…ƒç´  --- */
#home-screen #clock-container,
#home-screen #app-grid,
#home-screen #home-widgets-container {
    display: none !important;
}

/* --- 2. ã€æœ€ç»ˆä¿®å¤ã€‘é‡æ–°å®šä¹‰ä¸»å±å¹•å¸ƒå±€ --- */

#home-screen {
    background: linear-gradient(135deg, #6DD5FA, #2980B9);
    /* â–¼â–¼â–¼ æ ¸å¿ƒä¿®å¤ï¼šæ·»åŠ ä¸‹é¢è¿™ä¸¤è¡Œ â–¼â–¼â–¼ */
    background-size: cover;
    background-position: center;
    /* â–²â–²â–² ä¿®å¤ç»“æŸ â–²â–²â–² */
    padding: 20px;
    padding-top: calc(20px + env(safe-area-inset-top));
    padding-bottom: calc(20px + env(safe-area-inset-bottom));
    box-sizing: border-box;
    display: flex;
    flex-direction: column;
    justify-content: space-between; 
    align-items: center;
    height: 100%;
}

/* --- æ›¿æ¢è¿™ä¸€æ•´å—ä»£ç  --- */
/* â–¼â–¼â–¼ è¯·ç”¨è¿™æ•´å—æ–°ä»£ç æ›¿æ¢æ—§çš„ #main-content-area æ ·å¼ â–¼â–¼â–¼ */

#main-content-area {
    width: 100%;
    display: flex;
    flex-direction: column;
    /* æ ¸å¿ƒä¿®æ”¹1ï¼šå°†å¡ç‰‡å’Œä¸‹æ–¹å›¾æ ‡çš„é—´è·ä»60pxç¼©å°åˆ°30px */
    gap: 30px; 
    align-items: center;
    /* æ ¸å¿ƒä¿®æ”¹2ï¼šå°†é¡¶éƒ¨çš„å¤–è¾¹è·ä»40pxç¼©å°åˆ°20pxï¼Œç»™å±å¹•é¡¶éƒ¨ç•™å‡ºä¸€ç‚¹å‘¼å¸ç©ºé—´å³å¯ */
    margin-top: 20px; 
}

/* â–²â–²â–² æ›¿æ¢ç»“æŸ â–²â–²â–² */

/* â–¼â–¼â–¼ ã€æœ€ç»ˆè§£å†³æ–¹æ¡ˆã€‘è¯·ç”¨è¿™ä¸€æ•´å—ä»£ç ï¼Œæ›¿æ¢æ‰€æœ‰æ—§çš„ä¸ªäººèµ„æ–™å¡ç‰‡ç›¸å…³CSS â–¼â–¼â–¼ */

/* 1. å¡ç‰‡å¤–å±‚å®¹å™¨ï¼šè¿™æ˜¯æ‰€æœ‰å†…éƒ¨å…ƒç´ å®šä½çš„â€œé”šç‚¹â€ */
#profile-widget {
    position: relative; /* å…³é”®ï¼šè®©å†…éƒ¨çš„å¤´åƒå’Œä¼ªå…ƒç´ å¯ä»¥ç›¸å¯¹äºå®ƒè¿›è¡Œç»å¯¹å®šä½ */
    width: 100%;
    max-width: 380px;
    flex-shrink: 0;
}

/* 2. èƒŒæ™¯å¤´å›¾ï¼šåªç»™é¡¶éƒ¨è®¾ç½®åœ†è§’ */
#profile-banner-img {
    display: block; 
    width: 100%;
    height: 150px;
    object-fit: cover;
    border-radius: 24px 24px 0 0; /* åªç»™é¡¶éƒ¨è®¾ç½®åœ†è§’ */
    position: relative;
    z-index: 1; /* è®©å¤´å›¾åœ¨ä¸‹æ–¹ */
}

/* 3. å¤´åƒå®¹å™¨ï¼šç²¾ç¡®å®šä½ï¼Œä½¿å…¶ä¸­å¿ƒçº¿ä¸å¤´å›¾åº•éƒ¨å¯¹é½ */
#profile-widget .profile-avatar-container {
    position: absolute;
    top: 80px; 
    left: 50%;
    transform: translateX(-50%);
    width: 80px;
    height: 80px;
    border-radius: 50%;
    background-color: white; 
    padding: 4px; 
    box-shadow: 0 4px 12px rgba(0,0,0,0.15);
    z-index: 3; /* å¤´åƒå±‚çº§æœ€é«˜ï¼Œå‹ä½ä¸€åˆ‡ */
}

#profile-avatar-img {
    width: 100%;
    height: 100%;
    border-radius: 50%;
    object-fit: cover;
}

/* 4. ç™½è‰²ä¿¡æ¯å¡ç‰‡ï¼šä½¿ç”¨è´Ÿå¤–è¾¹è·å®ç°æ— ç¼æ‹¼æ¥ */
#profile-widget .profile-info {
    background-color: rgba(255, 255, 255, 0.9);
    border-radius: 24px;
    
    /* --- â˜…â˜…â˜…â˜…â˜… è¿™å°±æ˜¯æœ¬æ¬¡ä¿®å¤çš„æ ¸å¿ƒï¼ â˜…â˜…â˜…â˜…â˜… --- */
    
    /* 1. ä½¿ç”¨è´Ÿå¤–è¾¹è·ï¼Œå°†å¡ç‰‡å‘ä¸Šç§»åŠ¨24pxï¼ˆç­‰äºå…¶åœ†è§’åŠå¾„ï¼‰ */
    margin-top: -24px; 
    
    /* 2. ä¸ºå¤´åƒçš„ä¸‹åŠéƒ¨åˆ†å’Œä¸Šæ–¹çš„è´Ÿè¾¹è·ï¼Œå…±åŒç•™å‡ºç²¾ç¡®çš„ç©ºé—´ */
    /* 40px (å¤´åƒåŠå¾„) + 10px (é¢å¤–é—´è·) + 24px (æŠµæ¶ˆè´Ÿè¾¹è·) = 74px */
    padding-top: 44px; 
    
    /* --- â˜…â˜…â˜…â˜…â˜… ä¿®å¤ç»“æŸ â˜…â˜…â˜…â˜…â˜… --- */
    
    min-height: 120px;
    box-sizing: border-box;
    display: flex;
    flex-direction: column;
    justify-content: center;
    padding-left: 15px;
    padding-right: 15px;
    padding-bottom: 15px;
    text-align: center;
    color: #1c1c1e;
    position: relative;
    z-index: 2; /* è®©ä¿¡æ¯å¡åœ¨å¤´å›¾ä¹‹ä¸Šï¼Œä½†åœ¨å¤´åƒä¹‹ä¸‹ */
}

/* â–²â–²â–² æ›¿æ¢ç»“æŸ â–²â–²â–² */

/* 5. å¼ºåˆ¶ç¦ç”¨ä»»ä½•å¯èƒ½æ®‹ç•™çš„æ—§ä¼ªå…ƒç´ æ ·å¼ */
#profile-widget::before {
    display: none !important;
}

/* (è¿™ä¸ªæ˜¯å¤´åƒå›¾ç‰‡æœ¬èº«çš„æ ·å¼ï¼Œä¿æŒä¸å˜) */
#profile-avatar-img {
    width: 100%;
    height: 100%;
    border-radius: 50%;
    object-fit: cover;
}

/* â–²â–²â–² æ›¿æ¢ç»“æŸ â–²â–²â–² */

/* 5. å¼ºåˆ¶ç¦ç”¨ä»»ä½•å¯èƒ½æ®‹ç•™çš„æ—§ä¼ªå…ƒç´ æ ·å¼ */
#profile-widget::before {
    display: none !important;
}

/* â–²â–²â–² æ›¿æ¢ç»“æŸ â–²â–²â–² */

/* (è¿™ä¸ªæ˜¯å¤´åƒå›¾ç‰‡æœ¬èº«çš„æ ·å¼ï¼Œä¿æŒä¸å˜) */
#profile-avatar-img {
    width: 100%;
    height: 100%;
    border-radius: 50%;
    object-fit: cover;
}

/* â–²â–²â–² æ›¿æ¢ç»“æŸ â–²â–²â–² */



/* (ä»¥ä¸‹ä¸ºä¸ªäººèµ„æ–™å†…éƒ¨æ–‡å­—æ ·å¼ï¼Œä¿æŒä¸å˜) */
#profile-username { font-size: 18px; font-weight: 600; margin: 0 0 2px 0; }
#profile-sub-username { font-size: 13px; color: #8a8a8a; margin: 0 0 10px 0; }
#profile-bio { font-size: 14px; margin: 0 0 12px 0; color: #333; }
#profile-location {
    font-size: 12px; color: #8a8a8a; margin: 0 auto; display: inline-flex;
    align-items: center; gap: 4px; background-color: rgba(0,0,0,0.05);
    padding: 3px 9px; border-radius: 10px;
}

/* --- (ä»è¿™é‡Œå¼€å§‹ï¼Œåé¢çš„æ‰€æœ‰æ ·å¼éƒ½ä¿æŒä¸å˜å³å¯) --- */
#desktop-layout {
    display: grid;
    grid-template-columns: 1fr 1.1fr;
    gap: 20px;
    width: 100%;
    align-items: start;
}
#desktop-widget-column {
    display: flex;
    flex-direction: column;
    gap: 12px;
}
.widget-header {
    font-size: 14px;
    font-weight: 500;
    color: rgba(255, 255, 255, 0.8);
    margin: 0 0 5px 5px;
}
.desktop-widget {
    background-color: rgba(255, 255, 255, 0.2);
    border: 1px solid rgba(255, 255, 255, 0.2);
    border-radius: 18px;
    padding: 12px 15px;
    /* æ ¸å¿ƒä¿®æ”¹ï¼šå°†é¢œè‰²ä» white æ”¹ä¸ºæ¥è¿‘é»‘è‰²çš„æ·±ç°è‰² */
    color: #1f1f1f; 
    font-weight: 500;
    font-size: 13px;
    display: flex;
    align-items: center;
}
/* â–¼â–¼â–¼ ã€å…¨æ–°ã€‘è¿™æ˜¯ç§»é™¤ç¬¬ä¸€ä¸ªå°ç»„ä»¶èƒŒæ™¯æ¡†çš„æ ·å¼ â–¼â–¼â–¼ */

.desktop-widget.text-only {
    background-color: transparent; /* å°†èƒŒæ™¯è‰²è®¾ä¸ºé€æ˜ */
    border: none;                  /* ç§»é™¤è¾¹æ¡† */
    padding: 0;                    /* ç§»é™¤å†…è¾¹è·ï¼Œé¿å…å¤šä½™çš„ç©ºç™½ */
    box-shadow: none;              /* ç¡®ä¿æ²¡æœ‰é˜´å½± */
}

/* â–²â–²â–² æ–°å¢CSSç»“æŸ â–²â–²â–² */
.desktop-widget.icon-left { justify-content: flex-start; gap: 10px; }
/* This is the NEW code */
.desktop-widget.icon-right {
    justify-content: flex-end; /* Pushes both items to the right */
    gap: 10px;                 /* Adds a nice space between the text and the avatar */
}
.desktop-widget img { width: 28px; height: 28px; border-radius: 50%; object-fit: cover; }
.desktop-widget p, .desktop-widget span { margin: 0; }
#desktop-app-container {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 25px;
    align-content: start;
}
#desktop-dock {
    background-color: rgba(255, 255, 255, 0.15);
    border-radius: 20px;
    padding: 15px 25px;
    display: flex;
    justify-content: center;
    gap: 30px;
    width: fit-content;
    flex-shrink: 0;
    /* â–¼â–¼â–¼ æ ¸å¿ƒä¿®æ”¹ â–¼â–¼â–¼ */
    /* æˆ‘ä»¬ä¸ºDockæ å¢åŠ ä¸€ä¸ªåº•éƒ¨å¤–è¾¹è·ï¼Œ
       è¿™ä¸ªè¾¹è·ç”±20pxçš„åŸºç¡€é—´è·å’Œåº•éƒ¨çš„å®‰å…¨è·ç¦»ç»„æˆï¼Œ
       èƒ½å°†å®ƒä»å±å¹•åº•éƒ¨å®Œç¾åœ°æŠ¬èµ·ã€‚ */
    margin-bottom: calc(20px + env(safe-area-inset-bottom));
}
.desktop-app-icon {
    display: flex; flex-direction: column; align-items: center; gap: 8px; cursor: pointer; text-align: center;
}
.icon-bg-desktop {
    width: 55px; height: 55px; border-radius: 14px; background-color: #f0f2f5; justify-content: center; box-shadow: 0 4px 10px rgba(0,0,0,0.1); transition: transform 0.2s ease; overflow: hidden;
}
.icon-bg-desktop img {
    width: 100%; height: 100%; object-fit: cover; border-radius: 0;
}
.desktop-app-icon .label {
    color: #333; font-size: 13px; font-weight: 500;
}
.desktop-app-icon:active .icon-bg-desktop {
    transform: scale(0.9);
}
.editable-text:hover, .editable-image:hover {
    outline: 2px dashed rgba(255, 255, 255, 0.8);
    cursor: pointer;
    opacity: 0.9;
}
/* â–²â–²â–² æ›¿æ¢ç»“æŸ â–²â–²â–² */
/* â–¼â–¼â–¼ ã€å…¨æ–°ã€‘è¿™æ˜¯ä¸ºå°ç»„ä»¶ç¼–è¾‘åŠŸèƒ½æ·»åŠ çš„æ ·å¼ â–¼â–¼â–¼ */

/* ä¸ºå¯ç¼–è¾‘çš„å…ƒç´ æ·»åŠ å¯ç‚¹å‡»çš„å…‰æ ‡å’Œè¿‡æ¸¡æ•ˆæœ */
.editable-text, .editable-image {
    cursor: pointer;
    transition: all 0.2s ease-in-out;
}

/* é¼ æ ‡æ‚¬åœæ—¶ï¼Œæ˜¾ç¤ºä¸€ä¸ªåŠé€æ˜çš„è™šçº¿å¤–æ¡†ï¼Œå¹¶è½»å¾®å˜æš—ï¼Œæä¾›è§†è§‰åé¦ˆ */
.editable-text:hover, .editable-image:hover {
    outline: 2px dashed rgba(255, 255, 255, 0.8);
    opacity: 0.9;
    border-radius: 4px; /* è®©å¤–æ¡†ä¹Ÿæœ‰ä¸€ç‚¹åœ†è§’ */
}

/* â–²â–²â–² æ–°å¢CSSç»“æŸ â–²â–²â–² */

/* â–¼â–¼â–¼ ã€æ–¹æ¡ˆAï¼šä»…èƒŒæ™¯æ¸å˜ï¼Œæ–‡å­—ä¿æŒå®ä½“ã€‘(å¯èƒ½å¯¼è‡´åº•éƒ¨æ–‡å­—å¯è¯»æ€§ä¸‹é™) â–¼â–¼â–¼ */

#profile-widget .profile-info {
    /* 1. å°†å¡ç‰‡æœ¬èº«çš„èƒŒæ™¯è®¾ä¸ºé€æ˜ */
    background: transparent !important;
    /* 2. å»ºç«‹å®šä½ä¸Šä¸‹æ–‡ï¼Œè®©ä¼ªå…ƒç´ å¯ä»¥ç›¸å¯¹äºå®ƒå®šä½ */
    position: relative;
    z-index: 1; /* ç¡®ä¿æ–‡å­—å†…å®¹åœ¨èƒŒæ™¯ä¹‹ä¸Š */
}

#profile-widget .profile-info::before {
    /* 3. åˆ›å»ºä¸€ä¸ªä¼ªå…ƒç´ ä½œä¸ºæ–°çš„èƒŒæ™¯å±‚ */
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    
    /* 4. å°†åŸæœ¬çš„ç™½è‰²èƒŒæ™¯å’Œåœ†è§’åº”ç”¨åˆ°è¿™ä¸ªèƒŒæ™¯å±‚ä¸Š */
    background-color: rgba(255, 255, 255, 0.9);
    border-radius: 24px;
    
    /* 5. ã€æ ¸å¿ƒã€‘åªå¯¹è¿™ä¸ªèƒŒæ™¯å±‚åº”ç”¨æ¸å˜æ¶ˆå¤±æ•ˆæœ */
    mask-image: linear-gradient(to bottom, black 50%, transparent 100%);
    -webkit-mask-image: linear-gradient(to bottom, black 50%, transparent 100%);
    
    /* 6. å°†èƒŒæ™¯å±‚æ”¾åˆ°æ–‡å­—å†…å®¹çš„åé¢ */
    z-index: -1;
}

/* â–²â–²â–² æ–°å¢CSSç»“æŸ â–²â–²â–² */
/* â–¼â–¼â–¼ ã€å…¨æ–°ã€‘èŠå¤©è®¾ç½®é¡µé¢æ ·å¼ â–¼â–¼â–¼ */
#chat-settings-screen {
    /* ç¡®ä¿é¡µé¢æ˜¯ Flex å®¹å™¨ï¼Œè®©å†…å®¹åŒºå¯ä»¥æ­£ç¡®åœ°æ‹‰ä¼¸ */
    display: flex;
    flex-direction: column;
    background-color: #f0f2f5; /* ä¸å…¶ä»–è®¾ç½®é¡µä¿æŒä¸€è‡´çš„èƒŒæ™¯è‰² */
}

#phone-screen.dark-mode #chat-settings-screen {
     background-color: #000000; /* å¤œé—´æ¨¡å¼èƒŒæ™¯ */
}

#chat-settings-screen .form-container {
    flex-grow: 1;      /* æ ¸å¿ƒï¼šè®©å†…å®¹åŒºå æ®æ‰€æœ‰å‰©ä½™ç©ºé—´ */
    overflow-y: auto;  /* æ ¸å¿ƒï¼šç¡®ä¿å†…å®¹è¿‡é•¿æ—¶å¯ä»¥æ»šåŠ¨ */
    padding-top: 100px;  /* ä¸ºæµ®åŠ¨çš„ Header ç•™å‡ºè¶³å¤Ÿçš„é¡¶éƒ¨ç©ºé—´ */
    margin-top: -80px;   /* å°†å†…å®¹åŒºå‘ä¸Šæ‹‰ï¼Œä½¿å…¶å¯ä»¥æ»šåŠ¨åˆ° Header ä¸‹æ–¹ */
}
/* â–²â–²â–² æ–°å¢CSSç»“æŸ â–²â–²â–² */
/* â–¼â–¼â–¼ ã€å…¨æ–°ã€‘BGMæœç´¢ç»“æœå¼¹çª—æ ·å¼ â–¼â–¼â–¼ */

.search-result-item {
    display: flex;
    flex-direction: column;
    padding: 12px 18px;
    border-bottom: 1px solid var(--border-color);
    cursor: pointer;
    transition: background-color 0.2s;
}

.search-result-item:hover {
    background-color: rgba(0, 0, 0, 0.1);
}

#phone-screen.dark-mode .search-result-item:hover {
    background-color: rgba(255, 255, 255, 0.1);
}

.search-result-item .title {
    font-weight: 500;
    font-size: 15px;
    color: var(--text-primary);
}

.search-result-item .artist {
    font-size: 12px;
    color: var(--text-secondary);
    margin-top: 4px;
}

.search-result-item .source {
    font-size: 10px;
    color: var(--accent-color);
    background-color: rgba(0, 123, 255, 0.1);
    padding: 2px 6px;
    border-radius: 4px;
    font-weight: bold;
    margin-left: 8px;
}
/* â–²â–²â–² æ–°å¢CSSç»“æŸ â–²â–²â–² */
/* â–¼â–¼â–¼ ã€å…¨æ–°ã€‘éŸ³ä¹æ’­æ”¾å™¨ä¸“è¾‘å°é¢æ ·å¼ â–¼â–¼â–¼ */
#music-player-cover {
    width: 180px;
    height: 180px;
    border-radius: 15px;
    object-fit: cover;
    box-shadow: 0 8px 25px rgba(0,0,0,0.2);
    margin-bottom: 25px; /* åœ¨å°é¢å’Œæ ‡é¢˜ä¹‹é—´å¢åŠ é—´è· */
    transition: opacity 0.5s ease-in-out; /* è®©å›¾ç‰‡åˆ‡æ¢æ—¶æœ‰æ·¡å…¥æ·¡å‡ºæ•ˆæœ */
}
/* â–²â–²â–² æ–°å¢CSSç»“æŸ â–²â–²â–² */
/* â–¼â–¼â–¼ ã€å…¨æ–°ã€‘ä»¿ç½‘æ˜“äº‘å”±ç‰‡/æ­Œè¯åˆ‡æ¢æ ·å¼ â–¼â–¼â–¼ */

/* 1. åˆ‡æ¢çš„æ€»å®¹å™¨ï¼Œè´Ÿè´£å®šä½å’Œå¤§å° */
#music-visual-container {
    position: relative;
    width: 220px;
    height: 220px;
    margin-bottom: 25px;
    cursor: pointer;
}

/* 2. å”±ç‰‡å’Œæ­Œè¯è§†å›¾çš„é€šç”¨æ ·å¼ï¼Œè®©å®ƒä»¬é‡å åœ¨ä¸€èµ· */
#vinyl-view, #inline-lyrics-view {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    display: flex;
    justify-content: center;
    align-items: center;
    /* æ ¸å¿ƒï¼šä¸ºåˆ‡æ¢æ•ˆæœæ·»åŠ å¹³æ»‘çš„è¿‡æ¸¡åŠ¨ç”» */
    transition: opacity 0.5s ease, transform 0.5s ease;
}

/* 3. é»‘èƒ¶å”±ç‰‡è§†å›¾çš„ä¸“å±æ ·å¼ */
#vinyl-view {
    background-color: #222;
    border-radius: 50%;
    padding: 18px;
    box-shadow: 0 8px 25px rgba(0,0,0,0.3), 
                inset 0 0 0 2px rgba(255, 255, 255, 0.05);
    background-image: repeating-radial-gradient(circle, #333, #333 1px, #222 1px, #222 2px);
    box-sizing: border-box;
}
#vinyl-view #music-player-cover {
    width: 100%;
    height: 100%;
    border-radius: 50%;
    object-fit: cover;
    box-shadow: 0 0 10px rgba(0,0,0,0.5);
    margin: 0; /* ç§»é™¤æ—§çš„å¤–è¾¹è· */
}

/* 4. å†…è”æ­Œè¯è§†å›¾çš„ä¸“å±æ ·å¼ */
#inline-lyrics-view {
    /* é»˜è®¤çŠ¶æ€ï¼šå®Œå…¨é€æ˜ï¼Œè½»å¾®æ”¾å¤§ï¼Œä¸”ä¸å¯ç‚¹å‡» */
    opacity: 0;
    transform: scale(1.1);
    pointer-events: none;
    padding: 10px;
    box-sizing: border-box;
}

/* 5. ã€æ ¸å¿ƒã€‘åˆ‡æ¢é€»è¾‘ */
/* å½“å®¹å™¨æ‹¥æœ‰ .lyrics-active ç±»æ—¶... */
#music-visual-container.lyrics-active #vinyl-view {
    /* ...å”±ç‰‡è§†å›¾æ¶ˆå¤± */
    opacity: 0;
    transform: scale(0.9);
}
#music-visual-container.lyrics-active #inline-lyrics-view {
    /* ...æ­Œè¯è§†å›¾å‡ºç° */
    opacity: 1;
    transform: scale(1);
    pointer-events: auto;
}

/* 6. æ­Œè¯å®¹å™¨çš„æ ·å¼ (ä¸ä¹‹å‰ç±»ä¼¼ï¼Œä½†æœ‰å¾®è°ƒ) */
#inline-lyrics-view #music-lyrics-container {
    width: 100%;
    height: 100%;
}
/* â–²â–²â–² æ–°å¢CSSç»“æŸ â–²â–²â–² */
/* â–¼â–¼â–¼ ã€å…¨æ–°ã€‘é¡¶éƒ¨æ­Œæ›²ä¿¡æ¯åŒºåŸŸæ ·å¼ â–¼â–¼â–¼ */

/* 1. æ–°çš„é¡¶éƒ¨ä¿¡æ¯å®¹å™¨ */
#music-info-top {
    text-align: center; /* è®©æ‰€æœ‰æ–‡å­—å±…ä¸­ */
    flex-shrink: 0;
    margin-bottom: 20px; /* åœ¨ä¿¡æ¯å’Œå”±ç‰‡ä¹‹é—´å¢åŠ ä¸€äº›é—´è· */
}

/* 2. ç§»é™¤æ—§çš„ã€å¤šä½™çš„è¾¹è·ï¼Œé¿å…åŒé‡é—´è· */
#music-player-song-title,
#music-player-artist,
#music-time-counter {
    margin-bottom: 5px; /* ç»Ÿä¸€è®¾ç½®ä¸€ä¸ªè¾ƒå°çš„è¡Œé—´è· */
}

/* 3. è°ƒæ•´å”±ç‰‡å®¹å™¨çš„å¤–è¾¹è· */
#music-visual-container {
    margin-bottom: 15px; /* é€‚å½“å‡å°å”±ç‰‡å’Œè¿›åº¦æ¡çš„è·ç¦» */
}

/* â–²â–²â–² æ–°å¢CSSç»“æŸ â–²â–²â–² */
/* â–¼â–¼â–¼ ã€å…¨æ–°ã€‘é»‘èƒ¶å”±ç‰‡æ—‹è½¬åŠ¨ç”» â–¼â–¼â–¼ */

/* 1. å®šä¹‰ä¸€ä¸ªåä¸º "spin-vinyl" çš„æ—‹è½¬åŠ¨ç”» */
@keyframes spin-vinyl {
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
}

/* 2. åˆ›å»ºä¸€ä¸ª .spinning ç±»ï¼Œåº”ç”¨è¿™ä¸ªåŠ¨ç”» */
/*    æˆ‘ä»¬å¸Œæœ›å®ƒæ— é™ã€åŒ€é€Ÿåœ°æ—‹è½¬ */
#vinyl-view.spinning {
  animation: spin-vinyl 12s linear infinite;
}
/* â–²â–²â–² æ–°å¢CSSç»“æŸ â–²â–²â–² */
/* â–¼â–¼â–¼ ã€å…¨æ–°ã€‘å•è¡Œæ­Œè¯æ˜¾ç¤ºæ ·å¼ â–¼â–¼â–¼ */

#single-lyric-display {
    /* 1. å°ºå¯¸ä¸å®šä½ */
    height: 40px;          /* ç»™ä¸€ä¸ªå›ºå®šçš„é«˜åº¦ï¼Œé˜²æ­¢æ–‡å­—æ¢è¡Œæ—¶å¸ƒå±€è·³åŠ¨ */
    line-height: 40px;     /* å‚ç›´å±…ä¸­ */
    width: 100%;           /* å®½åº¦æ’‘æ»¡ */
    margin-top: 15px;      /* å’Œä¸Šæ–¹çš„å”±ç‰‡æ‹‰å¼€ä¸€äº›è·ç¦» */
    
    /* 2. æ–‡å­—å¤–è§‚ */
    text-align: center;    /* æ–‡å­—å±…ä¸­ */
    font-size: 14px;       /* å­—ä½“å¤§å° */
    color: #333;           /* å­—ä½“é¢œè‰² */
    font-weight: 500;      /* å­—ä½“ç¨å¾®åŠ ç²—ä¸€ç‚¹ */

    /* 3. æ•ˆæœä¸åŠ¨ç”» */
    transition: opacity 0.3s ease; /* è®©æ–‡å­—åˆ‡æ¢æ—¶æœ‰æ·¡å…¥æ·¡å‡ºæ•ˆæœ */
    white-space: nowrap;           /* å¼ºåˆ¶ä¸æ¢è¡Œ */
    overflow: hidden;              /* è¶…å‡ºéƒ¨åˆ†éšè— */
    text-overflow: ellipsis;       /* è¶…å‡ºéƒ¨åˆ†æ˜¾ç¤ºçœç•¥å· */
}

/* â–²â–²â–² æ–°å¢CSSç»“æŸ â–²â–²â–² */
/* â–¼â–¼â–¼ ã€å…¨æ–°ã€‘åˆ‡æ¢åˆ°å…¨å±æ­Œè¯æ—¶ï¼Œéšè—å•è¡Œæ­Œè¯é¢„è§ˆ â–¼â–¼â–¼ */

#music-visual-container.lyrics-active + #single-lyric-display {
    /* æ ¸å¿ƒï¼šä½¿ç”¨ display: none; å°†å…¶å½»åº•éšè—ï¼Œä¸å ç©ºé—´ */
    display: none;
}

/* â–²â–²â–² æ–°å¢CSSç»“æŸ â–²â–²â–² */
/* 1. å¼¹çª—èƒŒæ™¯ */
#character-profile-modal {
    background-color: rgba(0, 0, 0, 0.3);
    backdrop-filter: blur(8px);
    -webkit-backdrop-filter: blur(8px);
}

/* 2. å¡ç‰‡ä¸»ä½“å†…å®¹åŒº */
.character-profile-content {
    width: 320px;
    height: 75vh;
    max-height: 580px;
    background-color: #f0f2f5;
    border-radius: 20px;
    box-shadow: 0 8px 30px rgba(0,0,0,0.12);
    display: flex;
    flex-direction: column;
    position: relative;
    font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
     overflow: visible; /* <--- CHANGE TO THIS */
    /* ã€æ ¸å¿ƒä¿®æ”¹1ã€‘å¢åŠ é¡¶éƒ¨çš„å†…è¾¹è·ï¼Œè®©å¤´éƒ¨ä¿¡æ¯æ›´èˆ’å±• */
    padding-top: 40px; 
}

/* 3. å³ä¸Šè§’â€œæŸ¥çœ‹å†å²â€å›¾æ ‡æŒ‰é’® (ä¿æŒä¸å˜) */
#profile-history-icon-btn {
    position: absolute;
    top: 20px;
    right: 20px;
    width: 36px;
    height: 36px;
    background: none;
    border: none;
    cursor: pointer;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: background-color 0.2s;
    padding: 0;
    z-index: 10;
}
#profile-history-icon-btn:hover { background-color: rgba(0,0,0,0.05); }
#profile-history-icon-btn svg { width: 20px; height: 20px; stroke: #b0b0b0; stroke-width: 2; }

/* 4. ä¸»èµ„æ–™é¡µä¸å†å²è®°å½•é¡µçš„å®¹å™¨ */
#profile-main-content, #profile-thoughts-history-view {
    display: flex;
    flex-direction: column;
    width: 100%;
    height: 100%;
    box-sizing: border-box;
}

/* 5. ä¸»èµ„æ–™é¡µç‹¬æœ‰çš„æ ·å¼ */
#profile-main-content {
    padding: 0 25px 25px 25px; /* ç§»é™¤äº†é¡¶éƒ¨paddingï¼Œå› ä¸ºå®ƒå·²åœ¨çˆ¶å…ƒç´ ä¸­å®šä¹‰ */
    /* ã€æ ¸å¿ƒä¿®æ”¹2ã€‘æ˜¾è‘—å¢åŠ å¡ç‰‡ä¹‹é—´çš„å‚ç›´é—´è·ï¼Œè§£å†³â€œæŒ¤â€çš„é—®é¢˜ */
    gap: 20px; 
    flex-grow: 1;
    overflow-y: auto;
}

/* 6. å¤´éƒ¨ä¿¡æ¯åŒº */
.profile-header {
    display: flex;
    align-items: center;
    gap: 15px;
    flex-shrink: 0;
    /* ã€æ ¸å¿ƒä¿®æ”¹3ã€‘ä¸ºå¤´éƒ¨ä¸‹æ–¹å¢åŠ æ˜ç¡®çš„è¾¹è· */
    margin-bottom: 10px; 
}
#profile-avatar { width: 60px; height: 60px; border-radius: 12px; object-fit: cover; }
.profile-info { display: flex; flex-direction: column; }
#profile-name { font-size: 20px; font-weight: 600; color: #1f1f1f; }
#profile-id { font-size: 14px; color: #8a8a8a; }
        
/* â–¼â–¼â–¼ ã€å…¨æ–°V2ç‰ˆã€‘å¿ƒå£°ä¸æ•£è®°å¡ç‰‡æ ·å¼ â–¼â–¼â–¼ */

/* 1. å¡ç‰‡é€šç”¨å®¹å™¨æ ·å¼ */
.profile-section {
    background-color: #ffffff; /* å¹²å‡€çš„ç™½è‰²èƒŒæ™¯ */
    border-radius: 16px;
    padding: 20px;
    box-shadow: 0 4px 12px rgba(0,0,0,0.06); /* æŸ”å’Œçš„å¡ç‰‡é˜´å½± */
    display: flex;
    flex-direction: column;
    gap: 12px; /* å¤´éƒ¨å’Œå†…å®¹åŒºçš„é—´è· */
    flex-shrink: 0;
}

/* 2. å¡ç‰‡å¤´éƒ¨å®¹å™¨ */
.profile-section-header {
    display: flex;
    align-items: center;
    gap: 10px; /* å›¾æ ‡å’Œæ–‡å­—çš„é—´è· */
    padding-bottom: 12px;
    border-bottom: 1px solid #f0f0f0; /* ä¸€æ¡ç²¾è‡´çš„åˆ†å‰²çº¿ */
}

/* 3. å¡ç‰‡å¤´éƒ¨å›¾æ ‡æ ·å¼ */
.profile-section-icon {
    font-size: 20px;
    opacity: 0.5;
}

/* 4. å¡ç‰‡å¤´éƒ¨æ ‡é¢˜æ–‡å­— ("å¿ƒå£°", "æ•£è®°") */
.profile-section label {
    font-size: 15px;
    font-weight: 600;
    color: #555; /* æ¯”ä¹‹å‰æ›´æ·±çš„é¢œè‰²ï¼Œæ›´æœ‰è´¨æ„Ÿ */
    margin: 0; /* ç§»é™¤æ—§çš„è¾¹è· */
}

/* 5. å¡ç‰‡å†…å®¹åŒºæ–‡å­— (ä¿æŒä¸å˜) */
.profile-section p {
    font-size: 15px;
    color: #333;
    line-height: 1.7;
    margin: 0;
    white-space: pre-wrap;
}

/* â–²â–²â–² æ–°æ ·å¼ç²˜è´´ç»“æŸ â–²â–²â–² */
        
/* 10. å†å²è®°å½•é¡µé¢ç‰¹å®šæ ·å¼ (ä¿æŒä¸å˜) */
#profile-thoughts-history-view { display: none; padding: 0 25px 25px 25px; }
#profile-thoughts-history-view .profile-header { justify-content: space-between; padding-bottom: 15px; }
#profile-thoughts-history-view .profile-header span { font-size: 18px; font-weight: 600; }
#history-back-btn { width: 36px; height: 36px; background: none; border: none; cursor: pointer; border-radius: 50%; display: flex; align-items: center; justify-content: center; transition: background-color 0.2s; padding: 0; }
#history-back-btn:hover { background-color: rgba(0,0,0,0.05); }
#history-back-btn svg { width: 22px; height: 22px; stroke: #a0a0a0; stroke-width: 2.5; }

/* 11. å†å²è®°å½•åˆ—è¡¨ (ä¿æŒä¸å˜) */
#thoughts-history-list {
    flex-grow: 1;
    overflow-y: auto;
    padding-right: 5px;
    margin-right: -10px;
    display: flex;
    flex-direction: column;
    gap: 15px;
}
.thought-card { background-color: #ffffff; border-radius: 16px; padding: 15px 20px; border: 1px solid #eee; }
.thought-header { font-size: 12px; color: #b0b0b0; margin-bottom: 12px; padding-bottom: 8px; border-bottom: 1px solid #f0f0f0; }
.thought-content .label { display: flex; align-items: center; gap: 6px; font-weight: 600; color: #a0a0a0; font-size: 13px; margin-bottom: 6px; }
.thought-content .label svg { width: 16px; height: 16px; }
.thought-content .text { font-size: 14px; color: #555; line-height: 1.7; white-space: pre-wrap; padding-left: 22px; }
.thought-content .jottings { margin-top: 15px; }

/* 12. éšè—æ»šåŠ¨æ¡ (ä¿æŒä¸å˜) */
#profile-main-content::-webkit-scrollbar,
#thoughts-history-list::-webkit-scrollbar { display: none; }
#profile-main-content, #thoughts-history-list { -ms-overflow-style: none; scrollbar-width: none; }
/* â–¼â–¼â–¼ ã€æœ€ç»ˆç‰ˆã€‘å¿ƒå£°é¡µé¢ä¸å†å²è®°å½•ç¾åŒ–æ ·å¼ â–¼â–¼â–¼ */

/* 1. å°†è§’è‰²è¯¦æƒ…é¡µï¼ˆå¿ƒå£°é¡µé¢ï¼‰çš„èƒŒæ™¯ä¿®æ”¹ä¸ºçº¯ç™½è‰² */
.character-profile-content {
    background-color: #ffffff !important;
}

/* 2. ä»…éšè—â€œæ•£è®°â€æ ‡ç­¾ (åœ¨ä¸»é¡µå’Œå†å²è®°å½•ä¸­éƒ½ç”Ÿæ•ˆ) */
#character-profile-modal .jottings .label {
    display: none;
}

/* 3. ã€å¯¹é½ä¿®æ­£ã€‘ç§»é™¤å¿ƒå£°å’Œæ•£è®°å†…å®¹çš„å·¦è¾¹è·ï¼Œè®©å®ƒä»¬ä¸æ ‡é¢˜å¯¹é½ */
#character-profile-modal .thought-content .text {
    padding-left: 0;
}

/* â–²â–²â–² æ ·å¼ç»“æŸ â–²â–²â–² */
/* â–¼â–¼â–¼ æ­¥éª¤ 2ï¼šå°†è¿™æ®µå…¨æ–°çš„CSSä»£ç ï¼Œç²˜è´´åˆ° <style> æ ‡ç­¾çš„æœ€æœ«å°¾ â–¼â–¼â–¼ */

/* ä¸ºåŠ¨æ€é¡µé¢çš„â€œä¸‰ç‚¹â€æŒ‰é’®è®¾ç½®ä¸“å±æ ·å¼ */
#qzone-more-actions-btn {
    font-size: 24px;      /* å¢å¤§å­—ä½“ï¼Œè®©â€œâ€¦â€æ›´æ¸…æ™° */
    font-weight: bold;    /* åŠ ç²— */
    padding: 0 10px;      /* å¢åŠ æ°´å¹³å¯ç‚¹å‡»åŒºåŸŸ */
    border-radius: 50%;   /* æ·»åŠ ä¸€ä¸ªåœ†å½¢èƒŒæ™¯ï¼ˆæ‚¬åœæ—¶å¯è§ï¼‰ */
    line-height: 1;       /* ç¡®ä¿å‚ç›´å±…ä¸­ */
    position: relative;
    top: -2px;            /* ä½ç½®å¾®è°ƒ */
    transition: background-color 0.2s;
}
#qzone-more-actions-btn:hover {
    background-color: rgba(0,0,0,0.05); /* é¼ æ ‡æ‚¬åœæ—¶æ˜¾ç¤ºä¸€ä¸ªæ·¡æ·¡çš„ç°è‰²åœ†å½¢èƒŒæ™¯ */
}

/* å¤œé—´æ¨¡å¼ä¸‹çš„æ‚¬åœæ•ˆæœ */
#phone-screen.dark-mode #qzone-more-actions-btn:hover {
    background-color: rgba(255,255,255,0.1);
}

/* â–²â–²â–² æ–°å¢CSSç²˜è´´ç»“æŸ â–²â–²â–² */
/* â–¼â–¼â–¼ æ­¥éª¤ 2ï¼šå°†è¿™æ®µã€å…¨æ–°çš„CSSä»£ç ã€‘ï¼Œç²˜è´´åˆ° <style> æ ‡ç­¾çš„æœ€æœ«å°¾ â–¼â–¼â–¼ */

/* æ¸…ç©ºåŠ¨æ€é€‰æ‹©åˆ—è¡¨çš„æ ·å¼ */
#clear-posts-list {
    overflow-y: auto; /* å†…å®¹è¿‡é•¿æ—¶å¯ä»¥æ»šåŠ¨ */
    flex-grow: 1;
}

/* æ¯ä¸€ä¸ªå¯å‹¾é€‰çš„é¡¹ç›® */
.clear-posts-item {
    display: flex;
    align-items: center;
    padding: 12px 18px;
    cursor: pointer;
    border-bottom: 1px solid var(--border-color);
    transition: background-color 0.2s;
}
.clear-posts-item:hover {
    background-color: #f5f5f5;
}

/* æ¨¡æ‹Ÿçš„å‹¾é€‰æ¡† */
.clear-posts-item .checkbox {
    width: 22px;
    height: 22px;
    border: 2px solid #ccc;
    border-radius: 50%;
    margin-right: 15px;
    transition: all 0.2s ease;
    display: flex;
    align-items: center;
    justify-content: center;
    color: white;
}
/* é€‰ä¸­åçš„æ ·å¼ */
.clear-posts-item.selected .checkbox {
    background-color: var(--accent-color);
    border-color: var(--accent-color);
}
/* ä¸ºå‹¾é€‰æ¡†æ·»åŠ ä¸€ä¸ªâ€œâœ”â€å· */
.clear-posts-item.selected .checkbox::after {
    content: 'âœ”';
    font-size: 14px;
    font-weight: bold;
}

/* é¡¹ç›®åç§° */
.clear-posts-item .name {
    font-weight: 500;
}

/* ä¸ºå±é™©é€‰é¡¹ï¼ˆå¦‚â€œæ¸…ç©ºæ‰€æœ‰â€ï¼‰æ·»åŠ çº¢è‰²è­¦å‘Šæ ·å¼ */
.clear-posts-item.danger-option .name {
    color: #ff3b30;
    font-weight: 600;
}

/* â–²â–²â–² æ–°å¢CSSç²˜è´´ç»“æŸ â–²â–²â–² */
/* â–¼â–¼â–¼ æ­¥éª¤ 2ï¼šå°†è¿™æ®µã€å…¨æ–°çš„CSSä»£ç ã€‘ï¼Œç²˜è´´åˆ° <style> æ ‡ç­¾çš„æœ€æœ«å°¾ â–¼â–¼â–¼ */

/* 1. è®©å¿ƒå£°å¡ç‰‡æˆä¸ºåˆ é™¤æŒ‰é’®çš„å®šä½é”šç‚¹ */
.thought-card {
    position: relative; /* å…³é”®ï¼ */
}

/* 2. åˆ é™¤æŒ‰é’®çš„æ ·å¼ */
.thought-delete-btn {
    position: absolute;
    top: 10px;
    right: 10px;
    width: 26px;
    height: 26px;
    border-radius: 50%;
    border: none;
    background-color: rgba(0,0,0,0.05);
    color: var(--text-secondary);
    font-size: 20px;
    line-height: 26px;
    text-align: center;
    cursor: pointer;
    opacity: 0; /* é»˜è®¤éšè— */
    transition: all 0.2s ease-in-out;
}

/* 3. é¼ æ ‡æ‚¬åœåœ¨å¡ç‰‡ä¸Šæ—¶ï¼Œæ˜¾ç¤ºåˆ é™¤æŒ‰é’® */
.thought-card:hover .thought-delete-btn {
    opacity: 1;
}

/* 4. é¼ æ ‡æ‚¬åœåœ¨åˆ é™¤æŒ‰é’®ä¸Šæ—¶ï¼Œå˜ä¸ºçº¢è‰²è­¦å‘Š */
.thought-delete-btn:hover {
    background-color: #ff3b30;
    color: white;
}
/* â–²â–²â–² æ–°å¢CSSç²˜è´´ç»“æŸ â–²â–²â–² */
/* â–¼â–¼â–¼ ã€å…¨æ–°ã€‘BGMæœç´¢ç»“æœå¼¹çª—ç¾åŒ– (å¤šé€‰æ”¯æŒç‰ˆ) â–¼â–¼â–¼ */



/* 2. è®©åˆ—è¡¨é¡¹æ”¯æŒFlexå¸ƒå±€ï¼Œä¸ºå¤é€‰æ¡†ç•™å‡ºç©ºé—´ */
.search-result-item {
    display: flex;       /* æ”¹ä¸ºFlexå¸ƒå±€ */
    align-items: center; /* å‚ç›´å±…ä¸­ */
    padding: 12px 18px;
    border-bottom: 1px solid var(--border-color);
    cursor: pointer;
    transition: background-color 0.2s;
}
.search-result-item:hover {
    background-color: rgba(0, 0, 0, 0.05);
}
#phone-screen.dark-mode .search-result-item:hover {
    background-color: rgba(255, 255, 255, 0.1);
}

/* 3. è®©æ­Œæ›²ä¿¡æ¯éƒ¨åˆ†å æ®å‰©ä½™ç©ºé—´ */
.search-result-item .search-result-info {
    flex-grow: 1;
    pointer-events: none; /* è®©ç‚¹å‡»ç©¿é€åˆ°çˆ¶å…ƒç´  */
}

/* 4. å¤é€‰æ¡†æ ·å¼ */
.search-result-item .music-search-checkbox {
    width: 20px;
    height: 20px;
    margin-right: 15px;
    flex-shrink: 0;
}

/* 5. è°ƒæ•´å¼¹çª—å¤´éƒ¨ï¼Œä¸ºâ€œå…¨é€‰â€ç•™å‡ºç©ºé—´ */
#music-search-results-modal .modal-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
}

/* 6. è°ƒæ•´å¼¹çª—é¡µè„šï¼Œå®¹çº³ä¸¤ä¸ªæŒ‰é’® */
#music-search-results-modal .modal-footer {
    display: flex;
    justify-content: space-around;
}
#music-search-results-modal .modal-footer button {
    width: 45%; /* è®©æ¯ä¸ªæŒ‰é’®å æ®è¿‘ä¸€åŠå®½åº¦ */
}
/* â–²â–²â–² æ–°å¢CSSç»“æŸ â–²â–²â–² */
/* â–¼â–¼â–¼ ã€å…¨æ–°ã€‘ç¾åŒ–å¤–è§‚è®¾ç½®é¡µé¢çš„æ¬¡è¦æŒ‰é’® â–¼â–¼â–¼ */
.bg-upload-container {
    /* ç¡®ä¿å®¹å™¨å†…çš„æŒ‰é’®èƒ½æ­£ç¡®å¯¹é½ */
    width: 100%;
    justify-content: center;
    gap: 15px; /* å¢åŠ æŒ‰é’®ä¹‹é—´çš„é—´è· */
}

.bg-upload-container .form-button-secondary {
    flex-grow: 1; /* è®©æŒ‰é’®è‡ªåŠ¨å¡«å……ç©ºé—´ */
    flex-basis: 0; /* ç¡®ä¿flex-growç”Ÿæ•ˆ */
    max-width: 180px; /* ç»™ä¸€ä¸ªæœ€å¤§å®½åº¦ï¼Œé¿å…åœ¨å®½å±ä¸Šæ‹‰ä¼¸è¿‡åº¦ */
    margin-top: 0;
    padding: 12px; /* é€‚ä¸­çš„å†…è¾¹è·ï¼Œè®©æŒ‰é’®æ›´é¥±æ»¡ */
    font-size: 15px;
    font-weight: 600; /* ä¸ä¸»æŒ‰é’®ä¸€è‡´çš„å­—é‡ */
    border-radius: 8px; /* ä¸ä¸»æŒ‰é’®ä¸€è‡´çš„åœ†è§’ */
    border: none; /* ç§»é™¤è¾¹æ¡†ï¼Œæ›´åƒiOSé£æ ¼ */
    background-color: #e9e9eb; /* iOSé£æ ¼çš„æµ…ç°è‰² */
    color: #1c1c1e; /* æ·±è‰²æ–‡å­— */
    cursor: pointer;
    transition: background-color 0.2s, transform 0.1s;
}

.bg-upload-container .form-button-secondary:active {
    transform: scale(0.98); /* æ·»åŠ ç‚¹å‡»åé¦ˆ */
}

/* ä¸ºâ€œç§»é™¤â€æŒ‰é’®è®¾ç½®ç‰¹æ®Šçš„è­¦å‘Šè‰² */
#remove-global-bg-btn {
    background-color: #ffebee;
    color: #c62828;
}
/* â–²â–²â–² æ–°å¢CSSç»“æŸ â–²â–²â–² */
/* â–¼â–¼â–¼ ã€å…¨æ–°ã€‘å¿ƒå£°/æ•£è®°å¡ç‰‡ç¥¨æ ¹æ ·å¼ â–¼â–¼â–¼ */

/* 1. ä¸ºå¡ç‰‡ä¸»ä½“è®¾ç½®ç›¸å¯¹å®šä½å’Œæº¢å‡ºéšè—ï¼Œè¿™æ˜¯å®ç°æ•ˆæœçš„åŸºç¡€ */
#character-profile-modal .character-profile-content {
    position: relative; /* è®©ä¼ªå…ƒç´ å¯ä»¥ç›¸å¯¹äºå®ƒå®šä½ */
    overflow: visible;  /* ã€æ ¸å¿ƒä¿®æ”¹ã€‘å…è®¸ä¼ªå…ƒç´ â€œæº¢å‡ºâ€åˆ°å¤–é¢ä¸€ç‚¹ï¼Œå½¢æˆæ‰“å­”æ•ˆæœ */
    padding-bottom: 35px; /* å¢åŠ åº•éƒ¨å†…è¾¹è·ï¼Œé˜²æ­¢å†…å®¹ä¸åº•éƒ¨æ‰“å­”é‡å  */
}

/* 2. åˆ›å»ºé¡¶éƒ¨çš„æ‰“å­”æ•ˆæœ */
#character-profile-modal .character-profile-content::before {
    content: '';
    position: absolute;
    top: -10px; /* å‘ä¸Šç§»åŠ¨ï¼Œéœ²å‡ºä¸€åŠ */
    left: 0;
    right: 0;
    height: 20px; /* æ‰“å­”æ¡çš„é«˜åº¦ */
    /* æ ¸å¿ƒï¼šä½¿ç”¨å¾„å‘æ¸å˜åˆ›å»ºé‡å¤çš„åŠåœ†å½¢â€œå­”â€ */
    background-image: radial-gradient(circle at 50% 0, transparent 8px, #f0f2f5 8px);
    background-size: 25px 20px; /* æ§åˆ¶æ¯ä¸ªå­”çš„å¤§å°å’Œé—´è· */
    background-repeat: repeat-x;
}

/* 3. åˆ›å»ºåº•éƒ¨çš„æ‰“å­”æ•ˆæœ */
#character-profile-modal .character-profile-content::after {
    content: '';
    position: absolute;
    bottom: -10px; /* å‘ä¸‹ç§»åŠ¨ï¼Œéœ²å‡ºä¸€åŠ */
    left: 0;
    right: 0;
    height: 20px; /* æ‰“å­”æ¡çš„é«˜åº¦ */
    /* æ ¸å¿ƒï¼šä¸é¡¶éƒ¨ç±»ä¼¼ï¼Œä½†åœ†å¿ƒä½ç½®ç›¸å */
    background-image: radial-gradient(circle at 50% 100%, transparent 8px, #f0f2f5 8px);
    background-size: 25px 20px; /* æ§åˆ¶æ¯ä¸ªå­”çš„å¤§å°å’Œé—´è· */
    background-repeat: repeat-x;
}

/* â–²â–²â–² æ–°å¢CSSç»“æŸ â–²â–²â–² */
/* â–¼â–¼â–¼ ã€å…¨æ–°ã€‘ç¥¨æ ¹æ ·å¼ç¾åŒ– (ç›´è§’ + çº¯ç™½èƒŒæ™¯) â–¼â–¼â–¼ */

/* 1. è¦†ç›–ä¸»å®¹å™¨æ ·å¼ï¼Œæ”¹ä¸ºç›´è§’å’Œç™½è‰²èƒŒæ™¯ */
#character-profile-modal .character-profile-content {
    border-radius: 0;         /* æ ¸å¿ƒä¿®æ”¹1: ç§»é™¤åœ†è§’ï¼Œå˜ä¸ºç›´è§’ */
    background-color: #ffffff; /* æ ¸å¿ƒä¿®æ”¹2: å°†èƒŒæ™¯è‰²æ”¹ä¸ºçº¯ç™½è‰² */
}

/* 2. è¦†ç›–é¡¶éƒ¨æ‰“å­”æ¡çš„é¢œè‰²ï¼Œä¸æ–°çš„ç™½è‰²èƒŒæ™¯ç»Ÿä¸€ */
#character-profile-modal .character-profile-content::before {
    /* æ ¸å¿ƒä¿®æ”¹3: å°†æ‰“å­”æ¡çš„é¢œè‰²ä»ç°è‰²æ”¹ä¸ºçº¯ç™½è‰² */
    background-image: radial-gradient(circle at 50% 0, transparent 8px, #ffffff 8px);
}

/* 3. è¦†ç›–åº•éƒ¨æ‰“å­”æ¡çš„é¢œè‰²ï¼Œä¸æ–°çš„ç™½è‰²èƒŒæ™¯ç»Ÿä¸€ */
#character-profile-modal .character-profile-content::after {
    /* æ ¸å¿ƒä¿®æ”¹4: å°†æ‰“å­”æ¡çš„é¢œè‰²ä¹Ÿæ”¹ä¸ºçº¯ç™½è‰² */
    background-image: radial-gradient(circle at 50% 100%, transparent 8px, #ffffff 8px);
}

/* â–²â–²â–² æ–°å¢CSSç»“æŸ â–²â–²â–² */
/* â–¼â–¼â–¼ ã€å…¨æ–°ã€‘ä¸ºå¿ƒå£°/æ•£è®°å¡ç‰‡æ·»åŠ ç¥¨æ ¹åˆ†å‰²çº¿ â–¼â–¼â–¼ */

/* 1. ä¸ºå¤´éƒ¨åŒºåŸŸï¼ˆæ—¶é—´æˆ³ï¼‰æ·»åŠ ç›¸å¯¹å®šä½å’Œç©ºé—´ï¼Œä½œä¸ºåˆ†å‰²çº¿çš„â€œé”šç‚¹â€ */
#character-profile-modal .thought-header {
    position: relative;
    width: 100%;
    /* å¢åŠ åº•éƒ¨å†…è¾¹è·ï¼Œä¸ºåˆ†å‰²çº¿åˆ›é€ ç©ºé—´ */
    padding-bottom: 15px; 
    /* å¢åŠ åº•éƒ¨å¤–è¾¹è·ï¼Œå°†ä¸‹æ–¹çš„â€œå¿ƒå£°â€å†…å®¹æ¨å¼€ */
    margin-bottom: 25px; 
    /* è¿™å°±æ˜¯ä¸­é—´çš„ç°è‰²è™šçº¿ */
    border-bottom: 2px dashed #e0e0e0; 
}

/* â–¼â–¼â–¼ ã€æœ€ç»ˆä¿®å¤ã€‘ç¥¨æ ¹åˆ†å‰²çº¿æ‰“å­”é€æ˜æ•ˆæœ â–¼â–¼â–¼ */


/* 2. é‡æ–°åˆ›å»ºå·¦ä¾§çš„â€œæ‰“å­”â€ï¼Œä½¿å…¶é¢œè‰²ä¸é¡µé¢èƒŒæ™¯ä¸€è‡´ */
#character-profile-modal .thought-header::before {
    content: '';
    position: absolute;
    bottom: -11px;
    left: -35px;
    width: 20px;
    height: 20px;
    border-radius: 50%;
    /* æ ¸å¿ƒä¿®å¤ï¼šä½¿ç”¨é¡µé¢çš„èƒŒæ™¯è‰² (#f0f2f5) æ¥â€œä¼ªè£…â€é€æ˜æ•ˆæœ */
    background-color:  rgba(0, 0, 0, 0.3);
}

/* 3. é‡æ–°åˆ›å»ºå³ä¾§çš„â€œæ‰“å­”â€ */
#character-profile-modal .thought-header::after {
    content: '';
    position: absolute;
    bottom: -11px;
    right: -35px;
    width: 20px;
    height: 20px;
    border-radius: 50%;
    /* æ ¸å¿ƒä¿®å¤ï¼šé¢œè‰²ä¸é¡µé¢èƒŒæ™¯ä¿æŒä¸€è‡´ */
    background-color:  rgba(0, 0, 0, 0.3);
}

/* â–²â–²â–² æ–°å¢CSSç»“æŸ â–²â–²â–² */
/* â–¼â–¼â–¼ ã€æœ€ç»ˆç‰ˆã€‘è§’è‰²èµ„æ–™å¡å›ºå®šèƒŒæ™¯å›¾æ ·å¼ (ç›´è§’) â–¼â–¼â–¼ */

/* â–¼â–¼â–¼ ã€æœ€ç»ˆå›¾ç‰‡æ˜¾ç¤ºä¿®å¤ã€‘è¯·ç”¨è¿™æ•´å—ä»£ç æ›¿æ¢æ—§çš„ .thought-header æ ·å¼ â–¼â–¼â–¼ */
#character-profile-modal .thought-header {
    height: 140px;         /* ä¿æŒå›ºå®šçš„ã€é˜²å‹ç¼©çš„é«˜åº¦ */
    flex-shrink: 0;
    padding: 10px;         /* åœ¨å›¾ç‰‡å››å‘¨ç•™å‡ºâ€œç”»æ¡†â€è¾¹è· */
    padding-bottom: 25px;  /* åŠ å¤§åº•éƒ¨è¾¹è·ï¼Œå°†å›¾ç‰‡ä¸è™šçº¿åˆ†å¼€ */
    box-sizing: border-box;
    border-bottom: 2px dashed #e0e0e0; /* æ¢å¤è™šçº¿åˆ†å‰²çº¿ */
    margin-bottom: 25px;
    position: relative;     /* ä¿æŒï¼Œä¸ºäº†è®©æ‰“å­”èƒ½æ­£ç¡®å®šä½ */

    /* --- æ ¸å¿ƒä¿®å¤ï¼šåœ¨è¿™é‡Œé‡æ–°æ·»åŠ èƒŒæ™¯å›¾ç‰‡ --- */
    background-image: url('https://s3plus.meituan.net/opapisdk/op_ticket_885190757_1758340625111_qdqqd_zqr2cl.jpeg'); /* <-- è¯·åœ¨è¿™é‡Œæ›¿æ¢ä¸ºæ‚¨è‡ªå·±çš„å›¾ç‰‡URL */
    background-size: cover;
    background-position: center top;
    border-radius: 0;      /* ç¡®ä¿å›¾ç‰‡å®¹å™¨æ˜¯ç›´è§’çš„ */
}
/* â–²â–²â–² æ›¿æ¢ç»“æŸ â–²â–²â–² */

/* 2. ç§»é™¤ä¹‹å‰ä¸ºJSåŠ¨æ€å›¾ç‰‡å‡†å¤‡çš„æ ·å¼ï¼ˆå¯é€‰ï¼Œä½†æ¨èï¼‰ */
#profile-photo-slot {
    display: none; /* éšè—æ‰JSå¯èƒ½åˆ›å»ºçš„<img>æ ‡ç­¾ */
}

/* â–²â–²â–² æ–°å¢CSSç»“æŸ â–²â–²â–² */
/* â–¼â–¼â–¼ ã€æœ€ç»ˆä¿®å¤ã€‘éš”ç¦»èµ„æ–™å¡æ ·å¼ï¼Œé˜²æ­¢æ³„éœ²åˆ°å†å²è®°å½• â–¼â–¼â–¼ */

/* â–¼â–¼â–¼ ã€æœ€ç»ˆä¿®å¤ã€‘éš”ç¦»èµ„æ–™å¡æ ·å¼ï¼Œé˜²æ­¢æ³„éœ²åˆ°å†å²è®°å½• â–¼â–¼â–¼ */

/* 1. ã€æ ¸å¿ƒã€‘ä½¿ç”¨æ›´ç²¾ç¡®çš„é€‰æ‹©å™¨ï¼Œç¡®ä¿ç…§ç‰‡åŒºåŸŸåªå‡ºç°åœ¨ä¸»èµ„æ–™é¡µä¸Š */
#character-profile-modal #profile-main-content .thought-header {
    height: 120px;
    padding-bottom: 15px; /* æ­¥éª¤1ï¼šä¿ç•™è¶³å¤Ÿçš„ç©ºé—´ï¼Œå°†è™šçº¿å‘ä¸‹æ¨ */
    box-sizing: border-box;
    background-image: url('https://s3plus.meituan.net/opapisdk/op_ticket_885190757_1758340625111_qdqqd_zqr2cl.jpeg');
    background-size: cover;
    background-position: center top;
    border-bottom: 2px dashed #e0e0e0;
    margin-bottom: 15px;
    
    /* â–¼â–¼â–¼ æ­¥éª¤2ï¼šè¿™å°±æ˜¯è§£å†³é—®é¢˜çš„å…³é”®ï¼â–¼â–¼â–¼ */
    /* å¼ºåˆ¶èƒŒæ™¯å›¾åªåœ¨å†…å®¹åŒºç»˜åˆ¶ï¼Œä¸è¦è¿›å…¥æˆ‘ä»¬ç”¨paddingæ’‘å¼€çš„ç©ºç™½åŒºåŸŸ */
    background-clip: content-box; 
    -webkit-background-clip: content-box; /* å…¼å®¹æ—§ç‰ˆæµè§ˆå™¨ */
    /* â–²â–²â–² å…³é”®ä»£ç ç»“æŸ â–²â–²â–² */
}

/* 2. ã€æ ¸å¿ƒã€‘ç¡®ä¿æ‰“å­”æ•ˆæœä¹Ÿåªå‡ºç°åœ¨ä¸»èµ„æ–™é¡µä¸Š */
#character-profile-modal #profile-main-content .thought-header::before,
#character-profile-modal #profile-main-content .thought-header::after {
    content: '';
    position: absolute;
    bottom: -11px;
    width: 20px;
    height: 20px;
    border-radius: 50%;
    background-color: rgba(0, 0, 0, 0.3);
}
#character-profile-modal #profile-main-content .thought-header::before {
    left: -35px;
}
#character-profile-modal #profile-main-content .thought-header::after {
    right: -35px;
}

/* 3. ã€é‡è¦ã€‘å°†å†å²è®°å½•é¡µé‡Œçš„å°å¡ç‰‡å¤´éƒ¨æ ·å¼ï¼Œå¼ºåˆ¶æ¢å¤ä¸ºåŸå§‹çš„ç®€æ´æ ·å¼ */
#character-profile-modal #thoughts-history-list .thought-card .thought-header {
    height: auto;
    padding: 0;
    padding-bottom: 8px; /* æ¢å¤åº•éƒ¨çš„å°é—´è· */
    margin-bottom: 12px;
    background-image: none; /* ç§»é™¤èƒŒæ™¯å›¾ */
    border: none; /* ç§»é™¤æ‰€æœ‰è¾¹æ¡† */
    border-bottom: 1px solid #f0f0f0; /* åªä¿ç•™åº•éƒ¨çš„ç»†åˆ†å‰²çº¿ */
}

/* 4. ã€é‡è¦ã€‘åœ¨å†å²è®°å½•çš„å°å¡ç‰‡ä¸Šï¼Œå¼ºåˆ¶éšè—æ‰æ‰“å­”çš„ä¼ªå…ƒç´  */
#character-profile-modal #thoughts-history-list .thought-card .thought-header::before,
#character-profile-modal #thoughts-history-list .thought-card .thought-header::after {
    display: none !important; /* å¼ºåˆ¶ä¸æ˜¾ç¤º */
}

/* â–²â–²â–² æ–°å¢CSSç»“æŸ â–²â–²â–² */
/* â–¼â–¼â–¼ ã€å…¨æ–°ã€‘å¿ƒå£°/æ•£è®°ç¾åŒ–ä¸å­—ä½“ä¿®å¤ â–¼â–¼â–¼ */

/* 
  ç¬¬ä¸€æ­¥ï¼šå¼ºåˆ¶æ˜¾ç¤ºâ€œå¿ƒå£°â€å’Œâ€œæ•£è®°â€çš„æ ‡ç­¾ã€‚
  æˆ‘ä»¬ä½¿ç”¨ !important æ¥ç¡®ä¿è¿™æ¡è§„åˆ™çš„ä¼˜å…ˆçº§æœ€é«˜ï¼Œ
  å¯ä»¥è¦†ç›–æ‰ä»»ä½•ä¹‹å‰å¯èƒ½å­˜åœ¨çš„ display: none; éšè—è§„åˆ™ã€‚
*/
#character-profile-modal #profile-main-content .label {
    display: flex !important;
}

/* 
  ç¬¬äºŒæ­¥ï¼šä¸ºâ€œå¿ƒå£°â€å’Œâ€œæ•£è®°â€çš„æ­£æ–‡å†…å®¹æ›´æ¢å­—ä½“ã€‚
  è¿™é‡Œä»¥å¸¸è§çš„å®‹ä½“(SimSun)ä¸ºä¾‹ï¼Œæ‚¨å¯ä»¥æ›¿æ¢æˆä»»ä½•æ‚¨å–œæ¬¢çš„å­—ä½“åç§°ã€‚
*/
#character-profile-modal #profile-main-content .text {
    font-family: "SimSun", "Songti SC", serif; /* ç¤ºä¾‹ï¼šæ›´æ¢ä¸ºå®‹ä½“ */
    font-size: 16px; /* (å¯é€‰) ç¨å¾®æ”¾å¤§å­—ä½“ï¼Œè®©å®‹ä½“æ›´æ¸…æ™° */
}

/* â–²â–²â–² æ–°å¢CSSç²˜è´´ç»“æŸ â–²â–²â–² */
/* â–¼â–¼â–¼ ã€æœ€ç»ˆä¿®å¤ã€‘å¼ºåˆ¶å°†å¿ƒå£°/æ•£è®°å†…å®¹å˜ä¸ºçº¯é»‘è‰² â–¼â–¼â–¼ */

/* 1. å°†â€œå¿ƒå£°â€å’Œâ€œæ•£è®°â€çš„æ ‡é¢˜æ–‡å­—å’Œå›¾æ ‡å˜ä¸ºé»‘è‰² */
#character-profile-modal .thought-content .label {
    color: #000000 !important;
}

/* 2. å°†â€œå¿ƒå£°â€å’Œâ€œæ•£è®°â€çš„æ­£æ–‡æ®µè½æ–‡å­—å˜ä¸ºé»‘è‰² */
#character-profile-modal .thought-content .text {
    color: #000000 !important;
}

/* â–²â–²â–² æ–°å¢CSSç²˜è´´ç»“æŸ â–²â–²â–² */
/* â–¼â–¼â–¼ ã€å…¨æ–°ã€‘ä¿®å¤å¿ƒå£°/èµ„æ–™å¡é¡µé¢å·¦å³æ»‘åŠ¨é—®é¢˜ â–¼â–¼â–¼ */
#character-profile-modal #profile-main-content {
    overflow-x: hidden;
}
/* â–²â–²â–² æ–°å¢CSSç»“æŸ â–²â–²â–² */
        /* â–¼â–¼â–¼ ã€å…¨æ–°ã€‘è¡¨æƒ…åŒ…åˆ†ç±»åŠŸèƒ½æ ·å¼ â–¼â–¼â–¼ */

        /* 1. åˆ†ç±»é¡µç­¾å®¹å™¨æ ·å¼ */
        #sticker-category-tabs {
            display: flex;
            overflow-x: auto;
            padding: 0 15px; /* å·¦å³ç•™ç™½ */
            flex-shrink: 0;
            border-bottom: 1px solid var(--border-color);
            background-color: var(--secondary-bg);
            /* éšè—æ»šåŠ¨æ¡ */
            -ms-overflow-style: none;
            scrollbar-width: none;
        }
        #sticker-category-tabs::-webkit-scrollbar {
            display: none;
        }

        /* 2. å•ä¸ªé¡µç­¾æŒ‰é’®æ ·å¼ */
        .sticker-category-tab {
            padding: 10px 16px; /* å¢åŠ ä¸Šä¸‹å†…è¾¹è·ï¼Œè®©é¡µç­¾æ›´é«˜ä¸€äº› */
            cursor: pointer;
            border: none;
            background-color: transparent;
            font-size: 14px;
            font-weight: 500;
            color: var(--text-secondary);
            border-bottom: 2px solid transparent;
            margin-bottom: -1px; /* è®©åº•è¾¹æ¡†ä¸å®¹å™¨è¾¹æ¡†é‡åˆ */
            transition: all 0.2s ease-in-out;
            white-space: nowrap; /* é˜²æ­¢åˆ†ç±»åæ¢è¡Œ */
        }

        /* 3. æ¿€æ´»çš„é¡µç­¾æ ·å¼ */
        .sticker-category-tab.active {
            color: var(--accent-color);
            border-bottom-color: var(--accent-color);
            font-weight: 600;
        }

        #phone-screen.dark-mode .sticker-category-tab.active {
            color: #ffffff;
        }
        /* â–²â–²â–² æ–°å¢CSSç»“æŸ â–²â–²â–² */
        /* â–¼â–¼â–¼ ã€å…¨æ–°ã€‘è¡¨æƒ…æ‰¹é‡åˆ é™¤ä¸å…¨é€‰åŠŸèƒ½æ ·å¼ â–¼â–¼â–¼ */
        
        /* ç®¡ç†æ¨¡å¼ä¸‹ï¼Œä¸ºè¡¨æƒ…é¡¹æ·»åŠ ä¸€ä¸ªé€‰ä¸­æ¡† */
        #sticker-grid.management-mode .sticker-item::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            border: 3px solid transparent;
            border-radius: 10px;
            box-sizing: border-box;
            transition: border-color 0.2s;
            pointer-events: none; /* ç¡®ä¿ä¸å½±å“ç‚¹å‡» */
        }
        
        /* ç®¡ç†æ¨¡å¼ä¸‹ï¼Œè¢«é€‰ä¸­çš„è¡¨æƒ…é¡¹ï¼Œæ˜¾ç¤ºè“è‰²è¾¹æ¡† */
        #sticker-grid.management-mode .sticker-item.selected::after {
            border-color: var(--accent-color);
        }
        
        /* ç®¡ç†æ¨¡å¼ä¸‹ï¼Œæ€»æ˜¯æ˜¾ç¤ºåˆ é™¤æŒ‰é’® */
        #sticker-grid.management-mode .sticker-item .delete-btn {
            display: block;
            background-color: rgba(0, 0, 0, 0.5);
            color: white;
            border: 1px solid white;
        }
        
        /* ã€å…¨æ–°ã€‘åº•éƒ¨æ‰¹é‡åˆ é™¤æ“ä½œæ  */
        #sticker-action-bar {
            display: none; /* é»˜è®¤éšè— */
            flex-shrink: 0;
            padding: 10px 15px;
            padding-bottom: calc(10px + env(safe-area-inset-bottom));
            background-color: rgba(247, 247, 247, 0.9);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            border-top: 1px solid var(--border-color);
            justify-content: space-between; /* è®©â€œå…¨é€‰â€å’Œâ€œåˆ é™¤â€ä¸¤ç«¯å¯¹é½ */
            align-items: center;
        }
        
        #sticker-action-bar .select-all-label {
            font-size: 16px;
            color: var(--text-primary);
            cursor: pointer;
        }

        #sticker-action-bar button {
            padding: 10px 25px;
            border-radius: 20px;
            border: none;
            font-size: 15px;
            font-weight: 600;
            cursor: pointer;
            background-color: #ff3b30;
            color: white;
        }
        /* â–²â–²â–² æ–°å¢CSSç»“æŸ â–²â–²â–² */
/* â–¼â–¼â–¼ ã€å…¨æ–° V2.0ã€‘CphoneåŠŸèƒ½çš„æ‰€æœ‰CSSæ ·å¼ â–¼â–¼â–¼ */

/* --- 1. è§’è‰²é€‰æ‹©ç•Œé¢ (ä¿æŒä¸å˜) --- */
#character-selection-screen { background-color: #f0f2f5; }
#phone-screen.dark-mode #character-selection-screen { background-color: #000; }
/* --- è¯·ç”¨è¿™ä¸€æ•´å—ã€å…¨æ–°ã€‘çš„CSSï¼Œæ›¿æ¢æ—§çš„ #character-grid å’Œ .character-select-item ç›¸å…³çš„æ‰€æœ‰æ ·å¼ --- */

/* 1. å°†ç½‘æ ¼å®¹å™¨å˜ä¸ºåˆ—è¡¨å®¹å™¨ */
#character-grid {
    /* ç§»é™¤äº† display: grid å’Œç›¸å…³å±æ€§ */
    padding: 0; /* ç§»é™¤å†…è¾¹è·ï¼Œç”±åˆ—è¡¨é¡¹è‡ªå·±æ§åˆ¶ */
    overflow-y: auto; /* ç¡®ä¿å†…å®¹è¶…å‡ºæ—¶å¯ä»¥æ»šåŠ¨ */
    flex-grow: 1;
}

/* 2. ä¿®æ”¹æ¯ä¸ªåˆ—è¡¨é¡¹çš„å¸ƒå±€ï¼Œä»å‚ç›´å˜ä¸ºæ°´å¹³ */
.character-select-item {
    display: flex;
    flex-direction: row;     /* æ ¸å¿ƒä¿®æ”¹ï¼šä» column å˜ä¸º row */
    align-items: center;     /* ä¿æŒå‚ç›´å±…ä¸­ */
    cursor: pointer;
    padding: 12px 20px;      /* å¢åŠ å†…è¾¹è·ï¼Œå½¢æˆåˆ—è¡¨é¡¹å¤–è§‚ */
    border-bottom: 1px solid var(--border-color); /* æ·»åŠ åˆ†å‰²çº¿ */
    gap: 15px;               /* åœ¨å¤´åƒå’Œåå­—ä¹‹é—´å¢åŠ é—´è· */
    transition: background-color 0.2s; /* æ·»åŠ æ‚¬åœæ•ˆæœ */
    /* ç§»é™¤äº† text-align: center */
}
.character-select-item:hover {
    background-color: #f5f5f5; /* é¼ æ ‡æ‚¬åœæ—¶é«˜äº® */
}


/* 3. è°ƒæ•´å¤´åƒå¤§å°å’Œæ ·å¼ */
.character-select-item .avatar {
    width: 45px;             /* æ ¸å¿ƒä¿®æ”¹ï¼šç¼©å°å¤´åƒå°ºå¯¸ */
    height: 45px;
    border-radius: 50%;      /* æ”¹ä¸ºåœ†å½¢ï¼Œæ›´é€‚åˆåˆ—è¡¨è§†å›¾ */
    object-fit: cover;
    margin-bottom: 0;        /* ç§»é™¤åº•éƒ¨å¤–è¾¹è· */
    box-shadow: 0 2px 5px rgba(0,0,0,0.1);
    transition: transform 0.2s ease;
    flex-shrink: 0;          /* é˜²æ­¢å¤´åƒè¢«å‹ç¼© */
}

/* 4. è°ƒæ•´åå­—æ ·å¼ */
.character-select-item .name {
    font-weight: 500;
    font-size: 16px;         /* ç¨å¾®å¢å¤§å­—ä½“ï¼Œæé«˜å¯è¯»æ€§ */
    color: var(--text-primary);
}
/* --- æ›¿æ¢ç»“æŸ --- */

/* --- 2. Cphoneä¸»å®¹å™¨ä¸å±å¹•åˆ‡æ¢ (ä¿æŒä¸å˜) --- */
#character-phone-screen { background-size: cover; background-position: center; }
.char-screen { width: 100%; height: 100%; position: absolute; top: 0; left: 0; display: flex; flex-direction: column; overflow: hidden; opacity: 0; visibility: hidden; transition: opacity 0.3s, visibility 0.3s; }
.char-screen.active { opacity: 1; visibility: visible; z-index: 2; }

/* --- 3. Cphoneä¸»å±å¹• (ä¿æŒä¸å˜) --- */
#char-home-screen { justify-content: flex-start; align-items: center; box-sizing: border-box; padding: 0 20px; }
#char-clock-container { text-align: center; color: white; text-shadow: 0 3px 8px rgba(0,0,0,0.4); margin-top: calc(60px + env(safe-area-inset-top)); flex-shrink: 0; margin-bottom: 100px; }
#char-main-time { font-size: 88px; font-weight: 600; letter-spacing: -2px; font-family: -apple-system, BlinkMacSystemFont, "Helvetica Neue", sans-serif; }
#char-main-date { font-size: 22px; font-weight: normal; }
#char-app-grid { display: flex; flex-direction: column; align-items: center; gap: 20px; width: 100%; }

/* --- 4. Cphoneå†…çš„Appé€šç”¨èƒŒæ™¯è‰² (å·²æ‰©å±•) --- */
#char-qq-screen, #char-memo-screen, #char-diary-screen, #char-usage-screen, 
#char-album-screen, #char-browser-screen, #char-taobao-screen {
     background-color: var(--secondary-bg);
}

/* --- 5. å¤‡å¿˜å½•ã€æ—¥è®°ã€ä½¿ç”¨è®°å½•åˆ—è¡¨æ ·å¼ (ä¿æŒä¸å˜) --- */
.memo-item, .diary-item, .usage-item { padding: 15px 20px; border-bottom: 1px solid var(--border-color); cursor: pointer; }
.memo-item .content, .diary-item .content { font-size: 16px; color: var(--text-primary); white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
.diary-item .date, .usage-item .timestamp { font-size: 12px; color: var(--text-secondary); margin-bottom: 5px; }
.usage-item .action { font-size: 15px; color: var(--text-primary); }

/* --- 6. ã€å…¨æ–°ã€‘è§’è‰²ç›¸å†Œæ ·å¼ --- */
#char-album-grid {
    display: grid;
    grid-template-columns: repeat(3, 1fr); /* æ¯è¡Œ3å¼ å›¾ */
    gap: 5px;
    padding: 5px;
}
.char-photo-item {
    aspect-ratio: 1 / 1; /* ä¿æŒæ­£æ–¹å½¢ */
    background-size: cover;
    background-position: center;
    background-color: #e9ecef;
}

/* --- 7. ã€å…¨æ–°ã€‘è§’è‰²æµè§ˆå™¨å†å²æ ·å¼ --- */
.char-browser-item {
    padding: 12px 20px;
    border-bottom: 1px solid var(--border-color);
}
.char-browser-item .title {
    font-weight: 500;
    font-size: 15px;
    color: var(--text-primary);
    margin-bottom: 4px;
}
.char-browser-item .url {
    font-size: 12px;
    color: var(--accent-color);
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
}

/* --- 8. ã€å…¨æ–°ã€‘è§’è‰²æ·˜å®é¡µé¢æ ·å¼ (å¤ç”¨ä¸»è´­ç‰©é¡µæ ·å¼) --- */
#char-product-grid {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: 10px;
    padding: 10px;
}
.char-product-item {
    background-color: #fff;
    border-radius: 8px;
    box-shadow: 0 2px 4px rgba(0,0,0,0.04);
    display: flex;
    flex-direction: column;
}
.char-product-item .product-image {
    width: 100%;
    aspect-ratio: 1 / 1;
    object-fit: cover;
    border-radius: 8px 8px 0 0;
}
.char-product-item .product-info {
    padding: 12px 10px;
    flex-grow: 1;
}
.char-product-item .product-name {
    font-size: 13px;
    color: #333;
    line-height: 1.4;
    min-height: 36px;
}
.char-product-item .product-price {
    font-size: 16px;
    font-weight: 700;
    color: #ff5722;
    margin-top: 8px;
}
.char-product-item .product-price::before { content: 'Â¥'; font-size: 12px; }

/* â–²â–²â–² å…¨æ–°CSSç²˜è´´ç»“æŸ â–²â–²â–² */
/* â–¼â–¼â–¼ ã€å…¨æ–°V2.0ã€‘CphoneQQæ¨¡æ‹ŸåŠŸèƒ½æ ·å¼ â–¼â–¼â–¼ */
#char-qq-screen .list-container {
    padding: 0; /* ç§»é™¤å®¹å™¨çš„å†…è¾¹è· */
}
/* â–²â–²â–² æ–°å¢CSSç²˜è´´ç»“æŸ â–²â–²â–² */
/* â–¼â–¼â–¼ ã€å…¨æ–°ã€‘CphoneQQæ¨¡æ‹ŸèŠå¤©è®°å½•å¼¹çª—æ ·å¼ â–¼â–¼â–¼ */

/* 1. è®©å¼¹çª—å†…å®¹åŒºæ‹¥æœ‰å’Œä¸»èŠå¤©ç•Œé¢ä¸€æ ·çš„å¸ƒå±€ */
#transcript-modal-body {
    display: flex;
    flex-direction: column;
    gap: 20px; /* æ¶ˆæ¯æ°”æ³¡ä¹‹é—´çš„é—´è· */
    padding: 15px; /* å†…è¾¹è· */
    background-color: #f0f2f5;
}

/* 2. å¤œé—´æ¨¡å¼é€‚é… */
#phone-screen.dark-mode #transcript-modal-body {
    background-color: #000000;
}

/* â–²â–²â–² æ–°å¢CSSç²˜è´´ç»“æŸ â–²â–²â–² */
/* â–¼â–¼â–¼ ã€å…¨æ–°V2.0 | æœ€ç»ˆå¸ƒå±€ä¿®å¤ã€‘è¯·ç”¨è¿™æ•´å—ä»£ç ï¼Œæ›¿æ¢æ‰æ‚¨ä¸Šä¸€æ¬¡ç²˜è´´çš„ #char-chat-list ç›¸å…³çš„CSS â–¼â–¼â–¼ */

/* 1. ä¸ºä¸¤ä¸ªåˆ—è¡¨çš„åˆ—è¡¨é¡¹ï¼ˆä¸»QQåˆ—è¡¨å’Œè§’è‰²QQåˆ—è¡¨ï¼‰è®¾ç½®ç»Ÿä¸€çš„ Flexbox å¸ƒå±€ */
#chat-list .chat-list-item,
#char-chat-list .chat-list-item {
    display: flex;
    align-items: center;
    gap: 15px; /* ã€æ ¸å¿ƒä¿®å¤1ã€‘ä½¿ç”¨ gap å±æ€§åœ¨å¤´åƒå’Œæ–‡å­—ä¹‹é—´åˆ›å»ºé—´è·ï¼Œè¿™æ¯” margin æ›´ç°ä»£ã€æ›´å¯é  */
}

/* 2. ç¡®ä¿å¤´åƒå®¹å™¨ï¼ˆæ— è®ºåœ¨å“ªä¸€ä¸ªåˆ—è¡¨ä¸­ï¼‰éƒ½ç»å¯¹ä¸ä¼šè¢«å‹ç¼© */
#chat-list .chat-list-item .avatar-group,
#char-chat-list .chat-list-item .avatar-group {
    flex-shrink: 0;
    /* ç§»é™¤äº†æ—§çš„ margin-rightï¼Œå› ä¸ºç°åœ¨ç”±çˆ¶å…ƒç´ çš„ gap å±æ€§ç»Ÿä¸€æ§åˆ¶é—´è· */
}

/* 3. ç¡®ä¿æ–‡å­—ä¿¡æ¯åŒºåŸŸï¼ˆæ— è®ºåœ¨å“ªä¸€ä¸ªåˆ—è¡¨ä¸­ï¼‰éƒ½èƒ½å¤Ÿæ­£ç¡®åœ°ä¼¸ç¼© */
#chat-list .chat-list-item .info,
#char-chat-list .chat-list-item .info {
    flex-grow: 1;
    min-width: 0; /* å…³é”®ï¼å…è®¸å®¹å™¨æ”¶ç¼©ï¼Œä»è€Œé˜²æ­¢å†…éƒ¨çš„é•¿æ–‡å­—æ’‘ç ´å¸ƒå±€å¯¼è‡´é‡å  */
}
/* â–²â–²â–² æ›¿æ¢ç»“æŸ â–²â–²â–² */
/* â–¼â–¼â–¼ ã€å…¨æ–°ã€‘CphoneQQæ¨¡æ‹Ÿå¯¹è¯é¡µé¢ç¾åŒ–æ ·å¼ â–¼â–¼â–¼ */

/* 1. è®©å¼¹çª—å†…å®¹åŒºæ‹¥æœ‰å’Œä¸»èŠå¤©ç•Œé¢ä¸€æ ·çš„å¸ƒå±€ */
#char-qq-conversation-screen .list-container {
    display: flex;
    flex-direction: column;
    gap: 20px; /* <-- æ ¸å¿ƒï¼šæ·»åŠ 20pxçš„é—´è· */
    padding: 15px; /* <-- æ–°å¢ï¼šåœ¨å››å‘¨å¢åŠ å†…è¾¹è·ï¼Œé¿å…æ°”æ³¡è´´è¾¹ */
    background-color: #f0f2f5;
}

/* 2. å¤œé—´æ¨¡å¼é€‚é… */
#phone-screen.dark-mode #char-qq-conversation-screen .list-container {
    background-color: #000000;
}
/* â–¼â–¼â–¼ ã€å…¨æ–°ã€‘CphoneAppé€šç”¨èƒŒæ™¯è‰² (å·²ä¿®å¤) â–¼â–¼â–¼ */
#char-qq-screen, 
#char-memo-screen, 
#char-diary-screen, 
#char-usage-screen, 
#char-album-screen, 
#char-browser-screen, 
#char-taobao-screen,
/* --- ã€æ ¸å¿ƒä¿®å¤ã€‘å°†æ–°çš„æ–‡ç« é¡µé¢ä¹ŸåŠ å…¥è¿™ä¸ªè§„åˆ™ï¼Œç¡®ä¿å®ƒæœ‰æ­£ç¡®çš„èƒŒæ™¯è‰² --- */
#char-browser-article-screen {
     background-color: var(--secondary-bg);
}
/* â–²â–²â–² ä¿®å¤ç»“æŸ â–²â–²â–² */
/* â–¼â–¼â–¼ ã€å…¨æ–°ã€‘CphoneAppé€šç”¨èƒŒæ™¯è‰² (å·²ä¿®å¤é’±åŒ…é¡µé¢) â–¼â–¼â–¼ */
#char-qq-screen, 
#char-memo-screen, 
#char-diary-screen, 
#char-usage-screen, 
#char-album-screen, 
#char-browser-screen, 
#char-taobao-screen,
#char-browser-article-screen,
/* --- ã€æ ¸å¿ƒä¿®å¤ã€‘å°†æ–°çš„é’±åŒ…é¡µé¢ä¹ŸåŠ å…¥è¿™ä¸ªè§„åˆ™ï¼Œç¡®ä¿å®ƒæœ‰æ­£ç¡®çš„èƒŒæ™¯è‰² --- */
#char-wallet-screen {
     background-color: var(--secondary-bg);
}
/* â–²â–²â–² ä¿®å¤ç»“æŸ â–²â–²â–² */
/* â–¼â–¼â–¼ ã€å…¨æ–°ã€‘Cphoneå¤‡å¿˜å½•è¯¦æƒ…é¡µæ ·å¼ â–¼â–¼â–¼ */

#char-memo-detail-content {
    width: 100%;
    height: 100%;
    border: none;
    background-color: transparent;
    font-size: 16px;
    line-height: 1.7; /* å¢åŠ è¡Œé«˜ï¼Œæ›´æ˜“è¯» */
    padding: 15px 20px; /* å¢åŠ å·¦å³å†…è¾¹è· */
    box-sizing: border-box;
    resize: none; /* ç¦æ­¢ç”¨æˆ·æ‹–åŠ¨è°ƒæ•´å¤§å° */
    outline: none; /* ç§»é™¤é€‰ä¸­æ—¶çš„è“è‰²è¾¹æ¡† */
    font-family: inherit; /* ç»§æ‰¿é¡µé¢å­—ä½“ */
    color: var(--text-primary); /* ç¡®ä¿æ–‡å­—é¢œè‰²èƒ½é€‚é…å¤œé—´æ¨¡å¼ */
}

/* â–²â–²â–² æ–°å¢CSSç»“æŸ â–²â–²â–² */
/* â–¼â–¼â–¼ ã€å…¨æ–°ã€‘Cphoneå¤‡å¿˜å½•è¯¦æƒ…é¡µç¾åŒ– (ä»¿iOS Notes App) â–¼â–¼â–¼ */

/* 1. è®©è¯¦æƒ…é¡µæ‹¥æœ‰è‡ªå·±çš„ã€èƒ½é€‚é…å¤œé—´æ¨¡å¼çš„èƒŒæ™¯è‰² */
#char-memo-detail-screen {
    background-color: var(--secondary-bg);
}

/* 2. ç¾åŒ–å¤´éƒ¨ï¼Œæ·»åŠ åˆ†å‰²çº¿ï¼Œå¹¶è°ƒæ•´å†…è¾¹è· */
#char-memo-detail-screen .header {
    background-color: var(--secondary-bg); /* ä¸é¡µé¢èƒŒæ™¯è‰²ç»Ÿä¸€ */
    border-bottom: 1px solid var(--border-color); /* æ·»åŠ ç²¾è‡´çš„åˆ†å‰²çº¿ */
    
    padding-bottom: 10px;
}

/* 3. ã€æ ¸å¿ƒã€‘å¼ºåˆ¶æ ‡é¢˜å±…ä¸­æ˜¾ç¤º */
#char-memo-detail-title {
    position: absolute;
    left: 50%;
    transform: translateX(-50%);
    font-weight: 600; /* æ ‡é¢˜åŠ ç²— */
}

/* 4. ç§»é™¤å†…å®¹å®¹å™¨çš„é»˜è®¤å†…è¾¹è·ï¼Œè®©æ–‡æœ¬åŒºèƒ½æ’‘æ»¡ */
#char-memo-detail-screen .form-container {
    padding: 0;
}

/* 5. ç¾åŒ–æ–‡æœ¬åŒºåŸŸï¼Œä½¿å…¶çœ‹èµ·æ¥åƒä¸€ä¸ªçœŸæ­£çš„ç¬”è®°é¡µé¢ */
#char-memo-detail-content {
    background-color: var(--secondary-bg); /* èƒŒæ™¯è‰²ä¸å¤´éƒ¨ç»Ÿä¸€ï¼Œå½¢æˆæ•´ä½“æ„Ÿ */
    padding: 15px 20px; /* å¢åŠ é¡¶éƒ¨å’Œå·¦å³çš„å†…è¾¹è·ï¼Œè®©æ–‡å­—æœ‰å‘¼å¸ç©ºé—´ */
    font-size: 17px; /* ä»¿iOSå¤‡å¿˜å½•çš„å­—ä½“å¤§å° */
    line-height: 1.7; /* æ›´å®½æ¾çš„è¡Œé«˜ï¼Œæå‡é˜…è¯»ä½“éªŒ */
    color: var(--text-primary);
}

/* â–²â–²â–² æ–°å¢CSSç»“æŸ â–²â–²â–² */
/* â–¼â–¼â–¼ ã€å…¨æ–°ã€‘Cphoneæ—¥è®°è¯¦æƒ…é¡µâ€œä¿¡çº¸â€æ ·å¼ â–¼â–¼â–¼ */

/* 1. è¯¦æƒ…é¡µä¸»å±å¹•ï¼Œä½¿ç”¨æŸ”å’Œçš„ç±³ç™½è‰²èƒŒæ™¯ */
#char-diary-detail-screen {
    background-color: #FDFBF5; /* æŸ”å’Œçš„ä¿¡çº¸åº•è‰² */
}

/* å¤œé—´æ¨¡å¼ä¸‹çš„é€‚é… */
#phone-screen.dark-mode #char-diary-detail-screen {
    background-color: #2c2c2e; /* æ·±è‰²èƒŒæ™¯ */
}

/* 2. ç§»é™¤å†…å®¹åŒºçš„é»˜è®¤å†…è¾¹è·ï¼Œè®©æˆ‘ä»¬çš„â€œä¿¡çº¸â€èƒ½æ’‘æ»¡ */
#char-diary-detail-content-wrapper {
    padding: 0;
    overflow-y: auto; /* ç¡®ä¿é•¿æ—¥è®°å¯ä»¥æ»šåŠ¨ */
}

/* 3. â€œä¿¡çº¸â€æœ¬èº«çš„æ ¸å¿ƒæ ·å¼ */
#char-diary-detail-content {
    padding: 25px 20px; /* åœ¨ä¿¡çº¸å››å‘¨ç•™å‡ºèˆ’é€‚çš„è¾¹è· */
    font-family: Georgia, 'Times New Roman', Times, serif; /* ä½¿ç”¨æ›´å…¸é›…çš„è¡¬çº¿å­—ä½“ */
    font-size: 16px;
    line-height: 1.8; /* æ›´å¤§çš„è¡Œé«˜ï¼Œæå‡é˜…è¯»æ„Ÿ */
    color: #383838; /* ä½¿ç”¨æ·±ç°è‰²æ–‡å­—ï¼Œæ¯”çº¯é»‘æ›´æŸ”å’Œ */
}

/* å¤œé—´æ¨¡å¼ä¸‹çš„æ–‡å­—é¢œè‰² */
#phone-screen.dark-mode #char-diary-detail-content {
    color: #e0e0e0;
}

/* 4. ä¸ºæ—¥è®°çš„ç¬¬ä¸€è¡Œï¼ˆé€šå¸¸æ˜¯æ ‡é¢˜ï¼‰è®¾ç½®ç‰¹æ®Šæ ·å¼ */
#char-diary-detail-content > p:first-of-type {
    font-size: 20px;
    font-weight: 600;
    margin-bottom: 20px;
    text-align: center;
}

/* 5. ç¡®ä¿Markdownè½¬æ¢åçš„æ ‡ç­¾æ ·å¼æ­£ç¡® */
#char-diary-detail-content strong {
    font-weight: 600; /* åŠ ç²— */
}
#char-diary-detail-content .spoiler {
    /* è¿™é‡Œçš„æ ·å¼ä¸ä¸»èŠå¤©ç•Œé¢ä¿æŒä¸€è‡´ */
    background-color: #333;
    color: #333;
    padding: 0 4px;
    border-radius: 4px;
    cursor: pointer;
    transition: all 0.2s ease-in-out;
}
#char-diary-detail-content .spoiler:hover {
    background-color: #e0e0e0;
    color: inherit;
}

/* â–²â–²â–² æ–°å¢CSSç»“æŸ â–²â–²â–² */
/* â–¼â–¼â–¼ ã€å…¨æ–°ã€‘æ—¥è®°è¯¦æƒ…é¡µè‡ªå®šä¹‰Markdownæ ·å¼ â–¼â–¼â–¼ */

/* 0. å¼•å…¥å¤–éƒ¨æ‰‹å†™å­—ä½“ (Google Fonts) */
@import url('https://fonts.googleapis.com/css2?family=Zhi+Mang+Xing&display=swap');

/* 1. é»„è‰²èƒŒæ™¯é«˜äº® */
#char-diary-detail-content .diary-highlight {
    background-color: #FFFACD; /* æŸ æª¬ç»¸è‰²ï¼Œä¸€ç§æŸ”å’Œçš„é»„è‰² */
    padding: 1px 4px;
    border-radius: 3px;
    margin: 0 2px;
}

/* 2. ç²‰è‰²è™šçº¿ä¸‹åˆ’çº¿ */
#char-diary-detail-content .diary-underline {
    border-bottom: 2px dotted #FFB6C1; /* æµ…ç²‰è‰² */
    text-decoration: none; /* ç§»é™¤é»˜è®¤çš„å®çº¿ä¸‹åˆ’çº¿ */
    padding-bottom: 1px;
}

/* 3. ç²‰çº¢è‰²åŠ ç²—æ–‡å­— */
#char-diary-detail-content .diary-emphasis {
    color: #DB7093; /* ç°ç´«è‰² */
    font-weight: bold;
}

/* 4. æ‰‹å†™ä½“é»‘è‰²æ–‡å­— */
#char-diary-detail-content .diary-handwritten {
    font-family: 'Zhi Mang Xing', cursive; /* åº”ç”¨æ‰‹å†™å­—ä½“ */
    font-size: 1.1em; /* æ‰‹å†™ä½“ç¨å¾®å¤§ä¸€ç‚¹æ›´å¥½çœ‹ */
    color: #1a1a1a; /* æ¯”çº¯é»‘æ›´æŸ”å’Œçš„æ·±ç°è‰² */
}

/* 5. ç¨å¾®å€¾æ–œçš„æ‰‹å†™ä½“æ–‡å­— */
#char-diary-detail-content .diary-messy {
    font-family: 'Zhi Mang Xing', cursive;
    font-size: 1.1em;
    color: #1a1a1a;
    transform: rotate(-2deg); /* è½»å¾®æ—‹è½¬ */
    display: inline-block; /* æ—‹è½¬éœ€è¦ display å±æ€§é…åˆ */
    margin: 0 2px;
}

/* 6. è¢«æ¶‚é»‘çš„å†…å®¹ */
#char-diary-detail-content .diary-censored {
    background-color: #222;
    color: #222; /* è®©æ–‡å­—é¢œè‰²å’ŒèƒŒæ™¯è‰²ä¸€æ ·ï¼Œå®ç°æ¶‚é»‘æ•ˆæœ */
    user-select: none; /* é˜²æ­¢ç”¨æˆ·é€šè¿‡é€‰ä¸­æ¥æŸ¥çœ‹å†…å®¹ */
    padding: 0 3px;
    border-radius: 2px;
}

/* â–²â–²â–² æ–°å¢CSSç»“æŸ â–²â–²â–² */
.diary-censored:hover, .diary-censored:active {
  background-color: #E0E0E0; /* é¼ æ ‡æ‚¬åœæ—¶å˜æˆæµ…ç°è‰²èƒŒæ™¯ */
  color: inherit; /* æ¢å¤ä¸ºæ­£å¸¸çš„æ–‡å­—é¢œè‰² */
  cursor: pointer; /* é¼ æ ‡å˜ä¸ºå¯ç‚¹å‡»çš„æ‰‹å‹ */
}
/* â–¼â–¼â–¼ ã€å…¨æ–°ã€‘è§’è‰²é«˜å¾·åœ°å›¾åŠŸèƒ½æ ·å¼ â–¼â–¼â–¼ */

/* 1. ä¸»å±å¹•èƒŒæ™¯è‰² */
#char-amap-screen {
    background-color: #f0f2f5;
}
#phone-screen.dark-mode #char-amap-screen {
    background-color: #000000;
}

/* 2. è¶³è¿¹åˆ—è¡¨å®¹å™¨ */
#char-amap-list {
    padding: 15px;
    display: flex;
    flex-direction: column;
    gap: 18px; /* å¢åŠ è¶³è¿¹ä¹‹é—´çš„é—´è· */
}

/* 3. å•ä¸ªè¶³è¿¹å¡ç‰‡ */
.char-amap-item {
    background-color: var(--secondary-bg);
    border-radius: 12px;
    padding: 15px;
    box-shadow: 0 2px 8px rgba(0,0,0,0.06);
    display: flex;
    flex-direction: column; /* è®©å†…å®¹å‚ç›´æ’åˆ— */
}

/* 4. å¡ç‰‡å¤´éƒ¨ (å›¾æ ‡ + åœ°ç‚¹ä¿¡æ¯) */
.amap-item-header {
    display: flex;
    align-items: flex-start; /* å›¾æ ‡å’Œæ–‡å­—é¡¶éƒ¨å¯¹é½ */
    gap: 12px;
    border-bottom: 1px solid var(--border-color);
    padding-bottom: 12px;
    margin-bottom: 12px;
}

/* 5. åœ°ç‚¹å›¾æ ‡ */
.amap-item-icon {
    font-size: 24px;
    color: var(--accent-color);
    margin-top: 2px;
}

/* 6. åœ°ç‚¹ä¿¡æ¯ (æ ‡é¢˜ + åœ°å€) */
.amap-item-info {
    flex-grow: 1;
}
.amap-item-title {
    font-weight: 600;
    font-size: 16px;
    margin-bottom: 4px;
}
.amap-item-address {
    font-size: 13px;
    color: var(--text-secondary);
}

/* 7. å¡ç‰‡ä¸»ä½“ (è¯„è®º + å›¾ç‰‡) */
.amap-item-body {
    display: flex;
    flex-direction: column;
    gap: 10px;
}
.amap-item-comment {
    font-size: 14px;
    line-height: 1.6;
    white-space: pre-wrap; /* æ”¯æŒæ¢è¡Œ */
}

/* 8. è¶³è¿¹é™„å¸¦çš„å›¾ç‰‡ */
.amap-item-photo {
    width: 100%;
    height: 150px;
    border-radius: 8px;
    background-size: cover;
    background-position: center;
    cursor: pointer;
}

/* 9. å¡ç‰‡åº•éƒ¨ (æ—¶é—´æˆ³) */
.amap-item-footer {
    font-size: 12px;
    color: var(--text-secondary);
    margin-top: 10px;
    text-align: right;
}
/* â–²â–²â–² æ–°å¢CSSç»“æŸ â–²â–²â–² */
/* â–¼â–¼â–¼ ã€å…¨æ–°ã€‘è§’è‰²Appä½¿ç”¨è®°å½•åŠŸèƒ½æ ·å¼ â–¼â–¼â–¼ */

/* 1. åˆ—è¡¨å®¹å™¨ */
#char-usage-list {
    padding: 10px 0; /* ä¸Šä¸‹ç•™ç™½ï¼Œå·¦å³ç”±åˆ—è¡¨é¡¹æ§åˆ¶ */
}

/* 2. å•ä¸ªAppè®°å½•é¡¹ */
.char-usage-item {
    display: flex;
    align-items: center;
    gap: 15px;
    padding: 10px 20px;
    transition: background-color 0.2s;
}
.char-usage-item:hover {
    background-color: rgba(0,0,0,0.03);
}

/* 3. Appå›¾æ ‡ */
.usage-item-icon {
    width: 40px;
    height: 40px;
    border-radius: 8px; /* iOSé£æ ¼çš„åœ†è§’çŸ©å½¢ */
    object-fit: cover;
    flex-shrink: 0;
    background-color: #e9ecef;
}

/* 4. ä¸­é—´ä¿¡æ¯åŒº (Appå + åˆ†ç±») */
.usage-item-info {
    flex-grow: 1; /* å æ®æ‰€æœ‰å‰©ä½™ç©ºé—´ */
}
.usage-item-name {
    font-weight: 500;
    font-size: 16px;
}
.usage-item-category {
    font-size: 12px;
    color: var(--text-secondary);
}

/* 5. å³ä¾§æ—¶é•¿æ˜¾ç¤º */
.usage-item-time {
    font-size: 15px;
    color: var(--text-secondary);
    font-weight: 500;
    flex-shrink: 0;
}
/* â–²â–²â–² æ–°å¢CSSç»“æŸ â–²â–²â–² */
/* â–¼â–¼â–¼ ã€å…¨æ–°ã€‘è§’è‰²ç½‘æ˜“äº‘éŸ³ä¹åŠŸèƒ½æ ·å¼ â–¼â–¼â–¼ */

/* 1. ä¸»å±å¹•èƒŒæ™¯è‰² */
#char-music-screen {
    background-color: #f0f2f5;
}
#phone-screen.dark-mode #char-music-screen {
    background-color: #000000;
}

/* 2. æ­Œæ›²åˆ—è¡¨å®¹å™¨ */
#char-music-list {
    padding: 0;
}

/* 3. å•ä¸ªæ­Œæ›²åˆ—è¡¨é¡¹ (ä»¿ç½‘æ˜“äº‘é£æ ¼) */
.char-music-item {
    display: flex;
    align-items: center;
    gap: 12px;
    padding: 10px 20px;
    cursor: pointer;
    border-bottom: 1px solid var(--border-color);
}
.char-music-item:hover {
    background-color: rgba(0,0,0,0.03);
}

/* 4. æ­Œæ›²å°é¢ */
.music-item-cover {
    width: 50px;
    height: 50px;
    border-radius: 8px;
    object-fit: cover;
    flex-shrink: 0;
}

/* 5. æ­Œæ›²ä¿¡æ¯ (æ­Œå + æ­Œæ‰‹) */
.music-item-info {
    flex-grow: 1;
    overflow: hidden; /* é˜²æ­¢é•¿æ–‡æœ¬æº¢å‡º */
}
.music-item-name {
    font-weight: 500;
    font-size: 16px;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
}
.music-item-artist {
    font-size: 12px;
    color: var(--text-secondary);
}
/* â–²â–²â–² æ–°å¢CSSç»“æŸ â–²â–²â–² */
/* â–¼â–¼â–¼ è¿™æ˜¯ä½ è¦ã€æ·»åŠ ã€‘åˆ° <style> æ ‡ç­¾æœ«å°¾çš„ã€å…¨æ–°æ’­æ”¾å™¨CSSä»£ç ã€‘ â–¼â–¼â–¼ */

/* 1. æ’­æ”¾å™¨ä¸»çª—å£æ ·å¼ */
#char-music-player-modal .modal-content {
    width: 400px !important; /* å›ºå®šå®½åº¦ */
    height: auto !important; /* é«˜åº¦è‡ªé€‚åº” */
    max-height: 90vh;
    background-color: #f7f8fa !important; /* æµ…ç°è‰²èƒŒæ™¯ */
    border-radius: 12px !important;
    box-shadow: 0 10px 40px rgba(0,0,0,0.1) !important;
    color: #333 !important;
    display: flex;
    flex-direction: column;
}

/* 2. å¤´éƒ¨æ ‡é¢˜æ  */
#char-music-player-modal .char-player-header {
    flex-shrink: 0;
    padding: 12px 15px;
    border-bottom: 1px solid #e5e5e5;
    display: flex;
    justify-content: space-between;
    align-items: center;
    font-weight: 600;
}
#char-music-player-modal .char-player-close-btn {
    background: none;
    border: none;
    font-size: 20px;
    color: #aaa;
    cursor: pointer;
}
#char-music-player-modal .char-player-close-btn:hover {
    color: #333;
}


/* 3. ä¸»å†…å®¹åŒºï¼ˆå°é¢ã€è¿›åº¦æ¡ã€æŒ‰é’®ï¼‰ */
#char-music-player-modal .char-player-body {
    padding: 30px 35px 20px 35px;
    text-align: center;
}
#char-music-player-modal #char-music-cover {
    width: 220px;
    height: 220px;
    border-radius: 10px;
    box-shadow: 0 6px 20px rgba(0,0,0,0.15);
    margin-bottom: 20px;
    object-fit: cover;
}

/* 4. è¿›åº¦æ¡æ ·å¼ */
#char-music-player-modal .char-player-progress-bar-container {
    display: flex;
    align-items: center;
    gap: 10px;
    margin-bottom: 15px;
}
#char-music-player-modal .char-player-progress-bar {
    flex-grow: 1;
    height: 4px;
    background-color: #e0e0e0;
    border-radius: 2px;
    cursor: pointer;
}
#char-music-player-modal #char-music-progress-fill {
    width: 0%;
    height: 100%;
    background-color: #555;
    border-radius: 2px;
}

/* 5. æ§åˆ¶æŒ‰é’®æ ·å¼ */
#char-music-player-modal .char-player-controls {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 20px;
}
#char-music-player-modal .char-player-controls .control-btn {
    background: none;
    border: none;
    color: #555;
    cursor: pointer;
    transition: color 0.2s;
    padding: 5px;
    display: flex;
    align-items: center;
    justify-content: center;
}
#char-music-player-modal .char-player-controls .control-btn:hover {
    color: #000;
}
#char-music-player-modal .char-player-controls .control-btn.play {
    width: 50px;
    height: 50px;
    background-color: #f0f1f3;
    border-radius: 50%;
    color: #333;
}
#char-music-player-modal .char-player-controls .control-btn.mode {
    font-size: 14px;
    font-weight: 500;
    width: 50px;
}

/* 6. æ­Œè¯åŒºåŸŸæ ·å¼ */
#char-music-player-modal #char-music-lyrics {
    flex-grow: 1;
    overflow-y: auto;
    padding: 0 35px 25px 35px;
    font-size: 14px;
    line-height: 2;
    color: #888;
    text-align: center;
}
#char-music-player-modal #char-music-lyrics p.active {
    color: #000;
    font-weight: 600;
}

/* éšè—æ»šåŠ¨æ¡ */
#char-music-player-modal #char-music-lyrics::-webkit-scrollbar {
    display: none;
}
#char-music-player-modal #char-music-lyrics {
    -ms-overflow-style: none;
    scrollbar-width: none;
}

/* â–²â–²â–² æ–°å¢CSSç²˜è´´ç»“æŸ â–²â–²â–² */
/* â–¼â–¼â–¼ è¿™æ˜¯ä½ è¦ã€æ·»åŠ ã€‘åˆ° <style> æ ‡ç­¾æœ«å°¾çš„ã€å…¨æ–°æ’­æ”¾å™¨CSS V3.0ã€‘ â–¼â–¼â–¼ */

/* 1. å®šä¹‰å”±ç‰‡æ—‹è½¬åŠ¨ç”» */
@keyframes spin-vinyl {
  from { transform: rotate(0deg); }
  to { transform: rotate(360deg); }
}

/* 2. æ’­æ”¾å™¨ä¸»çª—å£æ ·å¼ */
#char-music-player-modal .modal-content {
    width: 340px !important; /* å®½åº¦é€‚ä¸­ */
    height: auto !important;
    background-color: #f0f1f3 !important; /* è½»æŸ”çš„ç°è‰²èƒŒæ™¯ */
    border-radius: 12px !important;
    box-shadow: 0 10px 40px rgba(0,0,0,0.1) !important;
    color: #333 !important;
    display: flex;
    flex-direction: column;
    padding: 20px; /* ç»Ÿä¸€å†…è¾¹è· */
    position: relative;
}

/* 3. ç§»é™¤æ—§çš„å¤´éƒ¨ï¼Œå› ä¸ºå…³é—­æŒ‰é’®å·²ç‹¬ç«‹ */
#char-music-player-modal .modal-header {
    display: none !important;
}

/* 4. å³ä¸Šè§’å…³é—­æŒ‰é’® */
#char-music-player-modal .char-player-close-btn {
    position: absolute;
    top: 15px;
    right: 15px;
    background: none;
    border: none;
    font-size: 24px;
    font-weight: 300;
    color: #aaa;
    cursor: pointer;
    line-height: 1;
    z-index: 10;
}

/* 5. ä¸»å†…å®¹åŒº */
#char-music-player-modal .char-player-body {
    display: flex;
    flex-direction: column;
    align-items: center;
    flex-grow: 1;
}

/* 6. æ­Œæ›²ä¿¡æ¯ */
#char-music-player-modal .char-player-song-info {
    text-align: center;
    margin-bottom: 25px;
}
#char-music-player-modal #char-music-player-title {
    font-size: 20px;
    font-weight: 600;
    margin: 0 0 5px 0;
}
#char-music-player-modal #char-music-artist {
    font-size: 14px;
    color: #888;
    margin: 0;
}

/* 7. é»‘èƒ¶å”±ç‰‡æ•ˆæœ */
#char-music-player-modal #char-vinyl-container {
    width: 210px;
    height: 210px;
    border-radius: 50%;
    background-color: #222;
    padding: 15px;
    box-shadow: 0 8px 25px rgba(0,0,0,0.2), 
                inset 0 0 0 2px rgba(255, 255, 255, 0.05);
    background-image: repeating-radial-gradient(circle, #333, #333 1px, #222 1px, #222 2px);
    box-sizing: border-box;
    margin-bottom: 25px;
}
#char-music-player-modal #char-vinyl-container.spinning {
    animation: spin-vinyl 12s linear infinite;
}
#char-music-player-modal #char-music-cover {
    width: 100%;
    height: 100%;
    border-radius: 50%;
    object-fit: cover;
}

/* 8. æ­Œè¯å ä½ç¬¦ (éŸ³ç¬¦) */
#char-music-player-modal #char-lyric-placeholder {
    color: #aaa;
    font-size: 18px;
    letter-spacing: 5px;
    margin-bottom: 25px;
}

/* 9. åº•éƒ¨æ§åˆ¶æ  */
#char-music-player-modal .char-player-footer {
    width: 100%;
    margin-top: auto; /* å°†å…¶æ¨åˆ°åº•éƒ¨ */
}

/* 10. è¿›åº¦æ¡å’Œæ§åˆ¶æŒ‰é’® (ä¸ä¸Šä¸€ç‰ˆç±»ä¼¼ï¼Œä½†classå·²æ›´æ–°) */
#char-music-player-modal .char-player-progress-bar-container {
    display: flex; align-items: center; gap: 10px; margin-bottom: 10px;
}
#char-music-player-modal .char-player-progress-bar {
    flex-grow: 1; height: 4px; background-color: #e0e0e0; border-radius: 2px; cursor: pointer;
}
#char-music-player-modal #char-music-progress-fill {
    width: 0%; height: 100%; background-color: #555; border-radius: 2px;
}
#char-music-player-modal .char-player-controls {
    display: flex; align-items: center; justify-content: center; gap: 20px;
}
#char-music-player-modal .char-player-controls .control-btn {
    background: none; border: none; color: #555; cursor: pointer; transition: color 0.2s; padding: 5px;
    display: flex; align-items: center; justify-content: center;
}
#char-music-player-modal .char-player-controls .control-btn:hover { color: #000; }
#char-music-player-modal .char-player-controls .control-btn.play {
    width: 50px; height: 50px; background-color: #e0e1e3; border-radius: 50%; color: #333;
}
#char-music-player-modal .char-player-controls .control-btn.mode {
    font-size: 14px; font-weight: 500; width: 50px;
}
#char-music-player-modal #char-music-lyrics {
    display: none; /* åœ¨è¿™ä¸ªç‰ˆæœ¬ä¸­ï¼Œæˆ‘ä»¬å½»åº•éšè—æ­Œè¯åŒºåŸŸ */
}

/* â–²â–²â–² æ–°å¢CSSç²˜è´´ç»“æŸ â–²â–²â–² */
/* â–¼â–¼â–¼ è¿™æ˜¯ä½ è¦ã€æ·»åŠ ã€‘åˆ° <style> æ ‡ç­¾æœ«å°¾çš„ã€å…¨æ–°æ’­æ”¾å™¨CSS V3.0ã€‘ â–¼â–¼â–¼ */

/* 1. å®šä¹‰å”±ç‰‡æ—‹è½¬åŠ¨ç”» */
@keyframes spin-vinyl {
  from { transform: rotate(0deg); }
  to { transform: rotate(360deg); }
}

/* 2. æ’­æ”¾å™¨ä¸»çª—å£æ ·å¼ */
#char-music-player-modal .modal-content {
    width: 340px !important; /* å®½åº¦é€‚ä¸­ */
    height: auto !important;
    background-color: #f0f1f3 !important; /* è½»æŸ”çš„ç°è‰²èƒŒæ™¯ */
    border-radius: 12px !important;
    box-shadow: 0 10px 40px rgba(0,0,0,0.1) !important;
    color: #333 !important;
    display: flex;
    flex-direction: column;
    padding: 20px; /* ç»Ÿä¸€å†…è¾¹è· */
    position: relative;
}

/* 3. ç§»é™¤æ—§çš„å¤´éƒ¨ï¼Œå› ä¸ºå…³é—­æŒ‰é’®å·²ç‹¬ç«‹ */
#char-music-player-modal .modal-header {
    display: none !important;
}

/* 4. å³ä¸Šè§’å…³é—­æŒ‰é’® */
#char-music-player-modal .char-player-close-btn {
    position: absolute;
    top: 15px;
    right: 15px;
    background: none;
    border: none;
    font-size: 24px;
    font-weight: 300;
    color: #aaa;
    cursor: pointer;
    line-height: 1;
    z-index: 10;
}

/* 5. ä¸»å†…å®¹åŒº */
#char-music-player-modal .char-player-body {
    display: flex;
    flex-direction: column;
    align-items: center;
    flex-grow: 1;
}

/* 6. æ­Œæ›²ä¿¡æ¯ */
#char-music-player-modal .char-player-song-info {
    text-align: center;
    margin-bottom: 25px;
}
#char-music-player-modal #char-music-player-title {
    font-size: 20px;
    font-weight: 600;
    margin: 0 0 5px 0;
}
#char-music-player-modal #char-music-artist {
    font-size: 14px;
    color: #888;
    margin: 0;
}

/* 7. é»‘èƒ¶å”±ç‰‡æ•ˆæœ */
#char-music-player-modal #char-vinyl-container {
    width: 210px;
    height: 210px;
    border-radius: 50%;
    background-color: #222;
    padding: 15px;
    box-shadow: 0 8px 25px rgba(0,0,0,0.2), 
                inset 0 0 0 2px rgba(255, 255, 255, 0.05);
    background-image: repeating-radial-gradient(circle, #333, #333 1px, #222 1px, #222 2px);
    box-sizing: border-box;
    margin-bottom: 25px;
}
#char-music-player-modal #char-vinyl-container.spinning {
    animation: spin-vinyl 12s linear infinite;
}
#char-music-player-modal #char-music-cover {
    width: 100%;
    height: 100%;
    border-radius: 50%;
    object-fit: cover;
}

/* 8. ã€æ ¸å¿ƒæ–°å¢ã€‘æ­Œè¯åŒºåŸŸæ ·å¼ */
#char-music-player-modal #char-music-lyrics {
    width: 100%;
    height: 50px; /* è®¾å®šä¸€ä¸ªå›ºå®šé«˜åº¦ï¼Œç”¨äºæ˜¾ç¤ºçº¦ä¸¤è¡Œæ­Œè¯ */
    overflow: hidden; /* éšè—è¶…å‡ºéƒ¨åˆ†çš„æ­Œè¯ */
    position: relative;
    margin-bottom: 25px;
    font-size: 14px;
    line-height: 25px; /* è®¾ç½®è¡Œé«˜ */
    color: #888;
    text-align: center;
    transition: all 0.3s ease;
}

#char-music-player-modal #char-music-lyrics p {
    margin: 0;
    transition: all 0.3s ease;
}

#char-music-player-modal #char-music-lyrics p.active {
    color: #000;
    font-weight: 600;
    font-size: 16px; /* å½“å‰è¡Œæ­Œè¯æ”¾å¤§ä¸€ç‚¹ */
}


/* 9. åº•éƒ¨æ§åˆ¶æ  */
#char-music-player-modal .char-player-footer {
    width: 100%;
    margin-top: auto; /* å°†å…¶æ¨åˆ°åº•éƒ¨ */
}

/* 10. è¿›åº¦æ¡å’Œæ§åˆ¶æŒ‰é’® */
#char-music-player-modal .char-player-progress-bar-container {
    display: flex; align-items: center; gap: 10px; margin-bottom: 10px;
}
#char-music-player-modal .char-player-progress-bar {
    flex-grow: 1; height: 4px; background-color: #e0e0e0; border-radius: 2px; cursor: pointer;
}
#char-music-player-modal #char-music-progress-fill {
    width: 0%; height: 100%; background-color: #555; border-radius: 2px;
}
#char-music-player-modal .char-player-controls {
    display: flex; align-items: center; justify-content: center; gap: 20px;
}
#char-music-player-modal .char-player-controls .control-btn {
    background: none; border: none; color: #555; cursor: pointer; transition: color 0.2s; padding: 5px;
    display: flex; align-items: center; justify-content: center;
}
#char-music-player-modal .char-player-controls .control-btn:hover { color: #000; }
#char-music-player-modal .char-player-controls .control-btn.play {
    width: 50px; height: 50px; background-color: #e0e1e3; border-radius: 50%; color: #333;
}
#char-music-player-modal .char-player-controls .control-btn.mode {
    font-size: 14px; font-weight: 500; width: 50px;
}

/* â–²â–²â–² æ–°å¢CSSç²˜è´´ç»“æŸ â–²â–²â–² */
#chat-list .chat-list-item {
    /* æ ¸å¿ƒ1ï¼šå¼ºåˆ¶ä½¿ç”¨ gap å±æ€§æ¥æ§åˆ¶é—´è·ï¼Œå¹¶è¦†ç›–æ—§æœ‰å†²çª */
    gap: 15px !important;
    /* ç¡®ä¿æ²¡æœ‰å…¶ä»–å¯¹é½æ–¹å¼å¹²æ‰° */
    justify-content: flex-start !important;
}

#chat-list .chat-list-item .avatar-group {
    /* æ ¸å¿ƒ2ï¼šå¼ºåˆ¶ç§»é™¤ä¹‹å‰ç”¨äºé—´è·çš„ marginï¼Œç°åœ¨å®Œå…¨ç”± gap æ§åˆ¶ */
    margin-right: 0 !important;
}

/* â–¼â–¼â–¼ ã€å…¨æ–°ã€‘è¿™æ˜¯ç”¨äºå¯¹é½å¤´éƒ¨å·¦ä¾§æŒ‰é’®çš„æ ·å¼ â–¼â–¼â–¼ */
.header .header-left-actions {
    display: flex;
    align-items: center;
    gap: 15px; /* (å¯é€‰) åœ¨è¿”å›ã€å¯¼å…¥ã€å¯¼å‡ºæŒ‰é’®ä¹‹é—´å¢åŠ ä¸€äº›é—´è· */
}
/* â–²â–²â–² æ–°å¢CSSç»“æŸ â–²â–²â–² */
        /* â–¼â–¼â–¼ ã€å…¨æ–°ã€‘è¿™æ˜¯ä¸ºâ€œè§’è‰²ç›¸å†Œç”Ÿå›¾å…³é—­â€åŠŸèƒ½æ·»åŠ çš„æ ·å¼ â–¼â–¼â–¼ */

        /* 1. è®©ç›¸å†Œæ ¼å­æˆä¸º Flex å®¹å™¨ï¼Œè¿™æ ·æˆ‘ä»¬æ‰èƒ½æ–¹ä¾¿åœ°å±…ä¸­å†…éƒ¨çš„æ–‡å­— */
        .char-photo-item {
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 8px; /* åœ¨æ–‡å­—å‘¨å›´ç•™å‡ºä¸€ç‚¹å†…è¾¹è·ï¼Œé¿å…è´´è¾¹ */
            box-sizing: border-box;
        }
        
        /* 2. ç…§ç‰‡æè¿°æ–‡å­—æœ¬èº«çš„æ ·å¼ */
        .char-photo-description {
            font-size: 13px;
            color: var(--text-secondary); /* ä½¿ç”¨æ¬¡è¦æ–‡å­—é¢œè‰²ï¼Œçœ‹èµ·æ¥æ›´æŸ”å’Œ */
            text-align: center;
            line-height: 1.5;
        
            /* æ ¸å¿ƒï¼šè¿™æ˜¯ä¸€ä¸ªå®ç°â€œå¤šè¡Œçœç•¥å·â€çš„æŠ€å·§ï¼Œé˜²æ­¢è¿‡é•¿çš„æè¿°æ’‘ç ´å¸ƒå±€ */
            display: -webkit-box;
            -webkit-box-orient: vertical;
            -webkit-line-clamp: 5; /* æœ€å¤šæ˜¾ç¤º5è¡Œ */
            overflow: hidden;
            word-break: break-all; /* ç¡®ä¿é•¿å•è¯æˆ–URLä¹Ÿèƒ½è¢«æˆªæ–­ */
        }
        
        /* â–²â–²â–² æ–°å¢CSSç»“æŸ â–²â–²â–² */
        /* â–¼â–¼â–¼ ã€å…¨æ–°ã€‘è¿™æ˜¯ä¸ºæ·˜å®/æµè§ˆå™¨ç”Ÿå›¾å…³é—­åŠŸèƒ½æ·»åŠ çš„æ ·å¼ â–¼â–¼â–¼ */

        /* 1. ä¸ºæ·˜å®å•†å“å¡ç‰‡ä¸Šçš„æ–‡å­—æè¿°åˆ›å»ºä¸€ä¸ªå®¹å™¨ */
        .char-product-description-overlay {
            width: 100%;
            aspect-ratio: 1 / 1; /* ä¸å›¾ç‰‡ä¿æŒç›¸åŒçš„æ­£æ–¹å½¢æ¯”ä¾‹ï¼Œç¡®ä¿ç½‘æ ¼å¸ƒå±€ä¸ä¹± */
            background-color: #f7f8fa; /* æŸ”å’Œçš„èƒŒæ™¯è‰² */
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 15px; /* å†…è¾¹è· */
            box-sizing: border-box;
            border-bottom: 1px solid #eee; /* åœ¨æè¿°å’Œå•†å“ä¿¡æ¯ä¹‹é—´åŠ ä¸€æ¡åˆ†å‰²çº¿ */
            border-radius: 8px 8px 0 0; /* åŒ¹é…å›¾ç‰‡çš„é¡¶éƒ¨åœ†è§’ */
        }

        /* 2. æè¿°æ–‡å­—æœ¬èº«çš„æ ·å¼ (å¤ç”¨ç›¸å†Œçš„æ ·å¼ï¼Œå¹¶è®©æµè§ˆå™¨ä¹Ÿä½¿ç”¨) */
        .char-product-description-overlay .char-photo-description,
        .char-browser-image-description { 
            font-size: 14px; /* å­—ä½“å¯ä»¥ç¨å¾®å¤§ä¸€ç‚¹ */
            color: var(--text-secondary);
            text-align: center;
            line-height: 1.6;
            display: -webkit-box;
            -webkit-box-orient: vertical;
            -webkit-line-clamp: 6; /* æœ€å¤šæ˜¾ç¤º6è¡Œ */
            overflow: hidden;
            word-break: break-all;
        }

        /* 3. ä¸ºæµè§ˆå™¨ä¸­çš„å›¾ç‰‡æè¿°åˆ›å»ºä¸€ä¸ªå®¹å™¨ */
        .char-browser-image-description {
            padding: 40px 20px; /* ä¸Šä¸‹ç•™å‡ºæ›´å¤šç©ºé—´ */
        }

        /* â–²â–²â–² æ–°å¢CSSç»“æŸ â–²â–²â–² */
/* â–¼â–¼â–¼ ã€å…¨æ–°ã€‘è¿™æ˜¯ä¸ºè§’è‰²æ·˜å®è®¢å•çŠ¶æ€æ·»åŠ çš„æ ·å¼ â–¼â–¼â–¼ */
.char-product-status {
    font-size: 12px;
    color: #8a8a8a; /* ä½¿ç”¨æŸ”å’Œçš„ç°è‰² */
    background-color: #f0f2f5; /* ç»™ä¸€ä¸ªæ·¡æ·¡çš„èƒŒæ™¯ */
    padding: 3px 8px;
    border-radius: 10px;
}
/* â–²â–²â–² æ–°å¢CSSç»“æŸ â–²â–²â–² *
/* 1. æœç´¢å±å¹•çš„èƒŒæ™¯è‰² */
#search-history-screen {
    background-color: #f0f2f5;
}
#phone-screen.dark-mode #search-history-screen {
    background-color: #000000;
}

/* 2. æœç´¢ç»“æœåˆ—è¡¨ï¼Œç¡®ä¿å¯ä»¥æ»šåŠ¨ */
#search-results-list {
    flex-grow: 1;
    overflow-y: auto;
}

/* 3. æ—¥æœŸåˆ†éš”ç¬¦çš„æ ·å¼ */
.date-separator {
    text-align: center;
    color: var(--text-secondary);
    font-size: 12px;
    padding: 10px 0;
    font-weight: 500;
}

/* 4. å¤œé—´æ¨¡å¼ä¸‹çš„è¾“å…¥æ¡†é€‚é… */
#phone-screen.dark-mode #search-bar input {
    background-color: #1c1c1e;
    color: #ffffff;
    border-color: #38383a;
}
/* â–²â–²â–² æ–°å¢CSSç»“æŸ â–²â–²â–² */
/* â–¼â–¼â–¼ ã€å…¨æ–°ã€‘ä¸»å±å¹•åˆ†é¡µåŠŸèƒ½æ ·å¼ â–¼â–¼â–¼ */

        /* 1. è®©ä¸»å±å¹•æˆä¸ºFlexå®¹å™¨ï¼Œä½†æ–¹å‘æ”¹ä¸ºæ°´å¹³ï¼Œä¸ºç¿»é¡µåšå‡†å¤‡ */
        #home-screen {
            flex-direction: column;
            padding: 0; /* ç§»é™¤æ—§çš„å†…è¾¹è·ï¼Œç”±å†…éƒ¨é¡µé¢è‡ªå·±æ§åˆ¶ */
        }

        /* 2. é¡µé¢å®¹å™¨ï¼Œè´Ÿè´£æ¨ªå‘æ’åˆ—æ‰€æœ‰é¡µé¢ */
        #home-screen-pages-container {
            flex-grow: 1; /* å æ®é™¤äº†Dockæ å¤–çš„æ‰€æœ‰ç©ºé—´ */
            width: 100%;
            overflow: hidden; /* éšè—æ¨ªå‘æ»šåŠ¨æ¡ */
            position: relative;
        }

        #home-screen-pages {
            display: flex;
            width: 200%; /* å‡è®¾æœ‰ä¸¤é¡µï¼Œå®½åº¦è®¾ä¸º200% */
            height: 100%;
            transition: transform 0.4s cubic-bezier(0.4, 0, 0.2, 1); /* å¹³æ»‘çš„ç¿»é¡µåŠ¨ç”» */
        }

        /* 3. å•ä¸ªé¡µé¢çš„æ ·å¼ */
        .home-screen-page {
            width: 50%; /* æ¯é¡µå æ®ä¸€åŠå®½åº¦ */
            height: 100%;
            padding: 20px;
            padding-top: calc(20px + env(safe-area-inset-top));
            padding-bottom: 0; /* åº•éƒ¨ç”±åˆ†é¡µæŒ‡ç¤ºå™¨æ§åˆ¶ */
            box-sizing: border-box;
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        /* 4. åˆ†é¡µæŒ‡ç¤ºå™¨ (å°åœ†ç‚¹) */
        #home-screen-pagination {
            display: flex;
            justify-content: center;
            gap: 8px;
            padding: 10px 0;
             /* é€‚é…iPhoneåº•éƒ¨å®‰å…¨åŒº */
            padding-bottom: calc(10px + env(safe-area-inset-bottom) / 2);
            flex-shrink: 0;
        }

        .pagination-dot {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background-color: rgba(255, 255, 255, 0.4);
            transition: all 0.3s ease;
        }

        .pagination-dot.active {
            background-color: white;
            transform: scale(1.1);
        }
        
        /* 5. ç¬¬äºŒé¡µçš„Appç½‘æ ¼å®¹å™¨ */

        /* â–²â–²â–² æ–°å¢CSSç»“æŸ â–²â–²â–² */
/* â–¼â–¼â–¼ ã€å…¨æ–°ã€‘èŠå¤©å·¥å…·æ æŒ‰é’®æ’åºåŠŸèƒ½æ ·å¼ â–¼â–¼â–¼ */
.draggable-button-item {
    padding: 8px 12px;
    background-color: var(--secondary-bg);
    border: 1px solid var(--border-color);
    border-radius: 20px;
    cursor: grab;
    display: flex;
    align-items: center;
    gap: 6px;
    font-size: 14px;
    font-weight: 500;
    transition: background-color 0.2s, box-shadow 0.2s;
    user-select: none;
}
.draggable-button-item:active {
    cursor: grabbing;
}
.draggable-button-item svg {
    width: 18px;
    height: 18px;
    stroke-width: 2;
}
/* å½“ä¸€ä¸ªå…ƒç´ æ­£åœ¨è¢«æ‹–åŠ¨æ—¶åº”ç”¨çš„æ ·å¼ */
.draggable-button-item.dragging {
    opacity: 0.5;
    background-color: #e0e0e0;
}
/* å½“æ‹–åŠ¨çš„å…ƒç´ æ‚¬åœåœ¨å¦ä¸€ä¸ªå…ƒç´ ä¸Šæ–¹æ—¶ï¼Œä¸ºé‚£ä¸ªå…ƒç´ åº”ç”¨çš„æ ·å¼ */
.draggable-button-item.drag-over {
    background-color: #d0eaff;
    box-shadow: 0 0 0 2px var(--accent-color);
}
/* â–²â–²â–² æ–°å¢CSSç»“æŸ â–²â–²â–² */
/* â–¼â–¼â–¼ ã€å…¨æ–° | ç§»åŠ¨ç«¯å…¼å®¹ã€‘ä¸ºæ‹–åŠ¨è¿‡ç¨‹æ·»åŠ çš„æ ·å¼ â–¼â–¼â–¼ */

/* å½“ä¸€ä¸ªå…ƒç´ æ­£åœ¨è¢«æ‹–åŠ¨æ—¶åº”ç”¨çš„æ ·å¼ */
.draggable-button-item.dragging {
    opacity: 0.5;
    background-color: #e0e0e0;
    /* æ ¸å¿ƒï¼šè®©è¢«æ‹–åŠ¨çš„å…ƒç´ â€œæµ®â€èµ·æ¥ï¼Œä¸ä¼šå½±å“å…¶ä»–å…ƒç´ çš„å¸ƒå±€ */
    position: relative; 
    z-index: 10;
}

/* é˜²æ­¢åœ¨æ‰‹æœºä¸Šæ‹–åŠ¨æ—¶ï¼Œæ„å¤–é€‰ä¸­é¡µé¢ä¸Šçš„æ–‡å­— */
#button-order-editor {
    -webkit-user-select: none;
    -moz-user-select: none;
    -ms-user-select: none;
    user-select: none;
}
/* â–²â–²â–² æ–°å¢CSSç»“æŸ â–²â–²â–² */
/* â–¼â–¼â–¼ ã€å…¨æ–°ã€‘è¿™æ˜¯ä¸ºå¼¹çª—å†…å¯æ»šåŠ¨é•¿æ–‡æœ¬æ·»åŠ çš„æ ·å¼ â–¼â–¼â–¼ */
.scrollable-content-preview {
    /* æ ¸å¿ƒ1ï¼šè®¾ç½®ä¸€ä¸ªæœ€å¤§é«˜åº¦ã€‚å†…å®¹è¶…å‡ºè¿™ä¸ªé«˜åº¦å°±ä¼šè§¦å‘æ»šåŠ¨ã€‚
       35vh è¡¨ç¤ºè§†çª—é«˜åº¦çš„35%ï¼Œè¿™æ˜¯ä¸€ä¸ªçµæ´»çš„é«˜åº¦ï¼Œèƒ½é€‚åº”ä¸åŒå±å¹•ã€‚*/
    max-height: 35vh;
    
    /* æ ¸å¿ƒ2ï¼šå½“å†…å®¹å‚ç›´æ–¹å‘æº¢å‡ºæ—¶ï¼Œè‡ªåŠ¨æ˜¾ç¤ºæ»šåŠ¨æ¡ã€‚ */
    overflow-y: auto;
    
    /* (å¯é€‰) ç¾åŒ–æ ·å¼ï¼Œè®©å®ƒçœ‹èµ·æ¥æ›´åƒä¸€ä¸ªä»£ç /å¼•ç”¨å— */
    background-color: #f0f2f5;
    padding: 10px 15px;
    border-radius: 8px;
    text-align: left;
    white-space: pre-wrap; /* ä¿æŒæ–‡æœ¬ä¸­çš„æ¢è¡Œ */
    border: 1px solid var(--border-color);
}
/* â–²â–²â–² æ–°å¢CSSç»“æŸ â–²â–²â–² */
/* â–¼â–¼â–¼ ã€å…¨æ–°ã€‘é«˜çº§æ•°æ®æ¸…ç†å‘å¯¼æ ·å¼ â–¼â–¼â–¼ */
.wizard-step {
    display: none; /* é»˜è®¤éšè—æ‰€æœ‰æ­¥éª¤ */
    flex-direction: column;
    width: 100%;
    height: 100%;
}

.wizard-step.active {
    display: flex; /* åªæ˜¾ç¤ºæ¿€æ´»çš„æ­¥éª¤ */
}

/* å¤ç”¨ç°æœ‰çš„åˆ—è¡¨é¡¹æ ·å¼ï¼Œä¸ºå…¶æ·»åŠ ä¸€ç‚¹å†…è¾¹è· */
#data-clear-char-list .clear-posts-item,
#data-clear-type-list .clear-posts-item {
    padding: 12px 18px;
}
/* â–²â–²â–² æ–°å¢CSSç»“æŸ â–²â–²â–² */
/* â–¼â–¼â–¼ ã€å…¨æ–°ã€‘ä¸ºæ¸…ç†å‘å¯¼æ·»åŠ â€œå…¨é€‰â€æ ·å¼ â–¼â–¼â–¼ */
#data-clear-wizard-modal .modal-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
}
#data-clear-wizard-modal .modal-header label {
    font-size: 14px;
    font-weight: normal;
    display: flex;
    align-items: center;
    gap: 5px;
    cursor: pointer;
}
/* â–²â–²â–² æ–°å¢CSSç»“æŸ â–²â–²â–² */

/* â–¼â–¼â–¼ ã€å…¨æ–°ã€‘è¿™æ˜¯æ›´æ–°é€šçŸ¥å¼¹çª—çš„æ ·å¼ â–¼â–¼â–¼ */
#update-notice-modal {
    position: fixed; /* å›ºå®šå®šä½ï¼Œè¦†ç›–åœ¨æ‰€æœ‰å†…å®¹ä¹‹ä¸Š */
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-color: rgba(0, 0, 0, 0.4);
    display: none; /* é»˜è®¤éšè— */
    align-items: center;
    justify-content: center;
    z-index: 2000; /* ç¡®ä¿åœ¨æœ€ä¸Šå±‚ */
    opacity: 0;
    transition: opacity 0.3s ease;
}
#update-notice-modal.visible {
    display: flex;
    opacity: 1;
}
.update-notice-content {
    background-color: #fff;
    width: 300px;
    border-radius: 14px;
    box-shadow: 0 5px 25px rgba(0,0,0,0.15);
    display: flex;
    flex-direction: column;
    transform: scale(0.95);
    transition: transform 0.3s cubic-bezier(0.18, 0.89, 0.32, 1.28);
}
#update-notice-modal.visible .update-notice-content {
    transform: scale(1);
}
.update-notice-body {
    padding: 20px;
    font-size: 15px;
    line-height: 1.6;
    color: #333;
    
    /* --- â–¼â–¼â–¼ æ ¸å¿ƒä¿®æ”¹å°±åœ¨è¿™é‡Œ â–¼â–¼â–¼ --- */

    /* 1. è®¾ç½®ä¸€ä¸ªæœ€å¤§é«˜åº¦ã€‚æˆ‘ä»¬ä½¿ç”¨ vh (è§†çª—é«˜åº¦) å•ä½ï¼Œ
       è®©å¼¹çª—æœ€å¤§ä¸è¶…è¿‡å±å¹•é«˜åº¦çš„60%ï¼Œä»¥é€‚åº”ä¸åŒå°ºå¯¸çš„æ‰‹æœºã€‚ */
    max-height: 60vh; 
    
    /* 2. å½“å†…å®¹è¶…å‡ºè¿™ä¸ªæœ€å¤§é«˜åº¦æ—¶ï¼Œè‡ªåŠ¨æ˜¾ç¤ºå‚ç›´æ»šåŠ¨æ¡ã€‚ */
    overflow-y: auto; 

    /* --- â–²â–²â–² ä¿®æ”¹ç»“æŸ â–²â–²â–² --- */
}
.update-notice-footer {
    border-top: 1px solid #dbdbdb;
    display: flex;
}
.update-notice-footer button {
    flex: 1;
    background: none;
    border: none;
    padding: 14px;
    font-size: 17px;
    cursor: pointer;
    color: var(--accent-color);
}
.update-notice-footer button:first-child {
    border-right: 1px solid #dbdbdb;
    font-weight: 600;
}
/* â–²â–²â–² æ–°å¢CSSç»“æŸ â–²â–²â–² */
/* â–¼â–¼â–¼ ã€å…¨æ–° | ä¿æŒæ¨ªå‘å¸ƒå±€ã€‘è¿™æ˜¯ä¿®å¤é•¿æŒ‰èœå•æˆªæ–­é—®é¢˜çš„æœ€ç»ˆç‰ˆæ ·å¼ â–¼â–¼â–¼ */

/* 1. æ ¸å¿ƒä¿®æ”¹ï¼šè®©æŒ‰é’®å®¹å™¨æ”¯æŒæ¢è¡Œ */
#message-actions-modal .custom-modal-footer {
    flex-wrap: wrap; /* å…è®¸é¡¹ç›®æ¢è¡Œ */
    padding: 10px;   /* åœ¨å®¹å™¨å‘¨å›´å¢åŠ ä¸€äº›å†…è¾¹è·ï¼Œè®©å¸ƒå±€æ›´èˆ’å±• */
    gap: 10px;       /* åœ¨æŒ‰é’®ä¹‹é—´å¢åŠ é—´è· */
    justify-content: flex-start; /* è®©æŒ‰é’®ä»å·¦ä¾§å¼€å§‹æ’åˆ— */
}

/* 2. ä¸ºæ¯ä¸€ä¸ªæ“ä½œæŒ‰é’®ï¼ˆé™¤äº†å–æ¶ˆæŒ‰é’®ï¼‰è®¾ç½®å°ºå¯¸å’Œæ ·å¼ */
#message-actions-modal .custom-modal-footer button:not(#cancel-message-action-btn) {
    /* æ ¸å¿ƒä¿®æ”¹ï¼šä¸å†å¹³åˆ†å®½åº¦ï¼Œè€Œæ˜¯å…è®¸å®ƒä»¬æ ¹æ®å†…å®¹ç”Ÿé•¿ï¼Œå¹¶è®¾ç½®ä¸€ä¸ªåŸºç¡€å®½åº¦ */
    flex-grow: 1;
    flex-basis: 75px; /* æ¯ä¸ªæŒ‰é’®çš„åŸºç¡€å®½åº¦ï¼Œç¡®ä¿è‡³å°‘èƒ½å®¹çº³4ä¸ªå­— */
    
    /* (å¯é€‰ä½†æ¨è) ç»Ÿä¸€æŒ‰é’®å¤–è§‚ï¼Œä½¿å…¶æ›´åƒä¸€ä¸ªç½‘æ ¼ */
    border: none;
    background-color: #f0f2f5;
    border-radius: 8px;
    padding: 12px 5px; /* è°ƒæ•´å†…è¾¹è·ï¼Œè®©æ–‡å­—å±…ä¸­ */
    font-size: 16px;
    font-weight: 500;
}

/* 3. è®©â€œå–æ¶ˆâ€æŒ‰é’®å•ç‹¬å æ®ä¸€æ•´è¡Œï¼Œå¹¶æ¢å¤å…¶ç‹¬ç«‹æ ·å¼ */
#message-actions-modal #cancel-message-action-btn {
    width: 100%; /* å¼ºåˆ¶å®½åº¦ä¸º100% */
    flex-basis: 100%; /* åœ¨flexå¸ƒå±€ä¸­ä¹Ÿç¡®ä¿å®ƒå æ»¡ä¸€è¡Œ */
    margin-top: 8px;
    border-radius: 8px;
    background-color: #f0f2f5;
    font-weight: 600;
}
/* â–²â–²â–² æ–°å¢CSSç²˜è´´ç»“æŸ â–²â–²â–² */
/* ä¿®å¤iOSè¾“å…¥æ¡†è‡ªåŠ¨æ”¾å¤§é—®é¢˜ (å¼ºåˆ¶ç‰ˆ) */
input, textarea, select {
    font-size: 16px !important;
}
/* â–¼â–¼â–¼ ã€å…¨æ–°ã€‘è¿™æ˜¯ä¸ºæ—¥è®°æ”¶è—åŠŸèƒ½æ·»åŠ çš„æ ·å¼ â–¼â–¼â–¼ */

/* æ”¶è—æŒ‰é’®æ¿€æ´»æ—¶çš„æ ·å¼ï¼ˆå¡«å……é»„è‰²ï¼‰ */
#favorite-diary-btn.active svg {
    fill: #ffc107; /* æ‚¨å¯ä»¥æ¢æˆä»»ä½•æ‚¨å–œæ¬¢çš„é¢œè‰² */
    color: #ffc107;
}

/* æ”¶è—å¡ç‰‡ä¸­æ—¥è®°æ ‡é¢˜çš„æ ·å¼ */
.favorite-item-card .diary-title {
    font-weight: 600;
    display: block;
    margin-bottom: 8px;
    font-size: 15px;
}

/* æ”¶è—å¡ç‰‡ä¸­æ—¥è®°å†…å®¹é¢„è§ˆçš„æ ·å¼ */
.favorite-item-card .diary-content-preview {
    font-size: 13px;
    opacity: 0.8;
    line-height: 1.6;
    
    /* å¤šè¡Œçœç•¥å·æ•ˆæœ */
    display: -webkit-box;
    -webkit-line-clamp: 3; /* æœ€å¤šæ˜¾ç¤º3è¡Œ */
    -webkit-box-orient: vertical;
    overflow: hidden;
}
/* â–¼â–¼â–¼ æŠŠè¿™æ®µCSSä»£ç ã€å®Œå…¨åˆ é™¤ã€‘â–¼â–¼â–¼ */
.favorite-item-card .diary-content-preview {
    font-size: 13px;
    opacity: 0.8;
    line-height: 1.6;
    
    /* å¤šè¡Œçœç•¥å·æ•ˆæœ */
    display: -webkit-box;
    -webkit-line-clamp: 3; /* æœ€å¤šæ˜¾ç¤º3è¡Œ */
    -webkit-box-orient: vertical;
    overflow: hidden;
}
/* â–²â–²â–² åˆ é™¤åˆ°è¿™é‡Œç»“æŸ â–²â–²â–² */
#npc-list-view {
    background-color: #f0f2f5;
}
#phone-screen.dark-mode #npc-list-view {
    background-color: #000;
}

/* â–¼â–¼â–¼ ã€å…¨æ–°ã€‘è¿™æ˜¯ä¸ºâ€œå›´è§‚ç¾¤èŠâ€æ“ä½œæŒ‰é’®æ·»åŠ çš„æ ·å¼ â–¼â–¼â–¼ */

/* 1. è®©â€œå›´è§‚ä¸­â€æ–‡å­—å’ŒæŒ‰é’®å®¹å™¨å‚ç›´æ’åˆ— */
#chat-lock-content {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 15px; /* åœ¨æ–‡å­—å’ŒæŒ‰é’®ä¹‹é—´å¢åŠ é—´è· */
}

/* 2. æŒ‰é’®çš„å®¹å™¨ï¼Œä½¿ç”¨Flexå¸ƒå±€è®©å®ƒä»¬æ°´å¹³æ’åˆ— */
.spectator-actions-container {
    display: flex;
    gap: 12px; /* æŒ‰é’®ä¹‹é—´çš„é—´è· */
    align-items: center;
}

/* 3. ä¸ºæ¬¡è¦æŒ‰é’®ï¼ˆé‡Roll/å‰ªè¾‘ï¼‰åˆ›å»ºä¸€ä¸ªæ–°æ ·å¼ */
#chat-lock-content .lock-action-btn.secondary {
    background-color: transparent; /* é€æ˜èƒŒæ™¯ */
    color: var(--accent-color);   /* ä½¿ç”¨ä¸»é¢˜è‰²æ–‡å­— */
    border: 1px solid var(--accent-color); /* åŒæ ·é¢œè‰²çš„è¾¹æ¡† */
    padding: 8px 18px; /* è°ƒæ•´å†…è¾¹è·ï¼Œè®©å®ƒæ¯”ä¸»æŒ‰é’®å°ä¸€ç‚¹ */
    font-size: 14px;
}
/* â–²â–²â–² æ–°å¢CSSç²˜è´´ç»“æŸ â–²â–²â–² */
/* â–¼â–¼â–¼ ã€å…¨æ–°ã€‘è¿™æ˜¯ä¸ºâ€œå›´è§‚ç¾¤èŠâ€SVGå›¾æ ‡æŒ‰é’®æ·»åŠ çš„æ ·å¼ â–¼â–¼â–¼ */

.spectator-actions-container .lock-action-btn.secondary svg {
    width: 20px;  /* è®¾ç½®å›¾æ ‡å®½åº¦ */
    height: 20px; /* è®¾ç½®å›¾æ ‡é«˜åº¦ */
    stroke: currentColor; /* å…³é”®ï¼šè®©å›¾æ ‡é¢œè‰²è‡ªåŠ¨ç»§æ‰¿æŒ‰é’®çš„æ–‡å­—é¢œè‰² */
}

/* â–²â–²â–² æ–°å¢CSSç²˜è´´ç»“æŸ â–²â–²â–² */
/* â–¼â–¼â–¼ ã€å…¨æ–°ã€‘éŸ³ä¹æ’­æ”¾å™¨èƒŒæ™¯æ ·å¼ â–¼â–¼â–¼ */

/* 1. è®©æ’­æ”¾å™¨çª—å£æˆä¸ºç›¸å¯¹å®šä½çš„å®¹å™¨ï¼Œä»¥ä¾¿ä¼ªå…ƒç´ å®šä½ */
.music-player-window {
    position: relative;
    /* (å¯é€‰) å¢åŠ ä¸€ä¸ªè½»å¾®çš„èƒŒæ™¯è’™ç‰ˆï¼Œè®©æ–‡å­—åœ¨äº®è‰²èƒŒæ™¯ä¸‹æ›´æ¸…æ™° */
    background-color: rgba(255, 255, 255, 0.75);
}

/* 2. è¿™å°±æ˜¯æˆ‘ä»¬çš„èƒŒæ™¯å±‚æ ¸å¿ƒæ ·å¼ */
.music-player-window::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    
    /* 3. ä½¿ç”¨CSSå˜é‡æ¥åŠ¨æ€è®¾ç½®èƒŒæ™¯å›¾ç‰‡ */
    background-image: var(--music-bg-image);
    background-size: cover;
    background-position: center;
    
    /* 4. æ·»åŠ è§†è§‰æ•ˆæœï¼šé«˜æ–¯æ¨¡ç³Šå’Œé™ä½äº®åº¦ï¼Œè¥é€ æ°›å›´æ„Ÿ */
    filter: blur(15px) brightness(0.8);
    
    /* 5. ç¡®ä¿èƒŒæ™¯åœ¨æœ€åº•å±‚ï¼Œä¸é®æŒ¡å†…å®¹ */
    z-index: -1;
    
    /* 6. è®©èƒŒæ™¯å±‚çš„åœ†è§’å’Œæ’­æ”¾å™¨çª—å£ä¿æŒä¸€è‡´ */
    border-radius: inherit; 
    
    /* 7. ä¸ºèƒŒæ™¯åˆ‡æ¢å¢åŠ å¹³æ»‘çš„è¿‡æ¸¡åŠ¨ç”» */
    transition: background-image 0.5s ease-in-out;
}

/* â–²â–²â–² æ–°å¢CSSç»“æŸ â–²â–²â–² */

/* â–¼â–¼â–¼ ã€å…¨æ–°V2.0 | æœ€ç»ˆä¿®å¤ç‰ˆã€‘èƒŒæ™¯æ¸…æ™°åº¦åˆ‡æ¢åŠŸèƒ½æ ·å¼ â–¼â–¼â–¼ */

/* 1. å½“æ’­æ”¾å™¨çª—å£æ‹¥æœ‰ .bg-clear è¿™ä¸ª class æ—¶ï¼Œè®©èƒŒæ™¯å˜å¾—æ¸…æ™° (æ­¤è§„åˆ™ä¸å˜) */
.music-player-window.bg-clear::before {
    filter: none;
}

/* 2. ã€æ ¸å¿ƒä¿®æ”¹ã€‘ä¸ºâ€œæ¸…â€å­—æŒ‰é’®è®¾ç½®æ–°çš„ã€ä¸å…¶å®ƒæ§åˆ¶æŒ‰é’®ä¸€è‡´çš„æ ·å¼ */
#toggle-blur-btn {
    /* ç§»é™¤æ‰€æœ‰å®šä½å±æ€§ */
    /* position: absolute; bottom: 95px; right: 20px; z-index: 55; */

    /* å¤ç”¨å…¶ä»–æŒ‰é’®çš„æ ·å¼ */
    background: none;
    border: none;
    font-size: 16px;
    font-weight: 600;
    cursor: pointer;
    color: #333;
    width: 44px;
    height: 44px;
    display: flex;
    justify-content: center;
    align-items: center;
    transition: all 0.2s ease;
    border-radius: 50%;
    
    /* ç»™ä¸€ä¸ªå’Œå…¶ä»–æŒ‰é’®ç›¸ä¼¼çš„æ·¡æ·¡èƒŒæ™¯ */
    background-color: rgba(0, 0, 0, 0.05);
}

/* 3. æŒ‰é’®æ¿€æ´»æ—¶çš„æ ·å¼ï¼ˆè¡¨ç¤ºå½“å‰æ˜¯æ¸…æ™°æ¨¡å¼ï¼‰ */
#toggle-blur-btn.active {
    background-color: var(--accent-color); /* ä¾‹å¦‚ï¼Œæ¿€æ´»æ—¶å˜ä¸ºä¸»é¢˜è‰² */
    color: white;
    box-shadow: 0 2px 5px rgba(0,0,0,0.1);
}
/* â–²â–²â–² æ–°å¢CSSç»“æŸ â–²â–²â–² */

/* â–¼â–¼â–¼ ã€å…¨æ–°ã€‘æ’­æ”¾å™¨å…¨å±åŠŸèƒ½æ ·å¼ â–¼â–¼â–¼ */

/* 1. å½“æ’­æ”¾å™¨çª—å£æ‹¥æœ‰ .fullscreen è¿™ä¸ª class æ—¶ï¼Œè®©å®ƒæ’‘æ»¡æ•´ä¸ªå±å¹• */
.music-player-window.fullscreen {
    width: 100%;
    height: 100%;
    max-height: 100%; /* è¦†ç›–å¯èƒ½å­˜åœ¨çš„ max-height é™åˆ¶ */
    border-radius: 0; /* å…¨å±æ—¶ç§»é™¤åœ†è§’ */
    transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1); /* è®©æ”¾å¤§ç¼©å°çš„åŠ¨ç”»æ›´æµç•… */
}

/* 2. å½“æ’­æ”¾å™¨å…¨å±æ—¶ï¼Œç§»é™¤å¤–éƒ¨å®¹å™¨çš„å†…è¾¹è·ï¼Œè®©æ’­æ”¾å™¨èƒ½çœŸæ­£è´´åˆå±å¹•è¾¹ç¼˜ */
#music-player-overlay.fullscreen-active {
    padding-top: 0;
    align-items: stretch; /* è®©æ’­æ”¾å™¨åœ¨å‚ç›´æ–¹å‘ä¸Šä¹Ÿèƒ½æ’‘æ»¡ */
}

/* 3. ã€æ ¸å¿ƒã€‘ä¸ºæ–°çš„å…¨å±åˆ‡æ¢æŒ‰é’®å®šä¹‰æ ·å¼ */
#toggle-fullscreen-btn {
    background: none;
    border: none;
    font-size: 22px; /* è®¾ç½®ä¸€ä¸ªåˆé€‚çš„å›¾æ ‡å¤§å° */
    cursor: pointer;
    color: #555;
    padding: 5px;
    line-height: 1;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: color 0.2s;
}
#toggle-fullscreen-btn:hover {
    color: #000;
}

/* 4. ã€æ ¸å¿ƒã€‘é€šè¿‡ CSS æ§åˆ¶æ”¾å¤§/ç¼©å°å›¾æ ‡çš„æ˜¾ç¤ºå’Œéšè— */
/* é»˜è®¤æƒ…å†µä¸‹ï¼Œåªæ˜¾ç¤ºâ€œæ”¾å¤§â€å›¾æ ‡ */
#toggle-fullscreen-btn .icon-minimize {
    display: none;
}
/* å½“æ’­æ”¾å™¨å¤„äºå…¨å±çŠ¶æ€æ—¶ï¼Œéšè—â€œæ”¾å¤§â€å›¾æ ‡ï¼Œæ˜¾ç¤ºâ€œç¼©å°â€å›¾æ ‡ */
.music-player-window.fullscreen #toggle-fullscreen-btn .icon-maximize {
    display: none;
}
.music-player-window.fullscreen #toggle-fullscreen-btn .icon-minimize {
    display: block;
}
/* â–²â–²â–² æ–°å¢CSSç»“æŸ â–²â–²â–² */

/* â–¼â–¼â–¼ ã€å…¨æ–°ã€‘æ’­æ”¾å™¨å…¨å±å¤´åƒæ˜¾ç¤ºåŠŸèƒ½æ ·å¼ â–¼â–¼â–¼ */

/* 1. å¤´åƒæ˜¾ç¤ºå®¹å™¨çš„æ ·å¼ */
#music-player-avatar-display {
    display: none; /* é»˜è®¤éšè— */
    width: 100%;
    padding: 15px 20px;
    box-sizing: border-box;
    justify-content: space-between; /* è®©ä¸¤ä¸ªå¤´åƒåˆ†å¸ƒåœ¨ä¸¤ç«¯ */
    align-items: center;
    border-bottom: 1px solid rgba(0, 0, 0, 0.1); /* æ·»åŠ ä¸€æ¡åˆ†å‰²çº¿ */
    margin-bottom: 10px;
}

/* 2. åªæœ‰å½“æ’­æ”¾å™¨å…¨å±ï¼Œå¹¶ä¸”è¯¥å®¹å™¨æœ‰ .visible ç±»æ—¶ï¼Œæ‰æ˜¾ç¤ºå®ƒ */
.music-player-window.fullscreen #music-player-avatar-display.visible {
    display: flex;
}

/* 3. å¤´åƒæœ¬èº«çš„æ ·å¼ */
.participant-display-avatar {
    width: 50px;
    height: 50px;
    border-radius: 50%;
    object-fit: cover;
    box-shadow: 0 2px 6px rgba(0,0,0,0.2);
}

/* 4. æ–°çš„â€œæ˜¾ç¤ºå¤´åƒâ€æŒ‰é’®çš„æ ·å¼ */
#show-avatars-btn {
    background: none;
    border: none;
    cursor: pointer;
    padding: 5px;
    display: none; /* é»˜è®¤åœ¨éå…¨å±æ¨¡å¼ä¸‹éšè— */
    align-items: center;
    justify-content: center;
    opacity: 0.6;
    transition: opacity 0.2s;
}

/* 5. åªæœ‰åœ¨å…¨å±æ¨¡å¼ä¸‹æ‰æ˜¾ç¤ºè¿™ä¸ªæŒ‰é’® */
.music-player-window.fullscreen #show-avatars-btn {
    display: flex;
}

#show-avatars-btn:hover {
    opacity: 1;
}

/* 6. å½“å¤´åƒæ­£åœ¨æ˜¾ç¤ºæ—¶ï¼Œè®©æŒ‰é’®ä¹Ÿé«˜äº® */
#show-avatars-btn.active {
    opacity: 1;
}
/* â–²â–²â–² æ–°å¢CSSç»“æŸ â–²â–²â–² */
/* â–¼â–¼â–¼ ã€å…¨æ–°ã€‘è¿™æ˜¯ä¸ºæ—¶åŒºæœç´¢æ¡†æ·»åŠ çš„æ ·å¼ â–¼â–¼â–¼ */
#time-zone-search-input {
    width: 100%;
    padding: 10px 12px;
    margin-bottom: 8px; /* å’Œä¸‹æ–¹çš„ä¸‹æ‹‰æ¡†æ‹‰å¼€ä¸€ç‚¹è·ç¦» */
    border: 1px solid var(--border-color);
    border-radius: 6px;
    box-sizing: border-box;
    font-size: 16px; /* é¿å…åœ¨iOSä¸Šè¾“å…¥æ—¶è‡ªåŠ¨æ”¾å¤§é¡µé¢ */
}
/* å¤œé—´æ¨¡å¼é€‚é… */
#phone-screen.dark-mode #time-zone-search-input {
    background-color: #1c1c1e;
    color: #ffffff;
    border-color: #38383a;
}
/* â–²â–²â–² æ–°å¢CSSç»“æŸ â–²â–²â–² */
/* â–¼â–¼â–¼ ã€å…¨æ–°ã€‘è¡¨æƒ…åŒ…æœç´¢æ æ ·å¼ â–¼â–¼â–¼ */

#sticker-search-container {
    padding: 10px 15px; /* åœ¨æœç´¢æ¡†å‘¨å›´ç•™å‡ºä¸€äº›å†…è¾¹è· */
    flex-shrink: 0; /* é˜²æ­¢è¢«å‹ç¼© */
    border-bottom: 1px solid var(--border-color); /* åœ¨ä¸‹æ–¹æ·»åŠ åˆ†å‰²çº¿ */
    background-color: var(--secondary-bg); /* ç¡®ä¿èƒŒæ™¯è‰²èƒ½é€‚é…å¤œé—´æ¨¡å¼ */
}

#sticker-search-input {
    width: 100%;
    padding: 10px 15px;
    font-size: 16px; /* é¿å…åœ¨iOSä¸Šè¾“å…¥æ—¶è‡ªåŠ¨æ”¾å¤§é¡µé¢ */
    border: 1px solid var(--border-color);
    border-radius: 18px; /* åœ†è§’çŸ©å½¢ */
    background-color: #f0f2f5; /* é»˜è®¤çš„æµ…ç°è‰²èƒŒæ™¯ */
    box-sizing: border-box;
    outline: none; /* ç§»é™¤é€‰ä¸­æ—¶çš„å¤–æ¡† */
    -webkit-appearance: none; /* ç§»é™¤iOSä¸Šçš„é»˜è®¤æ ·å¼ */
}

#sticker-search-input:focus {
    border-color: var(--accent-color); /* é€‰ä¸­æ—¶è¾¹æ¡†å˜ä¸ºä¸»é¢˜è‰² */
    background-color: var(--secondary-bg); /* é€‰ä¸­æ—¶èƒŒæ™¯å˜ä¸ºç™½è‰² */
}

/* å¤œé—´æ¨¡å¼é€‚é… */
#phone-screen.dark-mode #sticker-search-input {
    background-color: #2c2c2e;
    color: #f0f0f0;
    border-color: #38383a;
}
#phone-screen.dark-mode #sticker-search-input:focus {
    background-color: #38383a;
}
/* â–²â–²â–² æ–°å¢CSSç»“æŸ â–²â–²â–² */
/* â–¼â–¼â–¼ ã€å…¨æ–°ã€‘å¼•ç”¨è·³è½¬é«˜äº®æ•ˆæœ â–¼â–¼â–¼ */

/* 1. ä¸ºæ¶ˆæ¯æ°”æ³¡çš„å†…å®¹åŒºæ·»åŠ ä¸€ä¸ªå¹³æ»‘çš„èƒŒæ™¯è‰²è¿‡æ¸¡æ•ˆæœ */
.message-bubble .content {
    transition: background-color 0.5s ease-out;
}

/* 2. å®šä¹‰é«˜äº®æ—¶çš„èƒŒæ™¯è‰² */
/*    æˆ‘ä»¬ä½¿ç”¨ !important æ¥ç¡®ä¿å®ƒèƒ½è¦†ç›–æ‰æ‰€æœ‰ä¸»é¢˜çš„é»˜è®¤é¢œè‰² */
.message-bubble.highlighted .content {
    background-color: rgba(0, 123, 255, 0.2) !important;
}
/* â–²â–²â–² æ–°æ ·å¼ç²˜è´´ç»“æŸ â–²â–²â–²
/* â–¼â–¼â–¼ ã€å…¨æ–°ã€‘æ— é™æ»šåŠ¨åŠ è½½åŠ¨ç”» â–¼â–¼â–¼ */

.loader-container {
    display: flex;
    justify-content: center;
    align-items: center;
    padding: 10px 0;
    width: 100%;
    height: 44px; /* ç»™äºˆä¸€ä¸ªå›ºå®šé«˜åº¦æ¥é˜²æ­¢åŠ è½½æ—¶é¡µé¢è·³åŠ¨ */
    box-sizing: border-box;
}

.spinner {
    width: 24px;
    height: 24px;
    border: 3px solid rgba(0, 0, 0, 0.1); /* æ—‹è½¬è½¨é“çš„æµ…ç°è‰² */
    border-top-color: var(--accent-color); /* æ—‹è½¬éƒ¨åˆ†çš„é¢œè‰²ï¼Œä¼šè·Ÿéšä¸»é¢˜è‰²å˜åŒ– */
    border-radius: 50%;
    animation: spin 1s linear infinite; /* å¤ç”¨æ‚¨å·²æœ‰çš„ spin åŠ¨ç”» */
}

/* å¤œé—´æ¨¡å¼ä¸‹çš„é€‚é… */
#phone-screen.dark-mode .spinner {
    border: 3px solid rgba(255, 255, 255, 0.2);
    border-top-color: #fff; /* å¤œé—´æ¨¡å¼ä¸‹æ—‹è½¬éƒ¨åˆ†ä¸ºç™½è‰² */
}
/* â–²â–²â–² æ–°å¢CSSç»“æŸ â–²â–²â–² */
/* â–¼â–¼â–¼ ã€V2.1 | äº¤äº’ä¿®å¤ç‰ˆã€‘è¯·ç”¨è¿™ä¸€æ•´å—ä»£ç ï¼Œå®Œæ•´æ›¿æ¢ä» #reading-overlay åˆ° .reading-footer button:disabled çš„æ‰€æœ‰ç›¸å…³æ ·å¼ â–¼â–¼â–¼ */

/* 1. å¤–éƒ¨å®¹å™¨ï¼šæå‡ z-indexï¼Œç¡®ä¿å®ƒåœ¨é¡¶æ ä¹‹ä¸Š */
#reading-overlay {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    z-index: 150; /* é«˜äºé¡¶æ çš„ 100 */
    display: flex;
    justify-content: center;
    align-items: center;
    pointer-events: none; /* å…è®¸ç‚¹å‡»ç©¿é€èƒŒæ™¯ */
    display: none; /* é»˜è®¤éšè— */
}

/* 2. ä¸»çª—å£æ ·å¼ */
#reading-window {
    width: 90%;
    max-width: 340px;
    height: 60vh;
    max-height: 480px;
    background-color: rgba(255, 255, 255, 0.7);
    backdrop-filter: blur(20px);
    -webkit-backdrop-filter: blur(20px);
    border-radius: 18px;
    box-shadow: 0 8px 32px rgba(31, 38, 135, 0.2);
    border: 1px solid rgba(255, 255, 255, 0.18);
    display: flex;
    flex-direction: column;
    pointer-events: auto; /* çª—å£æœ¬èº«å¯ä»¥äº¤äº’ */
    position: absolute; /* æ”¹ä¸º absolute ä»¥æ”¯æŒæ‹–åŠ¨ */
    /* åˆå§‹å±…ä¸­å®šä½ç”±JSæ§åˆ¶ï¼Œè¿™é‡Œä¸å†è®¾ç½® */
    transition: transform 0.3s ease, opacity 0.3s ease, visibility 0s 0.3s; /* æ·»åŠ å¹³æ»‘çš„è¿‡æ¸¡åŠ¨ç”» */
}
#phone-screen.dark-mode #reading-window {
    background-color: rgba(40, 40, 42, 0.7);
}

/* â–¼â–¼â–¼ è¯·ç”¨è¿™æ•´å—ä»£ç ï¼Œå®Œæ•´æ›¿æ¢æ—§çš„ .reading-header å’Œ #reading-title æ ·å¼ â–¼â–¼â–¼ */

/* 3. å¤´éƒ¨æ ·å¼ï¼Œä½œä¸ºâ€œæ‹–åŠ¨æŠŠæ‰‹â€ */

.reading-header {
    cursor: move;
    user-select: none;
    -webkit-user-select: none;
    flex-shrink: 0;
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 12px 15px;
    border-bottom: 1px solid var(--border-color);
    gap: 10px;
    /* æ–°å¢ï¼šå¼ºåˆ¶ä¸æ¢è¡Œï¼Œä½œä¸ºåŒé‡ä¿é™© */
    flex-wrap: nowrap;
}

#reading-title {
    font-weight: 600;
    /* æ ¸å¿ƒï¼šè®©æ ‡é¢˜å æ®æ‰€æœ‰å¯ç”¨ç©ºé—´ï¼Œä½†å…è®¸æ”¶ç¼© */
    flex: 1;
    min-width: 0;
    /* ä»¥ä¸‹ä¸‰è¡Œè´Ÿè´£å®ç°çœç•¥å·æ•ˆæœ */
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
}

.reading-controls {
    /* å…³é”®ï¼šå‘Šè¯‰æŒ‰é’®å®¹å™¨ç»å¯¹ä¸è¦è¢«å‹ç¼© */
    flex-shrink: 0;
}

/* â–²â–²â–² æ›¿æ¢ç»“æŸ â–²â–²â–² */
.reading-controls button {
    background: none; border: none; color: var(--text-secondary); padding: 4px 8px;
    border-radius: 4px; cursor: pointer; font-size: 14px; transition: background-color 0.2s;
}
.reading-controls button:hover {
    background-color: rgba(0,0,0,0.1);
}
#minimize-reading-btn {
    font-weight: bold; font-size: 16px; line-height: 1;
}

/* 4. ã€æ ¸å¿ƒä¿®å¤ã€‘æœ€å°åŒ–åçš„çŠ¶æ€ï¼šä½¿å…¶é€æ˜ã€ç¼©å°å¹¶ä¸å¯äº¤äº’ */
#reading-window.minimized {
    transform: scale(0.8); /* ç¼©å°æ•ˆæœ */
    opacity: 0;           /* é€æ˜æ•ˆæœ */
    pointer-events: none; /* ç¦æ­¢äº¤äº’ */
    visibility: hidden;   /* å½»åº•éšè— */
}

/* 5. ã€æ ¸å¿ƒä¿®å¤ã€‘æœ€å°åŒ–åç”¨äºâ€œæ¢å¤â€çš„å°çƒï¼Œæ”¹ä¸ºå±å¹•å±…ä¸­ */
#reading-restore-btn {
    position: absolute;
    /* --- æ ¸å¿ƒä¿®æ”¹1ï¼šä»å±…ä¸­æ”¹ä¸ºé å³ --- */
    top: 50%;
    right: 15px; /* è·ç¦»å³ä¾§è¾¹ç¼˜15åƒç´  */
    /* ã€å…³é”®ã€‘åªåœ¨Yè½´ä¸Šå‚ç›´å±…ä¸­ï¼Œä¸å†éœ€è¦Xè½´çš„å¹³ç§» */
    transform: translateY(-50%); 
    /* --- ä¿®æ”¹ç»“æŸ --- */
    width: 50px; 
    height: 50px;
    background-color: rgba(255, 255, 255, 0.8);
    backdrop-filter: blur(10px);
    -webkit-backdrop-filter: blur(10px);
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 28px; 
    cursor: move; 
    box-shadow: 0 4px 10px rgba(0,0,0,0.15);
    pointer-events: auto; 
    z-index: 160; 
    transition: transform 0.2s; 
}
#reading-restore-btn:active {
    /* ã€æ ¸å¿ƒä¿®æ”¹2ã€‘ä¿®å¤ç‚¹å‡»æ—¶çš„ä½ç§»é—®é¢˜ */
    transform: translateY(-50%) scale(0.95);
}
#phone-screen.dark-mode #reading-restore-btn {
    background-color: rgba(50, 50, 52, 0.8);
}

/* 6. å†…å®¹å’Œé¡µè„šæ ·å¼ (ä¿æŒä¸å˜) */
#reading-content {
    flex-grow: 1; 
    overflow-y: auto; 
    padding: 15px;
    font-size: 15px; 
    line-height: 1.8;
    /* â–¼â–¼â–¼ æ ¸å¿ƒæ–°å¢ â–¼â–¼â–¼ */
    white-space: pre-wrap; /* ä¿æŒæ¢è¡Œç¬¦ï¼ŒåŒæ—¶å…è®¸é•¿å•è¯è‡ªåŠ¨æ¢è¡Œ */
    word-break: break-word;  /* å¼ºåˆ¶é•¿å•è¯æˆ–URLæ–­å¼€ï¼Œé˜²æ­¢æ’‘ç ´å¸ƒå±€ */
    /* â–²â–²â–² æ–°å¢ç»“æŸ â–²â–²â–² */
}
.reading-footer {
    flex-shrink: 0; display: flex; justify-content: space-between; align-items: center;
    padding: 12px 15px; border-top: 1px solid var(--border-color);
}
#page-indicator {
    font-size: 14px; 
    color: var(--text-secondary);
    cursor: pointer; /* æ·»åŠ æ‰‹å‹å…‰æ ‡ï¼Œæç¤ºç”¨æˆ·å¯ä»¥ç‚¹å‡» */
    transition: color 0.2s;
}
#page-indicator:hover {
    color: var(--accent-color); /* é¼ æ ‡æ‚¬åœæ—¶å˜è‰² */
}
.reading-footer button {
    padding: 6px 15px; border-radius: 15px; border: none;
    background-color: var(--accent-color); color: white; cursor: pointer;
}
.reading-footer button:disabled {
    background-color: #ccc;
}
#phone-screen.dark-mode .reading-footer button:disabled {
    background-color: #555;
}

/* â–²â–²â–² V2.1 CSS æ›¿æ¢ç»“æŸ â–²â–²â–² */
/* â–¼â–¼â–¼ ã€å…¨æ–°ã€‘è¿™æ˜¯ä¸ºä¹¦åº“æœç´¢åŠŸèƒ½æ·»åŠ çš„æ ·å¼ â–¼â–¼â–¼ */
#reading-library-search-container {
    padding: 10px 15px;
    border-bottom: 1px solid var(--border-color);
    flex-shrink: 0; /* é˜²æ­¢è¢«å‹ç¼© */
}
#reading-library-search-input {
    width: 100%;
    padding: 10px 12px;
    border: 1px solid var(--border-color);
    border-radius: 8px;
    box-sizing: border-box;
    font-size: 16px; /* é¿å…åœ¨iOSä¸Šè¾“å…¥æ—¶è‡ªåŠ¨æ”¾å¤§é¡µé¢ */
    -webkit-appearance: none; /* ç§»é™¤iOSä¸Šçš„é»˜è®¤æ ·å¼ */
}
#phone-screen.dark-mode #reading-library-search-input {
    background-color: #2c2c2e;
    color: #f0f0f0;
    border-color: #38383a;
}
/* â–²â–²â–² æ–°å¢CSSç»“æŸ â–²â–²â–² */
/* â–¼â–¼â–¼ ã€å…¨æ–°ã€‘è¯­éŸ³æ¶ˆæ¯ç»„ä»¶æ ·å¼ â–¼â–¼â–¼ */

.voice-message-body {
    display: flex;
    align-items: center;
    cursor: pointer;
    min-width: 80px;
    max-width: 220px;
    padding: 8px 12px;
}
.message-bubble.user .voice-message-body {
    color: #1a3d00;
    flex-direction: row-reverse;
}
.message-bubble.ai .voice-message-body {
    color: var(--text-primary);
}

.voice-play-btn {
    width: 28px;
    height: 28px;
    border-radius: 50%;
    border: none;
    background-color: rgba(0, 0, 0, 0.1);
    color: currentColor;
    font-size: 16px;
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    flex-shrink: 0;
    transition: background-color 0.2s;
}
.voice-play-btn:hover {
    background-color: rgba(0, 0, 0, 0.2);
}

.voice-spinner {
    width: 20px;
    height: 20px;
    border: 2px solid rgba(0, 0, 0, 0.2);
    border-top-color: var(--accent-color);
    border-radius: 50%;
    animation: spin 1s linear infinite;
    display: none; /* é»˜è®¤éšè— */
    margin: 4px;
}

.voice-duration {
    font-size: 14px;
    font-weight: 500;
    margin: 0 10px;
    flex-shrink: 0;
}
.message-bubble.user .voice-duration {
    color: #3e6224;
}

/* â–²â–²â–² æ–°å¢CSSç»“æŸ â–²â–²â–² */

/* â–¼â–¼â–¼ ã€å…¨æ–°ã€‘è¿™æ˜¯ä¸ºä¸»å±å¹•ç¬¬äºŒå±æ·»åŠ çš„æ‹ç«‹å¾—å°ç»„ä»¶æ ·å¼ â–¼â–¼â–¼ */

/* 1. å°ç»„ä»¶æ€»å®¹å™¨ */
.polaroid-widget-container {
    width: 100%;
    display: flex;
    flex-direction: column;
    align-items: center;
    margin-bottom: 30px; /* å’Œä¸‹æ–¹çš„Appå›¾æ ‡æ‹‰å¼€è·ç¦» */
    flex-shrink: 0;
    
    /* --- â–¼â–¼â–¼ æ ¸å¿ƒä¿®æ”¹å°±åœ¨è¿™é‡Œ â–¼â–¼â–¼ --- */
    margin-top: 20px; /* æ·»åŠ å’Œç¬¬ä¸€å±åŒæ ·çš„é¡¶éƒ¨å¤–è¾¹è· */
    /* --- â–²â–²â–² ä¿®æ”¹ç»“æŸ â–²â–²â–² --- */
}

/* 2. ä¸‰å¼ ç…§ç‰‡çš„å®¹å™¨ */
.polaroid-photos {
    display: flex;
    justify-content: center;
    align-items: center;
    gap: 5px; /* ç…§ç‰‡ä¹‹é—´çš„è½»å¾®é—´è· */
}

/* 3. å•å¼ æ‹ç«‹å¾—ç…§ç‰‡çš„æ ·å¼ */
.polaroid-photo {
    background-color: white;
    padding: 8px 8px 15px 8px; /* é¡¶éƒ¨å’Œå·¦å³8pxï¼Œåº•éƒ¨15pxï¼Œæ¨¡æ‹Ÿæ‹ç«‹å¾—çš„ç™½è¾¹ */
    border-radius: 4px;
    box-shadow: 0 5px 12px rgba(0, 0, 0, 0.2); /* æ›´æŸ”å’Œçš„é˜´å½± */
    transition: transform 0.25s cubic-bezier(0.4, 0, 0.2, 1), box-shadow 0.25s;
    width: 80px; /* è®¾ç½®ä¸€ä¸ªå›ºå®šå®½åº¦ */
    flex-shrink: 0;
}
.polaroid-photo:hover {
    transform: scale(1.1) rotate(0deg) !important; /* é¼ æ ‡æ‚¬åœæ—¶æ”¾å¤§å¹¶æ‘†æ­£ */
    box-shadow: 0 8px 20px rgba(0, 0, 0, 0.25);
    z-index: 10; /* ç¡®ä¿æ‚¬åœçš„ç…§ç‰‡åœ¨æœ€ä¸Šå±‚ */
}

/* 4. æ‹ç«‹å¾—å†…éƒ¨çš„å›¾ç‰‡ */
.polaroid-photo img {
    width: 100%;
    display: block;
    aspect-ratio: 1 / 1; /* ä¿æŒå›¾ç‰‡ä¸ºæ­£æ–¹å½¢ */
    object-fit: cover;
}

/* 5. å°ç»„ä»¶æ ‡é¢˜ */
.polaroid-widget-title {
    margin-top: 15px;
    font-size: 13px;
    font-weight: 500;
    color: white; /* ä¸ä¸»å±å¹•å…¶ä»–æ–‡å­—é¢œè‰²ç»Ÿä¸€ */
    text-shadow: 0 1px 3px rgba(0,0,0,0.4); /* ä¸ä¸»å±å¹•å…¶ä»–æ–‡å­—é˜´å½±ç»Ÿä¸€ */
}

/* â–²â–²â–² æ–°å¢CSSç²˜è´´ç»“æŸ â–²â–²â–² */
/* â–¼â–¼â–¼ è¯·å°†è¿™æ®µæ–°æ ·å¼ç²˜è´´åˆ° <style> çš„æœ«å°¾ â–¼â–¼â–¼ */

#page-2-app-container {
    display: grid;
    /* --- The core change is on this line --- */
    grid-template-columns: 155px 1fr; /* Set a fixed width for the left widget */
    gap: 15px;
    width: 100%;
    padding-top: 20px;
    align-items: start;
}
/* 2. å³ä¾§ 2x2 å°ç»„ä»¶çš„ç½‘æ ¼å®¹å™¨ */
.app-subgrid {
    display: grid;
    grid-template-columns: 1fr 1fr; /* å†…éƒ¨æ˜¯2åˆ—å‡åˆ† */
    gap: 15px; /* å°ç»„ä»¶ä¹‹é—´çš„é—´è· */
}

/* 3. å·¦ä¾§å¤§ç»„ä»¶çš„æ ·å¼ */
.large-widget {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 8px; /* å›¾ç‰‡å’Œæ–‡å­—çš„é—´è· */
}
.large-widget-img {
    width: 100%;
    aspect-ratio: 1 / 1; /* ä¿æŒæ­£æ–¹å½¢ */
    border-radius: 22px; /* iOSé£æ ¼åœ†è§’ */
    object-fit: cover;
    box-shadow: 0 5px 15px rgba(0,0,0,0.1);
}
.large-widget-label {
    color: white;
    font-size: 13px;
    font-weight: 500;
    text-shadow: 0 1px 3px rgba(0,0,0,0.4);
}

/* 4. å³ä¾§å°ç»„ä»¶çš„é€šç”¨æ ·å¼ */
.small-widget {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 8px;
}
/* æ–°å¢ä¸€ä¸ªåŒ…è£…å™¨ï¼Œç”¨äºæ§åˆ¶å°å›¾æ ‡çš„å¤§å°å’Œå±…ä¸­ */
.small-widget-icon-wrapper {
    width: 55px;
    height: 55px;
    display: flex;
    align-items: center;
    justify-content: center;
}
.small-widget-img {
    /* æ ¸å¿ƒä¿®æ”¹ï¼šç§»é™¤ max-width å’Œ max-height */
    width: 100%;     /* è®©å›¾ç‰‡å®½åº¦å¡«æ»¡ 55px çš„çˆ¶å®¹å™¨ */
    height: 100%;    /* è®©å›¾ç‰‡é«˜åº¦å¡«æ»¡ 55px çš„çˆ¶å®¹å™¨ */
    object-fit: cover; /* ç¡®ä¿å›¾ç‰‡ä¸å˜å½¢åœ°å¡«æ»¡ */
    border-radius: 14px; /* æ¨èï¼šä¸ºå›¾æ ‡æœ¬èº«ä¹ŸåŠ ä¸Šåœ†è§’ï¼Œä¸Dockæ å›¾æ ‡é£æ ¼ç»Ÿä¸€ */
}
.small-widget-label {
    color: white;
    font-size: 13px;
    font-weight: 500;
    text-shadow: 0 1px 3px rgba(0,0,0,0.4);
}
/* â–²â–²â–² æ–°å¢CSSç²˜è´´ç»“æŸ â–²â–²â–² */
/* â–¼â–¼â–¼ ã€å…¨æ–°ã€‘è¿™æ˜¯è®©ä¸»å±å¹•ç¬¬äºŒå±å°ç»„ä»¶å­—ä½“å˜é»‘çš„æ ·å¼ â–¼â–¼â–¼ */

#page-2-app-container .small-widget-label {
    color: #000 !important;       /* æ ¸å¿ƒï¼šå¼ºåˆ¶å°†æ–‡å­—é¢œè‰²è®¾ä¸ºé»‘è‰² */
    text-shadow: none !important; /* æ¨èï¼šç§»é™¤æ–‡å­—é˜´å½±ï¼Œè®©é»‘è‰²å­—ä½“æ›´æ¸…æ™° */
}

/* â–²â–²â–² æ–°å¢CSSç»“æŸ â–²â–²â–² */
/* â–¼â–¼â–¼ ã€å…¨æ–°ã€‘å¿ƒåŠ¨æ—¥å¸¸ - éŸ³ä¹ä¸­å¿ƒé¡µé¢æ ·å¼ â–¼â–¼â–¼ */

#heartbeat-music-screen {
    background-color: #f5f6f8;
}

#phone-screen.dark-mode #heartbeat-music-screen {
    background-color: #1c1c1e;
}

.music-search-container {
    display: flex;
    gap: 10px;
    flex-shrink: 0;
}

#bgm-search-input {
    flex-grow: 1;
    padding: 12px 15px;
    border: 1px solid var(--border-color);
    border-radius: 8px;
    font-size: 15px;
    background-color: var(--secondary-bg);
    color: var(--text-primary);
}

#bgm-search-btn {
    padding: 0 20px;
    border: none;
    background-color: var(--accent-color);
    color: white;
    border-radius: 8px;
    font-weight: 500;
    cursor: pointer;
}

.music-results-list {
    background-color: var(--secondary-bg);
    border-radius: 12px;
    min-height: 150px;
    max-height: 250px;
    overflow-y: auto;
    border: 1px solid var(--border-color);
}

.music-results-list .placeholder {
    text-align: center;
    color: var(--text-secondary);
    padding: 40px 20px;
    font-size: 14px;
}

.music-search-item, .current-playlist-item {
    display: flex;
    align-items: center;
    gap: 12px;
    padding: 10px 15px;
    border-bottom: 1px solid var(--border-color);
    cursor: pointer;
    transition: background-color 0.2s;
}
.music-search-item:last-child, .current-playlist-item:last-child {
    border-bottom: none;
}
.music-search-item:hover, .current-playlist-item:hover {
    background-color: rgba(0, 123, 255, 0.05);
}

.item-cover {
    width: 40px;
    height: 40px;
    border-radius: 6px;
    object-fit: cover;
    flex-shrink: 0;
}

.item-info {
    flex-grow: 1;
    min-width: 0;
}

.item-info .title {
    font-weight: 500;
    color: var(--text-primary);
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
}

.item-info .artist {
    font-size: 12px;
    color: var(--text-secondary);
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
}

.item-actions .delete-bgm-btn {
    color: #ff3b30;
    background: none;
    border: none;
    font-size: 20px;
    cursor: pointer;
    padding: 5px;
}

.current-playlist-container .playlist-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 8px;
}

.current-playlist-container .playlist-header h4 {
    margin: 0;
    font-size: 16px;
    color: var(--text-primary);
}

.current-playlist-container .playlist-header .clear-btn {
    font-size: 12px;
    color: var(--text-secondary);
    background: none;
    border: none;
    cursor: pointer;
}

/* â–¼â–¼â–¼ ã€å…¨æ–°ã€‘éŸ³ä¹æ’­æ”¾è¿›åº¦æ¡æ ·å¼ â–¼â–¼â–¼ */
.music-player-bar {
    position: relative;
    bottom: 0;
    left: 0;
    right: 0;
    background: linear-gradient(180deg, rgba(255,255,255,0.95) 0%, rgba(255,255,255,0.98) 100%);
    backdrop-filter: blur(20px);
    -webkit-backdrop-filter: blur(20px);
    padding: 12px 20px 16px;
    box-shadow: 0 -2px 20px rgba(0,0,0,0.1);
    border-top: 1px solid rgba(0,0,0,0.05);
    z-index: 999;
    display: none;
    margin-top: 20px;
    border-radius: 12px;
}

.music-player-bar.active {
    display: block;
}

#phone-screen.dark-mode .music-player-bar {
    background: linear-gradient(180deg, rgba(28,28,30,0.95) 0%, rgba(28,28,30,0.98) 100%);
    border-top: 1px solid rgba(255,255,255,0.1);
}

.music-player-info {
    display: flex;
    align-items: center;
    gap: 12px;
    margin-bottom: 10px;
}

.music-player-cover {
    width: 45px;
    height: 45px;
    border-radius: 8px;
    object-fit: cover;
    box-shadow: 0 2px 8px rgba(0,0,0,0.15);
}

.music-player-details {
    flex: 1;
    min-width: 0;
}

.music-player-title {
    font-size: 14px;
    font-weight: 600;
    color: var(--text-primary);
    margin: 0 0 3px 0;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
}

.music-player-artist {
    font-size: 12px;
    color: var(--text-secondary);
    margin: 0;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
}

.music-player-controls {
    display: flex;
    gap: 15px;
    align-items: center;
}

.music-control-btn {
    background: none;
    border: none;
    cursor: pointer;
    padding: 8px;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: all 0.2s ease;
}

.music-control-btn:hover {
    background-color: rgba(0,0,0,0.05);
    transform: scale(1.05);
}

#phone-screen.dark-mode .music-control-btn:hover {
    background-color: rgba(255,255,255,0.1);
}

.music-control-btn:active {
    transform: scale(0.95);
}

.music-control-btn svg {
    width: 24px;
    height: 24px;
    stroke: var(--text-primary);
    fill: none;
    stroke-width: 2;
    stroke-linecap: round;
    stroke-linejoin: round;
}

.music-control-btn.play-pause svg {
    width: 28px;
    height: 28px;
}

.music-progress-container {
    display: flex;
    align-items: center;
    gap: 10px;
}

.music-time {
    font-size: 11px;
    color: var(--text-secondary);
    min-width: 35px;
    font-variant-numeric: tabular-nums;
}

.music-progress-bar {
    flex: 1;
    height: 4px;
    background-color: rgba(0,0,0,0.1);
    border-radius: 2px;
    position: relative;
    cursor: pointer;
    overflow: hidden;
}

#phone-screen.dark-mode .music-progress-bar {
    background-color: rgba(255,255,255,0.2);
}

.music-progress-fill {
    height: 100%;
    background: linear-gradient(90deg, var(--accent-color) 0%, #ff6ba3 100%);
    border-radius: 2px;
    width: 0%;
    transition: width 0.1s linear;
    position: relative;
}

.music-progress-fill::after {
    content: '';
    position: absolute;
    right: -6px;
    top: 50%;
    transform: translateY(-50%);
    width: 12px;
    height: 12px;
    background-color: white;
    border-radius: 50%;
    box-shadow: 0 2px 6px rgba(0,0,0,0.2);
    opacity: 0;
    transition: opacity 0.2s;
}

.music-progress-bar:hover .music-progress-fill::after {
    opacity: 1;
}
/* â–²â–²â–² éŸ³ä¹æ’­æ”¾è¿›åº¦æ¡æ ·å¼ç»“æŸ â–²â–²â–² */

/* â–²â–²â–² éŸ³ä¹ä¸­å¿ƒé¡µé¢æ ·å¼ç»“æŸ â–²â–²â–² */
        /* â–¼â–¼â–¼ å¯çˆ±çš„è‡ªå®šä¹‰å¼¹çª—æ ·å¼ â–¼â–¼â–¼ */
        .cute-modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 10000;
            backdrop-filter: blur(5px);
        }

        .cute-modal {
            background: linear-gradient(135deg, #ffffff 0%, #fef7f7 100%);
            border: 3px solid #ff85b3;
            border-radius: 20px;
            padding: 30px;
            max-width: 400px;
            width: 90%;
            box-shadow: 0 10px 30px rgba(255, 133, 179, 0.3);
            position: relative;
            animation: cuteModalSlideIn 0.3s ease-out;
        }

        .cute-modal::before {
            content: '';
            position: absolute;
            top: -10px;
            left: 50%;
            transform: translateX(-50%);
            width: 20px;
            height: 20px;
            background: #ff85b3;
            border-radius: 50%;
            box-shadow: 0 0 10px rgba(255, 133, 179, 0.5);
        }

        .cute-modal-title {
            font-size: 18px;
            font-weight: 600;
            color: #ff85b3;
            text-align: center;
            margin-bottom: 20px;
            text-shadow: 0 1px 2px rgba(255, 133, 179, 0.2);
        }

        .cute-modal-input {
            width: 100%;
            padding: 12px 16px;
            border: 2px solid #ffb3d1;
            border-radius: 12px;
            font-size: 16px;
            color: #333;
            background: #fff;
            transition: all 0.3s ease;
            box-sizing: border-box;
        }

        .cute-modal-input:focus {
            outline: none;
            border-color: #ff85b3;
            box-shadow: 0 0 0 3px rgba(255, 133, 179, 0.2);
        }

        .cute-modal-buttons {
            display: flex;
            gap: 15px;
            margin-top: 20px;
            justify-content: center;
        }

        .cute-modal-btn {
            padding: 10px 24px;
            border: none;
            border-radius: 12px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            min-width: 80px;
        }

        .cute-modal-btn.confirm {
            background: linear-gradient(135deg, #ff85b3 0%, #ff6ba3 100%);
            color: white;
            box-shadow: 0 4px 15px rgba(255, 133, 179, 0.4);
        }

        .cute-modal-btn.confirm:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(255, 133, 179, 0.5);
        }

        .cute-modal-btn.cancel {
            background: linear-gradient(135deg, #f0f0f0 0%, #e0e0e0 100%);
            color: #666;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
        }

        .cute-modal-btn.cancel:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(0, 0, 0, 0.15);
        }

        @keyframes cuteModalSlideIn {
            from {
                opacity: 0;
                transform: scale(0.8) translateY(-20px);
            }
            to {
                opacity: 1;
                transform: scale(1) translateY(0);
            }
        }

        .cute-modal-close {
            position: absolute;
            top: 15px;
            right: 15px;
            width: 30px;
            height: 30px;
            border: none;
            background: #ffb3d1;
            border-radius: 50%;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 18px;
            transition: all 0.3s ease;
        }

        .cute-modal-close:hover {
            background: #ff85b3;
            transform: scale(1.1);
        }
        /* â–²â–²â–² å¯çˆ±å¼¹çª—æ ·å¼ç»“æŸ â–²â–²â–² */

        /* â–¼â–¼â–¼ ã€å…¨æ–°ã€‘å¿ƒåŠ¨æ—¥å¸¸åŠŸèƒ½æ ·å¼ (V3.1 | æ–°å¢èƒŒæ™¯æ›´æ¢) â–¼â–¼â–¼ */

        /* --- 1. å¼€å±é¡µé¢æ ·å¼ --- */
        #heartbeat-splash-screen {
            background: linear-gradient(135deg, #ffdde1, #ee9ca7);
            display: flex;
            justify-content: center;
            align-items: center;
        }
        .heartbeat-splash-content {
            text-align: center;
            color: white;
            text-shadow: 0 2px 5px rgba(0,0,0,0.2);
        }
        .pulsing-heart {
            font-size: 60px;
            animation: pulse-heart 1.5s infinite ease-in-out;
        }
        .heartbeat-splash-content h2 {
            font-size: 28px;
            margin: 15px 0 5px;
        }
        .heartbeat-splash-content p {
            font-size: 16px;
            opacity: 0.8;
        }
        @keyframes pulse-heart {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.2); }
        }

        /* --- 2. AIä¼´ä¾£é€‰æ‹©é¡µé¢æ ·å¼ --- */
        #heartbeat-ai-selection-list .contact-picker-item {
            cursor: pointer;
        }

        /* --- 3. å¿ƒåŠ¨ç©ºé—´ä¸»ç•Œé¢æ ·å¼ --- */
        #heartbeat-main-screen {
            color: #333;
            display: flex;
            flex-direction: column;
        }
        #heartbeat-main-background {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: url('https://i.postimg.cc/W34Yj1sx/image.jpg') center/cover no-repeat;
            z-index: 0;
        }
        .heartbeat-main-content {
            position: relative;
            z-index: 1;
            display: flex;
            flex-direction: column;
            height: 100%;
            padding: 0 15px;
            padding-top: var(--safe-area-inset-top);
            padding-bottom: var(--safe-area-inset-bottom);
            box-sizing: border-box;
        }
        .heartbeat-header {
            flex-shrink: 0;
            display: flex;
            justify-content: space-between;
            align-items: center;
            color: white;
            padding: 30px 5px 10px 5px;
            height: 50px;
            position: relative;
        }
        .heartbeat-back-btn {
            font-size: 32px;
            font-weight: bold;
            cursor: pointer;
            width: 40px;
            text-align: left;
            color: white;
            text-shadow: 0 1px 3px rgba(0,0,0,0.3);
            transition: color 0.3s ease;
        }
        .heartbeat-back-btn svg {
            color: inherit;
            transition: color 0.3s ease;
        }
        .heartbeat-avatars {
            display: flex;
            align-items: center;
            position: absolute;
            left: 50%;
            transform: translateX(-50%);
            top: 30px;
        }
        .heartbeat-avatars img {
            width: 36px;
            height: 36px;
            border-radius: 50%;
            border: 2px solid white;
            object-fit: cover;
            box-shadow: 0 2px 5px rgba(0,0,0,0.2);
        }
        .heartbeat-avatars img:last-child {
            margin-left: -5px;
        }
        .heartbeat-actions {
            width: 40px;
            text-align: right;
        }
        .heartbeat-actions svg {
            color: white;
            filter: drop-shadow(0 1px 3px rgba(0,0,0,0.3));
            transition: color 0.3s ease;
        }
        .heartbeat-hearts-display {
            text-align: center;
            margin-top: 10px;
            font-size: 20px;
            opacity: 0.9;
            color: white;
            text-shadow: 0 1px 3px rgba(0,0,0,0.3);
        }
        .heartbeat-hearts-display span {
            margin: 0 2px;
        }
        .heartbeat-days-counter {
            position: relative; /* å…³é”®ï¼šä¸ºæŒ‰é’®æä¾›å®šä½é”šç‚¹ */
            text-align: center;
            margin: 10px 0;
            padding-bottom: 30px; /* ä¸ºæŒ‰é’®ç•™å‡ºç©ºé—´ */
            color: white;
            text-shadow: 0 2px 8px rgba(0,0,0,0.4);
            transition: color 0.3s ease;
        }
        .counter-title {
            font-size: 16px;
            opacity: 0.9;
        }
        .counter-days {
            font-size: 64px;
            font-weight: 200;
            line-height: 1.1;
        }
        .counter-days span {
            font-weight: 600;
        }
        /* ã€ã€ã€æ–°å¢ã€‘ã€‘ã€‘æ›´æ¢èƒŒæ™¯æŒ‰é’®æ ·å¼ */
        .change-heartbeat-bg-btn {
            position: absolute;
            bottom: 0;
            left: 50%;
            transform: translateX(-50%);
            background-color: rgba(255, 255, 255, 0.2);
            backdrop-filter: blur(5px);
            -webkit-backdrop-filter: blur(5px);
            color: white;
            border: 1px solid rgba(255, 255, 255, 0.3);
            border-radius: 15px;
            padding: 6px 14px;
            font-size: 12px;
            font-weight: 500;
            cursor: pointer;
            transition: background-color 0.2s ease;
        }
        .change-heartbeat-bg-btn:hover {
            background-color: rgba(255, 255, 255, 0.3);
        }

        .heartbeat-spacer {
            flex-grow: 1;
            min-height: 50px;
        }

        .album-bubble {
            position: fixed;
            bottom: 301px;
            left: 36px;
            width: 50px;
            height: 50px;
            border-radius: 50%;
            background-color: rgba(255, 255, 255, 0.9);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            display: flex;
            justify-content: center;
            align-items: center;
            box-shadow: 0 2px 10px rgba(0,0,0,0.15);
            cursor: pointer;
            transition: transform 0.2s ease, box-shadow 0.2s ease;
            z-index: 10;
        }

        /* å“åº”å¼ä¼˜åŒ–ï¼šç¡®ä¿åœ¨ä¸åŒå±å¹•å°ºå¯¸ä¸‹ä½ç½®å›ºå®š */
        @media (max-width: 480px) {
            .album-bubble {
                bottom: 100px;
                left: 15px;
                width: 45px;
                height: 45px;
            }
        }

        @media (min-width: 768px) {
            .album-bubble {
                bottom: 140px;
                left: 30px;
                width: 55px;
                height: 55px;
            }
        }

        .album-bubble:hover {
            transform: scale(1.05);
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
        }

        .album-bubble:active {
            transform: scale(0.95);
        }

        .album-bubble svg {
            color: #F48FB1;
            width: 20px;
            height: 20px;
        }

        .heartbeat-function-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 8px;
            background-color: rgba(255, 255, 255, 0.85);
            backdrop-filter: blur(15px);
            -webkit-backdrop-filter: blur(15px);
            border-radius: 20px;
            padding: 12px;
            width: 90%;
            margin: 0 auto 10px auto;
            box-shadow: 0 5px 20px rgba(0,0,0,0.1);
        }
        .function-icon {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 3px;
            font-size: 11px;
            color: #555;
            cursor: pointer;
            transition: transform 0.2s ease, opacity 0.2s ease;
            padding: 4px;
        }
        .function-icon:active {
            transform: scale(0.9);
            opacity: 0.8;
        }
        .function-icon .icon-bg {
            width: 40px;
            height: 40px;
            background-color: white;
            border-radius: 12px;
            display: flex;
            justify-content: center;
            align-items: center;
            box-shadow: 0 2px 6px rgba(0,0,0,0.08);
        }
        .function-icon svg {
            width: 24px;
            height: 24px;
        }
        .heartbeat-bottom-nav {
            flex-shrink: 0;
            display: flex;
            justify-content: space-around;
            background-color: rgba(255, 255, 255, 0.9);
            backdrop-filter: blur(15px);
            -webkit-backdrop-filter: blur(15px);
            border-radius: 25px;
            padding: 8px 0;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
            margin: 0 auto 10px auto;
            width: 85%;
            max-width: 320px;
        }
        .heartbeat-bottom-nav .nav-item {
            font-size: 16px;
            font-weight: 500;
            color: #aaa;
            padding: 8px 20px;
            cursor: pointer;
            transition: color 0.2s ease;
        }
        .heartbeat-bottom-nav .nav-item.active {
            color: #ff85b3;
        }

        /* â–²â–²â–² å¿ƒåŠ¨æ—¥å¸¸æ ·å¼ç»“æŸ â–²â–²â–² */

/* â–¼â–¼â–¼ ã€æœ€ç»ˆä¿®å¤æ–¹æ¡ˆã€‘è¯·ç”¨è¿™ä¸€æ•´å—å…¨æ–°çš„ã€æ— é‡å¤çš„CSSï¼Œæ›¿æ¢æ‰ä½ ç°æœ‰çš„æ‰€æœ‰ç§å¯†èŠå¤©ç›¸å…³æ ·å¼ â–¼â–¼â–¼ */

#heartbeat-private-chat-screen .header {
    position: relative; /* â˜…â˜…â˜… æ ¸å¿ƒä¿®å¤ï¼šç¡®ä¿è¿™ä¸€è¡Œå­˜åœ¨ä¸”å”¯ä¸€ â˜…â˜…â˜… */
    z-index: 2;
    background-color: rgba(247, 247, 247, 0.7);
    backdrop-filter: blur(10px);
    -webkit-backdrop-filter: blur(10px);
    border-bottom: 1px solid rgba(0,0,0,0.08);
}

.private-chat-background {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-image: url('https://i.postimg.cc/L67Gz41T/image.jpg');
    background-size: cover;
    background-position: center;
    opacity: 0.9;
    z-index: 0; /* ç¡®ä¿èƒŒæ™¯åœ¨æœ€åº•å±‚ */
}

.private-chat-messages {
    position: relative; /* ç¡®ä¿æ¶ˆæ¯åŒºåœ¨èƒŒæ™¯ä¹‹ä¸Š */
    z-index: 1;
    flex-grow: 1;
    overflow-y: auto;
    padding: 15px 10px;
    display: flex;
    flex-direction: column;
    gap: 0;
}

.date-separator {
    align-self: center;
    background-color: rgba(0, 0, 0, 0.1);
    color: white;
    font-size: 12px;
    padding: 3px 10px;
    border-radius: 10px;
    margin: 15px 0;
    text-shadow: 0 1px 1px rgba(0,0,0,0.1);
}

.private-message-wrapper {
    display: flex;
    max-width: 80%;
    align-items: flex-start;
    gap: 8px;
    margin-top: 12px;
    cursor: pointer;
}

.private-message-wrapper.is-consecutive .avatar {
    visibility: hidden;
}
.private-message-wrapper.is-consecutive {
    margin-top: 4px;
}

.private-message-wrapper.user {
    align-self: flex-end;
    flex-direction: row-reverse;
}

.private-message-wrapper.ai {
    align-self: flex-start;
}

.private-message-wrapper .avatar {
    width: 36px;
    height: 36px;
    border-radius: 50%;
    object-fit: cover;
    flex-shrink: 0;
    margin-top: 2px;
}

.bubble-container {
    display: flex;
    align-items: flex-end;
    gap: 8px;
}
.private-message-wrapper.user .bubble-container {
    flex-direction: row-reverse;
}

.private-chat-bubble {
    padding: 10px 14px;
    border-radius: 18px;
    font-size: 15px;
    line-height: 1.5;
    word-break: break-word;
    box-shadow: 0 1px 2px rgba(0,0,0,0.1);
}
.private-chat-bubble.user {
    background-color: #E1FFC7;
    color: #333;
    border-bottom-right-radius: 4px;
}
.private-chat-bubble.ai {
    background-color: #FFFFFF;
    color: #333;
    border-bottom-left-radius: 4px;
}

.private-chat-timestamp {
    font-size: 11px;
    color: #8a8a8a;
    text-shadow: 0 1px 1px rgba(255,255,255,0.5);
    white-space: nowrap;
    margin-bottom: 3px;
}

.private-chat-input-area {
    position: relative; /* ç¡®ä¿è¾“å…¥åŒºåœ¨èƒŒæ™¯ä¹‹ä¸Š */
    z-index: 2;
    flex-shrink: 0;
    padding: 8px;
    padding-bottom: calc(8px + var(--safe-area-inset-bottom));
    background-color: #F6F6F6;
    border-top: 1px solid #E0E0E0;
    display: flex;
    align-items: flex-end;
    gap: 10px;
}

/* â–²â–²â–² æ›¿æ¢ç»“æŸ â–²â–²â–² */
        #private-chat-input {
            flex-grow: 1;
            border: none;
            border-radius: 20px;
            padding: 10px 15px;
            font-size: 16px;
            resize: none;
            max-height: 100px;
            background-color: white;
            box-shadow: 0 1px 2px rgba(0,0,0,0.05) inset;
        }
        /* ã€ã€ã€æ–°å¢ã€‘ã€‘ã€‘æŒ‰é’®å®¹å™¨æ ·å¼ */
        .private-chat-actions {
            display: flex;
            align-items: center;
            gap: 8px;
            flex-shrink: 0;
        }
        #trigger-private-chat-reply-btn {
            width: 42px;
            height: 42px;
            border: 1px solid #ddd;
            border-radius: 50%;
            background-color: white;
            color: #555;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        #private-chat-send-btn {
            height: 42px;
            width: 60px;
            border: none;
            border-radius: 21px;
            background-color: #007AFF;
            color: white;
            font-weight: 600;
            cursor: pointer;
        }
        
        /* ã€æ–°å¢ã€‘è¡¨æƒ…åŒ…æŒ‰é’®æ ·å¼ - ç§»é™¤è¾¹æ¡†ï¼Œçº¯å›¾æ ‡ */
        #private-chat-emoji-btn {
            background: none;
            border: none;
            padding: 8px;
            cursor: pointer;
            color: #666;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
            transition: all 0.2s ease;
            flex-shrink: 0;
        }
        
        #private-chat-emoji-btn:hover {
            background-color: rgba(0, 0, 0, 0.05);
            color: #007AFF;
            transform: scale(1.1);
        }
        
        #private-chat-emoji-btn:active {
            transform: scale(0.95);
        }
        
        /* ã€æ–°å¢ã€‘ç§å¯†èŠå¤©è¡¨æƒ…åŒ…é¢æ¿æ ·å¼ */
        #private-chat-emoji-panel {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            height: 300px;
            background-color: #f8f9fa;
            border-top: 1px solid #e0e0e0;
            transform: translateY(100%);
            transition: transform 0.3s ease;
            z-index: 1000;
            display: flex;
            flex-direction: column;
        }
        
        #private-chat-emoji-panel.visible {
            transform: translateY(0);
        }
        
        .emoji-panel-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 10px 15px;
            border-bottom: 1px solid #e0e0e0;
            background-color: white;
        }
        
        .emoji-panel-header span {
            font-weight: 600;
            color: #333;
        }
        
        #close-private-emoji-panel-btn {
            background: none;
            border: none;
            font-size: 20px;
            color: #666;
            cursor: pointer;
            padding: 5px;
        }
        
        #private-chat-emoji-grid {
            flex: 1;
            padding: 10px;
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(60px, 1fr));
            gap: 8px;
            overflow-y: auto;
        }
        
        .emoji-item {
            aspect-ratio: 1;
            background-size: cover;
            background-position: center;
            border-radius: 8px;
            cursor: pointer;
            transition: transform 0.2s;
            border: 2px solid transparent;
        }
        
        .emoji-item:hover {
            transform: scale(1.1);
            border-color: #007AFF;
        }
        
        /* â–¼â–¼â–¼ ã€å…¨æ–°ã€‘ç§å¯†èŠå¤©å¤šé€‰åŠŸèƒ½æ ·å¼ â–¼â–¼â–¼ */

        /* å½“è¿›å…¥å¤šé€‰æ¨¡å¼æ—¶ï¼Œéšè—é»˜è®¤å¤´éƒ¨ï¼Œæ˜¾ç¤ºå¤šé€‰å¤´éƒ¨ */
        #heartbeat-private-chat-screen.selection-mode .header .default-controls {
            display: none !important;
        }
        #heartbeat-private-chat-screen.selection-mode .header .selection-controls {
            display: flex !important;
        }

        /* å¤šé€‰æ¨¡å¼ä¸‹ï¼Œä¸ºæ¶ˆæ¯æ°”æ³¡æ·»åŠ è¾¹æ¡†å’Œè¿‡æ¸¡æ•ˆæœ */
        #heartbeat-private-chat-screen.selection-mode .private-message-wrapper {
            padding: 5px;
            border-radius: 12px;
            border: 2px solid transparent;
            transition: background-color 0.2s, border-color 0.2s;
            background-color: rgba(255, 255, 255, 0.1);
        }

        /* é€‰ä¸­æ¶ˆæ¯çš„æ ·å¼ */
        #heartbeat-private-chat-screen.selection-mode .private-message-wrapper.selected {
            background-color: rgba(0, 123, 255, 0.2);
            border-color: #007AFF;
        }

        /* â–²â–²â–² æ–°å¢CSSç»“æŸ â–²â–²â–² */

        /* â–²â–²â–² ç§å¯†èŠå¤©æ ·å¼ç»“æŸ â–²â–²â–² */

        /* â–¼â–¼â–¼ ã€å…¨æ–°ã€‘å¿ƒåŠ¨æ—¥å¸¸ - æŸ¥çœ‹è·ç¦»é¡µé¢æ ·å¼ (è°·æ­Œåœ°å›¾é£æ ¼) â–¼â–¼â–¼ */
        #heartbeat-distance-screen {
            display: flex;
            flex-direction: column;
            background-color: #f5f5f5;
        }
        .distance-map-container {
            flex-grow: 1;
            position: relative;
            background: linear-gradient(135deg, #e8f4f8 0%, #d1e7dd 50%, #f0f8ff 100%);
            overflow: hidden;
            border-radius: 0 0 20px 20px;
        }
        
        /* è°·æ­Œåœ°å›¾é£æ ¼çš„ç½‘æ ¼èƒŒæ™¯ */
        .distance-map-container::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-image: 
                linear-gradient(rgba(0,0,0,0.1) 1px, transparent 1px),
                linear-gradient(90deg, rgba(0,0,0,0.1) 1px, transparent 1px);
            background-size: 20px 20px;
            opacity: 0.3;
        }
        
        .location-pin {
            position: absolute;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 8px;
            color: #333;
            font-weight: 600;
            font-size: 14px;
            text-shadow: 0 1px 3px rgba(255,255,255,0.8);
            z-index: 10;
        }
        
        .location-pin img {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            border: 4px solid white;
            box-shadow: 0 4px 12px rgba(0,0,0,0.2), 0 0 0 3px rgba(66, 133, 244, 0.3);
            transition: transform 0.3s ease;
        }
        
        .location-pin:hover img {
            transform: scale(1.1);
        }
        
        .user-pin {
            top: 40%;
            left: 20%;
        }
        
        .ai-pin {
            top: 30%;
            right: 20%;
        }
        
        /* è°·æ­Œåœ°å›¾é£æ ¼çš„è·¯çº¿ */
        .route-line-svg {
            position: absolute;
            top: 0;
            left: 0;
            pointer-events: none;
            z-index: 5;
        }
        
        #route-path {
            stroke: #4285f4;
            stroke-width: 4px;
            fill: none;
            stroke-linecap: round;
            stroke-linejoin: round;
            filter: drop-shadow(0 2px 4px rgba(66, 133, 244, 0.3));
            stroke-dasharray: 8 4;
            animation: route-animation 3s linear infinite;
        }
        
        @keyframes route-animation {
            0% { 
                stroke-dashoffset: 0;
            }
            100% { 
                stroke-dashoffset: -24;
            }
        }
        
        /* è°·æ­Œåœ°å›¾é£æ ¼çš„ä¿¡æ¯é¢æ¿ */
        .distance-info-panel {
            flex-shrink: 0;
            background: linear-gradient(135deg, #ffffff 0%, #f8f9fa 100%);
            border-radius: 25px 25px 0 0;
            padding: 25px;
            padding-bottom: calc(25px + var(--safe-area-inset-bottom));
            box-shadow: 0 -8px 32px rgba(0,0,0,0.12);
            text-align: center;
            border-top: 1px solid rgba(0,0,0,0.05);
        }
        
        
        .locations {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 20px;
            font-size: 16px;
            color: #5f6368;
            margin-bottom: 20px;
            font-weight: 500;
        }
        
        .locations strong {
            background: linear-gradient(135deg, #4285f4, #34a853);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            font-weight: 600;
        }
        
        .locations svg {
            color: #9aa0a6;
            transform: scale(1.2);
        }
        
        .distance-details h2 {
            font-size: 36px;
            font-weight: 700;
            background: linear-gradient(135deg, #4285f4, #ea4335);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin: 0 0 8px 0;
            text-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        
        .distance-details p {
            margin: 0;
            font-size: 15px;
            color: #5f6368;
            font-weight: 400;
            line-height: 1.4;
        }

        /* â–²â–²â–² æŸ¥çœ‹è·ç¦»æ ·å¼ç»“æŸ â–²â–²â–² */

        /* â–¼â–¼â–¼ ã€å…¨æ–°ã€‘å¿ƒåŠ¨æ—¥å¸¸ - å¿ƒåŠ¨æ—¥è®°æ ·å¼ (æ‰‹è´¦é£æ ¼) â–¼â–¼â–¼ */

#heartbeat-diary-screen {
    background-color: #fdf8f0; /* æ¸©é¦¨çš„ç±³è‰²èƒŒæ™¯ */
    display: flex; /* æ”¹ä¸ºflexå¸ƒå±€ */
    flex-direction: column;
}

/* ã€å…¨æ–°ã€‘æ—¥è®°ä¸»å®¹å™¨ï¼Œè´Ÿè´£æ»šåŠ¨ */
.diary-page-container {
    flex-grow: 1;
    overflow-y: auto;
    padding: 20px 15px;
    display: flex;
    flex-direction: column;
    gap: 20px; /* å¡ç‰‡ä¹‹é—´çš„å‚ç›´é—´è· */
}

/* ã€å…¨æ–°ã€‘å•æ¡æ—¥è®°å¡ç‰‡çš„åŸºç¡€æ ·å¼ */
.diary-entry-card {
    width: 85%; /* å¡ç‰‡ä¸å æ»¡å…¨å®½ï¼Œè¥é€ é”™è½æ„Ÿ */
    background-color: #fffaf2; /* æ¸©æš–çš„çº¸å¼ é¢œè‰² */
    border-radius: 12px;
    padding: 15px;
    box-shadow: 0 4px 12px rgba(0,0,0,0.08);
    border: 1px solid #f0e8d9;
    position: relative;
    transition: transform 0.2s ease;
}

.diary-entry-card:active {
    transform: scale(0.98);
}

/* ã€å…¨æ–°ã€‘æ‚¨å‘çš„æ—¥è®°é å³ */
.diary-entry-card.user {
    align-self: flex-end;
    border-left: 4px solid #ffc107; /* ç”¨é¢œè‰²åŒºåˆ† */
}

/* ã€å…¨æ–°ã€‘AIçš„å›åº”é å·¦ */
.diary-entry-card.assistant {
    align-self: flex-start;
    background-color: #f7f9fc; /* AIçš„å›åº”ç”¨ç¨å†·çš„ç™½è‰² */
    border-left: 4px solid #aabcce;
}

/* å¡ç‰‡å¤´éƒ¨ï¼šä½œè€…å’Œåˆ é™¤æŒ‰é’® */
.entry-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 12px;
    padding-bottom: 8px;
    border-bottom: 1px dashed #e0d8c8;
}

.entry-author {
    display: flex;
    align-items: center;
    gap: 8px;
}

.entry-author-avatar {
    width: 28px;
    height: 28px;
    border-radius: 50%;
    object-fit: cover;
}

.entry-author-name {
    font-weight: 600;
    color: #8b4513;
}
.diary-entry-card.assistant .entry-author-name {
    color: #4a6a9b;
}

.entry-actions .entry-delete-btn {
    font-size: 18px;
    color: #c9bbae;
    cursor: pointer;
    background: none;
    border: none;
    padding: 5px;
}
.entry-actions .entry-delete-btn:hover {
    color: #ff6b6b;
}

/* å¡ç‰‡å†…å®¹ */
.entry-content {
    font-size: 15px;
    line-height: 1.8;
    color: #5d4037;
    word-break: break-word;
}
.entry-content img {
    max-width: 100%;
    border-radius: 8px;
    margin-top: 10px;
    box-shadow: 0 2px 5px rgba(0,0,0,0.1);
}

/* å¡ç‰‡åº•éƒ¨çš„æ—¶é—´æˆ³ */
.entry-timestamp {
    text-align: right;
    margin-top: 15px;
    font-size: 11px;
    color: #bfa87a;
    font-style: italic;
}

/* ã€å…¨æ–°ã€‘ç©ºçŠ¶æ€çš„ç¾åŒ– */
.diary-empty-state {
    text-align: center;
    padding: 40px 20px;
    color: #bfa87a;
    font-style: italic;
    margin: auto; /* å‚ç›´å±…ä¸­ */
}
.diary-empty-state .icon {
    font-size: 48px;
    margin-bottom: 20px;
}
.diary-empty-state .title {
    font-size: 16px;
    margin-bottom: 10px;
    font-weight: 600;
}
.diary-empty-state .subtitle {
    font-size: 14px;
}

/* åº•éƒ¨ç¿»é¡µå¯¼èˆª (æ ·å¼å¾®è°ƒ) */
.diary-navigation {
    flex-shrink: 0;
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 15px 20px;
    font-size: 14px;
    color: #a1887f;
    border-top: 1px solid #f0e8d9;
}
.diary-navigation button {
    background: none;
    border: 1px solid #dcd1c0;
    color: #a1887f;
    padding: 5px 15px;
    border-radius: 15px;
    cursor: pointer;
}
.diary-navigation button:disabled {
    opacity: 0.5;
    cursor: not-allowed;
}

/* ç¼–è¾‘å™¨é¡µé¢æ ·å¼ (ä¿æŒä¸å˜ï¼Œåªä¸ºäº†å®Œæ•´æ€§) */
#heartbeat-diary-editor-screen .form-container {
    padding: 15px;
    display: flex;
    flex-direction: column;
}
.editor-toolbar {
    flex-shrink: 0;
    padding: 10px;
    background: #f7f7f7;
    border-radius: 8px 8px 0 0;
    border: 1px solid #ddd;
    border-bottom: none;
    display: flex;
    gap: 15px;
}
.editor-toolbar button {
    background: none;
    border: none;
    font-size: 16px;
    cursor: pointer;
    width: 30px;
    height: 30px;
}
#diary-content-editor {
    flex-grow: 1;
    border: 1px solid #ddd;
    padding: 15px;
    font-size: 16px;
    line-height: 1.7;
    border-radius: 0 0 8px 8px;
    outline: none;
    overflow-y: auto;
    background: #fffaf6;
}
/* â–²â–²â–² å¿ƒåŠ¨æ—¥è®°æ ·å¼ç»“æŸ â–²â–²â–² */

/* â–¼â–¼â–¼ ã€å…¨æ–°ã€‘å¿ƒåŠ¨æ—¥å¸¸ - å¿ƒåŠ¨é—®ç­”UIæ ·å¼ â–¼â–¼â–¼ */

#heartbeat-qa-screen,
#heartbeat-qa-result-screen {
    background-color: #f7f8fc;
    display: flex;
    flex-direction: column;
}

.qa-container,
.qa-results-container {
    flex-grow: 1;
    overflow-y: auto;
    padding: 25px;
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 20px;
}

.qa-reporter {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 8px;
    margin-bottom: 10px;
}

.qa-reporter img {
    width: 60px;
    height: 60px;
    border-radius: 50%;
    box-shadow: 0 4px 10px rgba(0,0,0,0.1);
}

.qa-reporter span {
    font-weight: 600;
    color: #6a7a9b;
}

.qa-question-bubble {
    width: 100%;
    background-color: #ffffff;
    padding: 20px;
    border-radius: 18px;
    border: 1px solid #e8eaf1;
    font-size: 16px;
    line-height: 1.6;
    color: #3d4f6c;
    box-shadow: 0 5px 15px rgba(61, 79, 108, 0.08);
    text-align: center;
    min-height: 80px;
    display: flex;
    align-items: center;
    justify-content: center;
}

#qa-user-answer {
    width: 100%;
    height: 120px;
    border: 1px solid #e8eaf1;
    border-radius: 18px;
    padding: 15px;
    font-size: 15px;
    resize: none;
}

#qa-submit-answer-btn {
    width: 100%;
    background-color: #aabcce;
    color: white;
    cursor: pointer;
    pointer-events: auto;
    position: relative;
    z-index: 1;
}

.qa-answer-card {
    width: 100%;
    background-color: #ffffff;
    border-radius: 18px;
    padding: 15px;
    border: 1px solid #e8eaf1;
}

.qa-answer-card .answer-header {
    display: flex;
    align-items: center;
    gap: 10px;
    margin-bottom: 10px;
    padding-bottom: 10px;
    border-bottom: 1px solid #f0f3f7;
}
.qa-answer-card .answer-header img {
    width: 36px;
    height: 36px;
    border-radius: 50%;
}
.qa-answer-card .answer-header span {
    font-weight: 600;
    color: #3d4f6c;
}

.qa-answer-card .answer-text {
    font-size: 15px;
    line-height: 1.6;
    color: #5a6a8b;
}

.qa-reporter-comment {
    width: 100%;
    margin-top: 15px;
}

.qa-reporter-comment .comment-header {
    display: flex;
    align-items: center;
    gap: 8px;
    margin-bottom: 8px;
}
.qa-reporter-comment .comment-header img {
    width: 30px;
    height: 30px;
    border-radius: 50%;
}
.qa-reporter-comment .comment-header span {
    font-weight: 600;
    color: #6a7a9b;
    font-size: 14px;
}
.qa-reporter-comment .comment-text {
    background-color: #e9eef5;
    padding: 15px;
    border-radius: 12px;
    color: #4a6a9b;
    font-style: italic;
    font-size: 14px;
    line-height: 1.6;
}

/* â–²â–²â–² å¿ƒåŠ¨é—®ç­”UIæ ·å¼ç»“æŸ â–²â–²â–² */

        /* â–¼â–¼â–¼ ã€å…¨æ–°ã€‘å¿ƒåŠ¨æ—¥å¸¸ - çºªå¿µæ—¥åŠŸèƒ½æ ·å¼ â–¼â–¼â–¼ */
        #heartbeat-anniversary-screen {
            background-color: #f5f6f8;
        }

        #anniversary-list {
            padding: 15px;
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        .anniversary-card {
            background-color: #ffffff;
            border-radius: 12px;
            padding: 18px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.07);
            border-left: 5px solid #FFD54F; /* æ¸©é¦¨çš„é»„è‰²è¾¹æ¡† */
            display: flex;
            justify-content: space-between;
            align-items: center;
            cursor: pointer;
            transition: transform 0.2s ease, box-shadow 0.2s ease;
        }

        .anniversary-card:hover {
            transform: translateY(-3px);
            box-shadow: 0 6px 20px rgba(0, 0, 0, 0.1);
        }

        .anniversary-info {
            flex-grow: 1;
        }

        .anniversary-name {
            font-size: 16px;
            font-weight: 600;
            color: #3d4f6c;
            margin-bottom: 6px;
        }

        .anniversary-date {
            font-size: 13px;
            color: #8a9bb3;
        }

        .anniversary-countdown {
            text-align: right;
        }

        .countdown-days {
            font-size: 28px;
            font-weight: 700;
            color: #ff85b3; /* æ²¿ç”¨ç²‰è‰²ä¸»é¢˜ */
            line-height: 1;
        }

        .countdown-label {
            font-size: 12px;
            color: #8a9bb3;
        }

        /* å·²åº¦è¿‡æ—¥æœŸçš„æ ·å¼ */
        .anniversary-passed .countdown-days {
            font-size: 18px; /* ç¼©å°ä¸€ç‚¹å­—å· */
            color: #aabcce; /* ä½¿ç”¨æŸ”å’Œçš„ç°è“è‰² */
        }
        .anniversary-passed .countdown-label {
            font-weight: 500;
        }

        /* â–²â–²â–² çºªå¿µæ—¥åŠŸèƒ½æ ·å¼ç»“æŸ â–²â–²â–² */
        
        /* â–¼â–¼â–¼ ã€å…¨æ–°ã€‘å¿ƒåŠ¨æ—¥å¸¸ - å¤§å§¨å¦ˆè®°å½•åŠŸèƒ½æ ·å¼ â–¼â–¼â–¼ */
        #heartbeat-period-tracker-screen {
            background-color: #f7f9fc;
            display: flex;
            flex-direction: column;
        }

        .period-calendar-container {
            padding: 15px;
            background-color: #ffffff;
            margin: 20px;
            border-radius: 20px;
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.08);
        }

        .calendar-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding: 0 10px;
        }

        .calendar-header h3 {
            margin: 0;
            color: #3d4f6c;
            font-size: 18px;
            font-weight: 600;
        }

        .calendar-header button {
            background: none;
            border: none;
            font-size: 24px;
            color: #aabcce;
            cursor: pointer;
        }

        .calendar-weekdays {
            display: grid;
            grid-template-columns: repeat(7, 1fr);
            text-align: center;
            margin-bottom: 10px;
            font-size: 13px;
            color: #8a9bb3;
            font-weight: 500;
        }

        .calendar-grid {
            display: grid;
            grid-template-columns: repeat(7, 1fr);
            gap: 5px;
        }

        .calendar-day {
            aspect-ratio: 1 / 1;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 15px;
            font-weight: 500;
            color: #3d4f6c;
            border-radius: 50%;
            cursor: pointer;
            position: relative;
            transition: background-color 0.2s ease;
        }

        .calendar-day.other-month {
            color: #cdd7e5;
        }

        .calendar-day.today {
            background-color: #ffdde1;
            color: #c95b6a;
        }

        .calendar-day.selected {
            background-color: #aabcce;
            color: white;
        }

        .period-marker {
            position: absolute;
            bottom: 5px;
            left: 15%;
            right: 15%;
            height: 6px;
            border-radius: 3px;
        }
        .period-marker.start { border-radius: 3px 0 0 3px; left: 50%; }
        .period-marker.end { border-radius: 0 3px 3px 0; right: 50%; }
        .period-marker.ongoing { border-radius: 0; }

        /* å®é™…ç»æœŸ - å®å¿ƒç²‰è‰² */
        .period-marker.actual {
            background-color: #ff85b3;
            opacity: 0.8;
        }
        /* é¢„æµ‹ç»æœŸ - è™šçº¿/åŠé€æ˜ */
        .period-marker.predicted {
            background: repeating-linear-gradient(90deg, #fecdd3, #fecdd3 4px, transparent 4px, transparent 8px);
        }
        /* æ˜“å­•æœŸ */
        .period-marker.fertile {
            background-color: #c3aed6;
            opacity: 0.7;
        }

        .period-actions {
            display: flex;
            gap: 15px;
            padding: 20px;
            margin-top: auto;
            padding-bottom: calc(20px + var(--safe-area-inset-bottom));
        }

        .period-actions button {
            flex: 1;
            padding: 15px;
            border: none;
            border-radius: 15px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
        }
        #log-period-start-btn {
            background-color: #ff85b3;
            color: white;
        }
        #log-period-end-btn {
            background-color: #ffffff;
            color: #3d4f6c;
            border: 1px solid #dbe2ea;
        }

        /* æ¯æ—¥è®°å½•å¼¹çª—æ ·å¼ */
        .period-log-options {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
        }
        .period-log-options button {
            padding: 8px 15px;
            border: 1.5px solid #dbe2ea;
            background-color: #ffffff;
            color: #4a6a9b;
            border-radius: 20px;
            font-size: 14px;
            cursor: pointer;
        }
        .period-log-options button.selected {
            background-color: #ff85b3;
            color: white;
            border-color: #ff85b3;
            border-radius: 25px;
        }
        /* â–²â–²â–² å¤§å§¨å¦ˆè®°å½•åŠŸèƒ½æ ·å¼ç»“æŸ â–²â–²â–² */

        /* â–¼â–¼â–¼ ã€å…¨æ–°ã€‘å¿ƒåŠ¨æ—¥å¸¸ - é»˜å¥‘æŒ‘æˆ˜åŠŸèƒ½æ ·å¼ â–¼â–¼â–¼ */

        #heartbeat-challenge-screen {
            background-color: #f7f8fc;
            display: flex;
            flex-direction: column;
        }

        .challenge-container {
            flex-grow: 1;
            overflow-y: auto;
            padding: 25px;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 25px;
        }

        .challenge-host {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 8px;
        }

        .challenge-host img {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            box-shadow: 0 4px 10px rgba(0,0,0,0.1);
        }

        .challenge-host span {
            font-weight: 600;
            color: #6a7a9b;
            background-color: #e9eef5;
            padding: 3px 10px;
            border-radius: 12px;
            font-size: 13px;
        }

        .challenge-question-bubble {
            width: 100%;
            background-color: #ffffff;
            padding: 20px;
            border-radius: 18px;
            border: 1px solid #e8eaf1;
            font-size: 17px;
            line-height: 1.6;
            color: #3d4f6c;
            box-shadow: 0 5px 15px rgba(61, 79, 108, 0.08);
            text-align: center;
            min-height: 100px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 500;
        }

        .challenge-options-container {
            display: flex;
            width: 100%;
            gap: 15px;
        }

        .challenge-option-btn {
            flex: 1;
            padding: 15px;
            font-size: 16px;
            font-weight: 600;
            border: 2px solid #dbe2ea;
            background-color: #ffffff;
            color: #4a6a9b;
            border-radius: 15px;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .challenge-option-btn:not(:disabled):hover {
            transform: translateY(-3px);
            box-shadow: 0 6px 12px rgba(0,0,0,0.1);
        }

        .challenge-option-btn:disabled {
            opacity: 0.7;
        }

        .challenge-option-btn.selected {
            background-color: #aabcce;
            color: white;
            border-color: #aabcce;
        }

        .challenge-results-display {
            display: flex;
            width: 100%;
            justify-content: center;
            align-items: center;
            gap: 15px;
        }

        .result-card {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 8px;
            padding: 15px;
            border-radius: 15px;
            width: 100px;
            transition: all 0.3s ease;
        }
        .result-card.correct {
            background-color: #d4edda;
            border: 2px solid #28a745;
        }
        .result-card.incorrect {
            background-color: #f8d7da;
            border: 2px solid #dc3545;
        }

        .result-card img {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            border: 3px solid white;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }

        .result-card .choice-text {
            font-weight: 600;
            font-size: 14px;
        }
        .user-result .choice-text { color: #3d4f6c; }
        .ai-result .choice-text { color: #3d4f6c; }

        .result-vs {
            font-size: 24px;
            font-weight: bold;
            color: #aabcce;
        }

        .challenge-host-comment {
            background-color: #e9eef5;
            padding: 15px;
            border-radius: 12px;
            color: #4a6a9b;
            font-style: italic;
            font-size: 14px;
            line-height: 1.6;
            width: 100%;
            text-align: center;
        }

        /* åŠ¨ç”»æ•ˆæœ */
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .challenge-results-display, .challenge-host-comment, #next-challenge-btn {
            animation: fadeIn 0.5s ease forwards;
        }

        /* â–²â–²â–² é»˜å¥‘æŒ‘æˆ˜åŠŸèƒ½æ ·å¼ç»“æŸ â–²â–²â–² */

        /* â–¼â–¼â–¼ ã€å…¨æ–°ã€‘å¿ƒåŠ¨æ—¥å¸¸ - æ‹çˆ±æ¸…å•åŠŸèƒ½æ ·å¼ â–¼â–¼â–¼ */

        #heartbeat-checklist-screen {
            background-color: #f5f6f8;
            display: flex;
            flex-direction: column;
        }

        .checklist-tabs {
            display: flex;
            flex-shrink: 0;
            background-color: #ffffff;
            padding: 0 15px;
            border-bottom: 1px solid #e0e6f0;
        }

        .checklist-tab {
            padding: 12px 16px;
            cursor: pointer;
            border: none;
            background: none;
            font-size: 15px;
            font-weight: 500;
            color: #8a9bb3;
            border-bottom: 3px solid transparent;
            transition: all 0.2s ease;
        }

        .checklist-tab.active {
            color: #3d4f6c;
            font-weight: 600;
            border-bottom-color: #ff85b3;
        }

        .checklist-list {
            flex-grow: 1;
            overflow-y: auto;
            padding: 20px;
            display: none;
            gap: 15px;
        }
        .checklist-list.active {
            display: flex;
            flex-direction: column;
        }
        #checklist-completed-list.active {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            align-content: start;
        }

        /* å¾…å®Œæˆå¡ç‰‡ */
        .checklist-item-card.pending {
            background-color: #ffffff;
            border-radius: 12px;
            padding: 18px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.06);
            display: flex;
            align-items: center;
            gap: 15px;
            cursor: pointer;
        }
        .checklist-item-card.pending .checkbox-circle {
            width: 24px;
            height: 24px;
            border-radius: 50%;
            border: 2px solid #dbe2ea;
            flex-shrink: 0;
            transition: all 0.2s ease;
        }
        .checklist-item-card.pending:hover .checkbox-circle {
            border-color: #ff85b3;
            background-color: #fff0f5;
        }
        .checklist-item-card.pending .content {
            font-size: 15px;
            color: #3d4f6c;
            font-weight: 500;
            line-height: 1.5;
        }

        /* å·²å®Œæˆå¡ç‰‡ (æ‹ç«‹å¾—é£æ ¼) */
        .checklist-item-card.completed {
            background-color: #ffffff;
            border-radius: 8px;
            padding: 8px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            display: flex;
            flex-direction: column;
            cursor: pointer;
        }
        .checklist-item-card.completed .photo-area {
            width: 100%;
            aspect-ratio: 1 / 1;
            background-color: #e0e6f0;
            background-size: cover;
            background-position: center;
            margin-bottom: 8px;
        }
        .checklist-item-card.completed .info-area {
            font-family: 'Kaiti', 'STKaiti', serif; /* ä½¿ç”¨æ‰‹å†™é£æ ¼å­—ä½“ */
            color: #555;
            padding: 0 5px;
        }
        .checklist-item-card.completed .original-wish {
            font-size: 14px;
            margin-bottom: 4px;
            font-weight: 600;
        }
        .checklist-item-card.completed .completion-note {
            font-size: 12px;
            color: #888;
            font-style: italic;
            min-height: 30px;
        }

        /* â–²â–²â–² æ‹çˆ±æ¸…å•åŠŸèƒ½æ ·å¼ç»“æŸ â–²â–²â–² */

        /* â–¼â–¼â–¼ ã€å…¨æ–°ã€‘å¿ƒåŠ¨æ—¥å¸¸ - å¿ƒåŠ¨å°å±‹åŠŸèƒ½æ ·å¼ â–¼â–¼â–¼ */

        #heartbeat-love-shack-screen {
            background-color: #F8F0E3; /* ä¸€ä¸ªæŸ”å’Œçš„èƒŒæ™¯è‰² */
        }

        .love-shack-container {
            flex-grow: 1;
            position: relative; /* å…³é”®ï¼šè®©å†…éƒ¨çš„å›¾ç‰‡å¯ä»¥ç›¸å¯¹äºå®ƒæ¥å®šä½ */
            overflow: hidden; /* é˜²æ­¢å›¾ç‰‡æº¢å‡º */
        }

        .shack-background {
            position: absolute;
            left: 0;
            /* ç§»é™¤æ‰€æœ‰ width, height, top, bottom, object-fit å±æ€§ */
            transition: all 0.5s ease-in-out; /* ä¿ç•™å¹³æ»‘è¿‡æ¸¡æ•ˆæœ */
            z-index: 1;
        }

        .shack-character {
            position: absolute;
            transition: all 0.5s ease; /* ä¸ºæœªæ¥çš„ç§»åŠ¨å’Œæ·¡å…¥æ·¡å‡ºåšå‡†å¤‡ */
            cursor: pointer;
            z-index: 2; /* ç¡®ä¿äººç‰©åœ¨èƒŒæ™¯ä¹‹ä¸Š */
        }

/* æ ¹æ®å‚è€ƒå›¾å¾®è°ƒäººç‰©ä½ç½®å’Œå¤§å° */
.shack-character.user {
    bottom: 5%;
    right: 15%;
    width: 35%;
    transition: opacity 0.3s ease, transform 0.3s ease;
}

.shack-character.user.hidden {
    opacity: 0;
    transform: scale(0.8);
    pointer-events: none;
}

.shack-character.ai {
    bottom: 15%;
    left: 10%;
    width: 45%;
}


/* â–²â–²â–² å¿ƒåŠ¨å°å±‹åŠŸèƒ½æ ·å¼ç»“æŸ â–²â–²â–² */

        /* â–¼â–¼â–¼ ã€å…¨æ–°ã€‘å¿ƒåŠ¨å°å±‹è®¾ç½®å¼¹çª—æ ·å¼ â–¼â–¼â–¼ */

        .shack-setting-item {
            display: flex;
            align-items: center;
            gap: 20px;
            padding: 15px;
            background-color: #f5f6f8;
            border-radius: 12px;
        }

        .shack-setting-item:not(:last-child) {
            margin-bottom: 15px;
        }

        .shack-char-preview {
            width: 80px;
            height: 80px;
            object-fit: contain; /* ä½¿ç”¨ contain ç¡®ä¿å›¾ç‰‡å®Œæ•´æ˜¾ç¤º */
            border-radius: 8px;
            background-color: #e0e6f0;
            flex-shrink: 0;
        }

        .shack-bg-preview {
            width: 120px;
            height: 80px;
            object-fit: cover; /* ä½¿ç”¨ cover ç¡®ä¿èƒŒæ™¯å›¾ç‰‡å¡«æ»¡é¢„è§ˆæ¡† */
            border-radius: 8px;
            background-color: #e0e6f0;
            flex-shrink: 0;
        }

        .shack-setting-info {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .shack-setting-info label {
            font-weight: 600;
            color: #3d4f6c;
        }

        .toggle-setting {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: 8px;
        }

        .toggle-setting span {
            font-size: 14px;
            color: #666;
        }

        .shack-setting-info button {
            margin-top: 0;
            width: fit-content; /* è®©æŒ‰é’®å®½åº¦è‡ªé€‚åº”å†…å®¹ */
        }

        /* â–¼â–¼â–¼ AIæ°”æ³¡å¯¹è¯åŠ¨ç”»æ ·å¼ â–¼â–¼â–¼ */
        @keyframes bubbleAppear {
            from {
                opacity: 0;
                transform: translateY(10px) scale(0.8);
            }
            to {
                opacity: 1;
                transform: translateY(0) scale(1);
            }
        }

        @keyframes bubbleDisappear {
            from {
                opacity: 1;
                transform: translateY(0) scale(1);
            }
            to {
                opacity: 0;
                transform: translateY(-10px) scale(0.8);
            }
        }

        .ai-bubble::before {
            content: '';
            position: absolute;
            bottom: -8px;
            left: 50%;
            transform: translateX(-50%);
            width: 0;
            height: 0;
            border-left: 8px solid transparent;
            border-right: 8px solid transparent;
            border-top: 8px solid #ff9a9e;
        }
        /* â–²â–²â–² AIæ°”æ³¡å¯¹è¯åŠ¨ç”»æ ·å¼ç»“æŸ â–²â–²â–² */

        /* â–²â–²â–² å°å±‹è®¾ç½®æ ·å¼ç»“æŸ â–²â–²â–² */

        /* â–¼â–¼â–¼ ã€å…¨æ–°ã€‘å¿ƒåŠ¨æ—¥å¸¸ - "æˆ‘çš„"é¡µé¢æ ·å¼ â–¼â–¼â–¼ */

        #heartbeat-my-screen {
            background-color: #fdf8f0;
        }

        .my-screen-content {
            flex-grow: 1;
            overflow-y: auto;
            padding: 20px;
            display: flex;
            flex-direction: column;
            gap: 25px;
        }

        .my-profile-card {
            background: linear-gradient(135deg, #ffffff, #fff7f9);
            border-radius: 20px;
            padding: 20px;
            box-shadow: 0 8px 25px rgba(0,0,0,0.08);
        }

        .my-profile-info {
            display: flex;
            align-items: center;
            gap: 15px;
            border-bottom: 1px solid #f0e8d9;
            padding-bottom: 15px;
            margin-bottom: 15px;
        }

        .my-user-avatar {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            object-fit: cover;
            border: 3px solid white;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }

        .my-user-details {
            flex-grow: 1;
        }

        #my-user-nickname {
            font-size: 18px;
            font-weight: 600;
            color: #3d4f6c;
        }

        .my-partner-chip {
            display: inline-flex;
            align-items: center;
            gap: 5px;
            background-color: #f5f6f8;
            padding: 3px 8px;
            border-radius: 12px;
            font-size: 12px;
            color: #8a9bb3;
            margin-top: 5px;
            cursor: pointer;
        }

        .my-partner-chip img {
            width: 18px;
            height: 18px;
            border-radius: 50%;
        }

        .my-love-motto {
            font-size: 14px;
            color: #a1887f;
            font-style: italic;
            text-align: center;
            cursor: pointer;
            padding: 8px;
            border-radius: 8px;
            transition: background-color 0.2s;
        }
        .my-love-motto:hover {
            background-color: #f9f4ec;
        }

        .my-imprints-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
        }

        .imprint-item {
            background-color: #ffffff;
            border-radius: 12px;
            padding: 15px;
            text-align: center;
            box-shadow: 0 4px 15px rgba(0,0,0,0.06);
        }

        .imprint-number {
            display: block;
            font-size: 24px;
            font-weight: 700;
            color: #ff85b3;
            margin-bottom: 5px;
        }

        .imprint-label {
            font-size: 13px;
            color: #8a9bb3;
        }

        .my-settings-list {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .setting-item {
            background-color: #ffffff;
            padding: 15px 20px;
            border-radius: 12px;
            font-size: 15px;
            font-weight: 500;
            color: #3d4f6c;
            cursor: pointer;
            box-shadow: 0 2px 8px rgba(0,0,0,0.05);
            display: flex;
            justify-content: space-between;
            align-items: center;
            transition: transform 0.2s, box-shadow 0.2s;
        }
        .setting-item:hover {
            transform: translateX(3px);
            box-shadow: 0 4px 12px rgba(0,0,0,0.08);
        }
        .setting-item::after {
            content: 'â€º';
            font-size: 20px;
            color: #cdd7e5;
        }

        /* â–²â–²â–² "æˆ‘çš„"é¡µé¢æ ·å¼ç»“æŸ â–²â–²â–² */

        /* â–¼â–¼â–¼ ã€å…¨æ–°ã€‘å¿ƒåŠ¨æ—¥å¸¸ - é€šçŸ¥è®¾ç½®å¼¹çª—æ ·å¼ â–¼â–¼â–¼ */
        #heartbeat-notification-settings-modal .setting-item {
            box-shadow: none;
            border: 1px solid #e0e6f0;
            transition: none;
        }
        #heartbeat-notification-settings-modal .setting-item:hover {
            transform: none;
            box-shadow: none;
        }
        #heartbeat-notification-settings-modal .setting-item::after {
            display: none;
        }
        /* â–²â–²â–² æ ·å¼ç»“æŸ â–²â–²â–² */

        /* â–¼â–¼â–¼ ã€å…¨æ–°ã€‘è·åŒ…åŠŸèƒ½æ ·å¼ â–¼â–¼â–¼ */
        .wallet-content {
            flex-grow: 1;
            overflow-y: auto;
            padding: 20px;
            display: flex;
            flex-direction: column;
            gap: 20px;
        }

        .wallet-balance-card {
            background: linear-gradient(135deg, #FF9800, #FFB74D);
            border-radius: 20px;
            padding: 25px;
            text-align: center;
            color: white;
            box-shadow: 0 8px 25px rgba(255, 152, 0, 0.3);
        }

        .balance-title {
            font-size: 16px;
            opacity: 0.9;
            margin-bottom: 10px;
        }

        .balance-amount {
            font-size: 36px;
            font-weight: 700;
            margin-bottom: 5px;
        }

        .balance-subtitle {
            font-size: 14px;
            opacity: 0.8;
        }

        .wallet-actions {
            display: flex;
            gap: 15px;
        }

        .wallet-action-btn {
            flex: 1;
            background-color: white;
            border-radius: 15px;
            padding: 20px;
            text-align: center;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
            cursor: pointer;
            transition: transform 0.2s, box-shadow 0.2s;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 8px;
        }

        .wallet-action-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(0,0,0,0.15);
        }

        .wallet-action-btn svg {
            color: #FF9800;
        }

        .wallet-action-btn span {
            font-weight: 600;
            color: #333;
        }

        .wallet-history {
            background-color: white;
            border-radius: 15px;
            padding: 20px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
        }

        .history-title {
            font-size: 18px;
            font-weight: 600;
            margin-bottom: 15px;
            color: #333;
        }

        .history-empty {
            text-align: center;
            color: #999;
            padding: 20px;
            font-style: italic;
        }

        /* â–¼â–¼â–¼ ã€å…¨æ–°ã€‘è®°è´¦åŠŸèƒ½æ ·å¼ â–¼â–¼â–¼ */
        .accounting-content {
            flex-grow: 1;
            overflow-y: auto;
            padding: 20px;
            display: flex;
            flex-direction: column;
            gap: 20px;
        }

        .accounting-summary {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 15px;
        }

        .summary-item {
            background-color: white;
            border-radius: 15px;
            padding: 20px;
            text-align: center;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
        }

        .summary-label {
            font-size: 14px;
            color: #666;
            margin-bottom: 8px;
        }

        .summary-amount {
            font-size: 24px;
            font-weight: 700;
        }

        .summary-amount.income {
            color: #4CAF50;
        }

        .summary-amount.expense {
            color: #F44336;
        }

        .summary-amount.balance {
            color: #2196F3;
        }

        .accounting-actions {
            display: flex;
            gap: 15px;
        }

        .accounting-action-btn {
            flex: 1;
            background-color: white;
            border-radius: 15px;
            padding: 20px;
            text-align: center;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
            cursor: pointer;
            transition: transform 0.2s, box-shadow 0.2s;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 8px;
        }

        .accounting-action-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(0,0,0,0.15);
        }

        .accounting-action-btn svg {
            color: #4CAF50;
        }

        .accounting-action-btn span {
            font-weight: 600;
            color: #333;
        }

        .accounting-history {
            background-color: white;
            border-radius: 15px;
            padding: 20px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
        }

        .accounting-categories {
            background-color: white;
            border-radius: 15px;
            padding: 20px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
        }

        .categories-title {
            font-size: 18px;
            font-weight: 600;
            margin-bottom: 15px;
            color: #333;
        }

        .categories-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 10px;
        }

        .category-item {
            display: flex;
            align-items: center;
            padding: 12px;
            border-radius: 10px;
            background-color: #f8f9fa;
            border-left: 4px solid;
        }

        .category-icon {
            font-size: 20px;
            margin-right: 10px;
        }

        .category-info {
            flex: 1;
        }

        .category-name {
            font-size: 14px;
            font-weight: 600;
            color: #333;
        }

        .category-amount {
            font-size: 12px;
            color: #666;
        }

        .accounting-time-stats {
            background-color: white;
            border-radius: 15px;
            padding: 20px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
        }

        .time-stats-title {
            font-size: 18px;
            font-weight: 600;
            margin-bottom: 15px;
            color: #333;
        }

        .time-stats-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 15px;
        }

        .time-stat-item {
            text-align: center;
            padding: 15px;
            border-radius: 10px;
            background-color: #f8f9fa;
        }

        .time-stat-label {
            font-size: 12px;
            color: #666;
            margin-bottom: 5px;
        }

        .time-stat-amount {
            font-size: 16px;
            font-weight: 600;
            color: #F44336;
        }

        /* å†å²è®°å½•æ ·å¼ */
        .history-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px 0;
            border-bottom: 1px solid #f0f0f0;
        }

        .history-item:last-child {
            border-bottom: none;
        }

        .history-info {
            display: flex;
            flex-direction: column;
            gap: 5px;
        }

        .history-type {
            font-size: 14px;
            color: #666;
        }

        .history-amount {
            font-size: 16px;
            font-weight: 600;
        }

        .history-amount.income {
            color: #4CAF50;
        }

        .history-amount.expense {
            color: #F44336;
        }

        .history-time {
            font-size: 12px;
            color: #999;
        }

        .history-description {
            font-size: 12px;
            color: #999;
            margin-top: 2px;
            font-style: italic;
        }

        /* â–²â–²â–² è·åŒ…å’Œè®°è´¦åŠŸèƒ½æ ·å¼ç»“æŸ â–²â–²â–² */
/* â–¼â–¼â–¼ æŠŠè¿™ä¸€æ•´å—å…¨æ–°çš„CSSï¼Œç²˜è´´åˆ° style.css æ–‡ä»¶çš„æœ€æœ«å°¾ â–¼â–¼â–¼ */

/* =================================================================== */
/* ===           â€œæ¡ƒå®â€(taobao) App ä¸“å±æ ·å¼             === */
/* =================================================================== */

/* --- 1. â€œæ¡ƒå®â€App æ•´ä½“æ¡†æ¶ä¸å¸ƒå±€ --- */

/* Appä¸»å±å¹•å®¹å™¨ */
#taobao-screen {
    background-color: #f0f2f5;
  }
  #phone-screen.dark-mode #taobao-screen {
    background-color: #000;
  }
  
  /* é¡¶éƒ¨é¡µç­¾æ  (è¿™æ˜¯æ—§ç‰ˆå¸ƒå±€ï¼Œæ–°ç‰ˆå·²ç§»åˆ°åº•éƒ¨) */
  /* .taobao-header-tabs { ... } */
  
  /* åº•éƒ¨é¡µç­¾æ  (æ–°ç‰ˆ) */
  .taobao-tabs {
    display: flex;
    flex-shrink: 0;
    border-top: 1px solid var(--border-color); /* åœ¨é¡¶éƒ¨åŠ åˆ†å‰²çº¿ */
    background-color: var(--secondary-bg);
    padding-bottom: env(safe-area-inset-bottom); /* é€‚é…iPhoneåº•éƒ¨å®‰å…¨åŒº */
  }
  
  /* å•ä¸ªé¡µç­¾ */
  .taobao-tab {
    flex: 1;
    padding: 12px 0;
    text-align: center;
    font-weight: 500;
    color: var(--text-secondary);
    border: none;
    background: none;
    cursor: pointer;
    position: relative;
    font-size: 14px; /* ç»Ÿä¸€å­—ä½“å¤§å° */
  }
  
  /* æ¿€æ´»çŠ¶æ€çš„é¡µç­¾ï¼ˆæ©™è‰²åŠä¸‹åˆ’çº¿ï¼‰ */
  .taobao-tab.active {
    color: #ff5722; /* æ·˜å®æ©™ */
    font-weight: 600;
  }
  .taobao-tab.active::after {
    content: '';
    position: absolute;
    bottom: 0; /* è¿™æ˜¯æ—§ç‰ˆåœ¨é¡¶éƒ¨æ—¶çš„æ ·å¼ï¼Œæ–°ç‰ˆåº”è¯¥åœ¨é¡¶éƒ¨ */
    top: 0;
    left: 50%;
    transform: translateX(-50%);
    width: 30px;
    height: 3px;
    background-color: #ff5722;
    border-radius: 1.5px;
  }
  
  /* å†…å®¹åŒºåŸŸå®¹å™¨ */
  .taobao-content {
    flex-grow: 1;
    position: relative;
    overflow: hidden;
  }
  
  /* å•ä¸ªè§†å›¾å®¹å™¨ï¼ˆå¦‚é¦–é¡µã€è´­ç‰©è½¦ã€æˆ‘çš„ç­‰ï¼‰ */
  .taobao-view {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    overflow-y: auto;
    display: none; /* é»˜è®¤éšè— */
    box-sizing: border-box;
  }
  /* é¦–é¡µå’Œé¥¿äº†ä¹ˆé¡µé¢ï¼Œç§»é™¤é»˜è®¤å†…è¾¹è·ï¼Œè®©å†…å®¹è‡ªå·±æ§åˆ¶ */
  .taobao-view#products-view,
  .taobao-view#eleme-view {
      padding: 10px;
  }
  .taobao-view.active {
    display: block;
  }
  
  /* --- 2. é¦–é¡µå•†å“åˆ—è¡¨ (Products View) --- */
  
  /* æœç´¢æ  */
  .product-search-bar {
    display: flex;
    gap: 10px;
    padding: 0 5px 15px 5px;
  }
  #product-search-input {
    flex-grow: 1;
    border: 1px solid #ff5722;
    padding: 10px 15px;
    border-radius: 20px;
    font-size: 14px;
    outline: none;
  }
  #product-search-btn {
    background-color: #ff5722;
    color: white;
    border: none;
    border-radius: 20px;
    padding: 0 20px;
    font-weight: 500;
    cursor: pointer;
  }
  
  /* å•†å“åˆ†ç±»é¡µç­¾ */
  #category-tabs {
    display: flex;
    gap: 10px;
    margin-bottom: 15px;
    overflow-x: auto;
    padding-bottom: 5px;
    scrollbar-width: none;
    -ms-overflow-style: none;
  }
  #category-tabs::-webkit-scrollbar {
    display: none;
  }
  .category-tab-btn {
    padding: 6px 12px;
    border-radius: 15px;
    border: 1px solid var(--border-color);
    background-color: var(--secondary-bg);
    white-space: nowrap;
    cursor: pointer;
  }
  .category-tab-btn.active {
    background-color: #ffefe9;
    color: #ff5722;
    border-color: #ff5722;
  }
  
  /* å•†å“ç½‘æ ¼å¸ƒå±€ */
  .product-grid {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 12px;
  }
  .product-card {
    background-color: var(--secondary-bg);
    border-radius: 8px;
    overflow: hidden;
    box-shadow: 0 1px 4px rgba(0, 0, 0, 0.08);
    position: relative; /* ä¸ºäº†å®šä½æŒ‰é’® */
  }
  .product-card .product-image-container {
      width: 100%;
      padding-bottom: 100%; /* 1:1 aspect ratio */
      position: relative;
      background-color: #f0f2f5;
  }
  .product-card .loading-spinner {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      width: 24px;
      height: 24px;
      border: 3px solid rgba(0,0,0,0.1);
      border-top-color: var(--accent-color);
      border-radius: 50%;
      animation: spin 1s linear infinite;
  }
  .product-card .product-image {
    position: absolute;
    top: 0; left: 0; width: 100%; height: 100%;
    object-fit: cover;
  }
  .product-card .product-info {
    padding: 8px;
  }
  .product-card .product-name {
    font-size: 14px;
    display: -webkit-box;
    -webkit-line-clamp: 2;
    -webkit-box-orient: vertical;
    overflow: hidden;
    min-height: 2.8em;
  }
  .product-card .product-price {
    font-size: 16px;
    font-weight: bold;
    color: #ff5722;
    margin-top: 5px;
  }
  .product-card .product-price::before {
    content: 'Â¥';
    font-size: 12px;
    margin-right: 2px;
  }
  
  /* --- 3. è´­ç‰©è½¦ (Cart View) --- */
  #cart-view {
      padding: 0; /* è´­ç‰©è½¦é¡µé¢è‡ªå·±æ§åˆ¶å†…è¾¹è· */
  }
  .cart-badge {
      position: absolute;
      top: 5px;
      right: 50%;
      transform: translateX(calc(50% + 15px)); /* æŠŠå®ƒå®šä½åˆ°â€œè´­ç‰©è½¦â€æ–‡å­—çš„å³ä¸Šè§’ */
      min-width: 18px;
      height: 18px;
      padding: 0 5px;
      background-color: #ff5722;
      color: white;
      font-size: 11px;
      border-radius: 9px;
      line-height: 18px;
      display: none;
  }
  #cart-item-list {
    display: flex;
    flex-direction: column;
    gap: 10px;
    padding: 15px;
    padding-bottom: 120px; /* ä¸ºåº•éƒ¨ç»“ç®—æ ç•™å‡ºç©ºé—´ */
  }
  .cart-item {
    background-color: var(--secondary-bg);
    border-radius: 8px;
    padding: 12px;
    display: flex;
    align-items: center;
    gap: 12px;
  }
  .cart-item .product-image {
    width: 80px;
    height: 80px;
    border-radius: 6px;
    flex-shrink: 0;
    object-fit: cover;
  }
  .cart-item .cart-item-info {
    flex-grow: 1;
  }
  .cart-item .quantity-controls {
    display: flex;
    align-items: center;
    gap: 8px;
  }
  .cart-item .quantity-controls button {
    width: 24px;
    height: 24px;
    border: 1px solid #ccc;
    background-color: #f0f0f0;
    border-radius: 50%;
    cursor: pointer;
  }
  .cart-item .delete-cart-item-btn {
    width: 30px;
    height: 30px;
    border: none;
    background: none;
    color: #999;
    font-size: 24px;
    cursor: pointer;
    flex-shrink: 0;
  }
  #cart-checkout-bar {
    position: absolute; /* ç›¸å¯¹äº #taobao-screen å®šä½ */
    bottom: 50px; /* æ”¾åœ¨åº•éƒ¨é¡µç­¾ä¹‹ä¸Š */
    left: 0;
    right: 0;
    z-index: 10;
    padding: 10px 15px;
    background-color: var(--secondary-bg);
    border-top: 1px solid var(--border-color);
    display: flex;
    justify-content: space-between;
    align-items: center;
    box-sizing: border-box;
  }
  .total-price-section { font-weight: bold; }
  #cart-total-price { color: #ff5722; font-size: 18px; }
  .checkout-actions { display: flex; gap: 10px; }
  .checkout-actions button {
    border: none;
    padding: 10px 15px;
    border-radius: 20px;
    font-weight: 500;
    cursor: pointer;
    color: white;
  }
  #share-cart-to-char-btn { background-color: #ff9800; }
  #buy-for-char-btn { background-color: #4caf50; }
  #checkout-btn { background-color: #ff5722; }
  
  /* --- 4. å•†å“è¯¦æƒ…/è¯„ä»· --- */
  .product-detail-content {
      height: 85%;
      width: 95%;
      padding: 15px;
      box-sizing: border-box;
  }
  .close-btn {
      position: absolute;
      top: 10px;
      right: 10px;
      background: none;
      border: none;
      font-size: 24px;
      cursor: pointer;
  }
  #product-detail-body { text-align: center; }
  #product-detail-body .product-image {
    width: 80%;
    max-width: 250px;
    border-radius: 8px;
    margin-bottom: 15px;
  }
  #product-detail-body .product-price { font-size: 24px; font-weight: bold; color: #ff5722; }
  #product-detail-body .product-price::before { content: 'Â¥'; font-size: 16px; }
  #product-reviews-section { padding: 15px 0 0 0; }
  .reviews-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 10px; }
  #product-reviews-list {
    display: flex;
    flex-direction: column;
    gap: 15px;
    max-height: 150px;
    overflow-y: auto;
  }
  .product-review-item { border-bottom: 1px solid #f0f0f0; padding-bottom: 10px; }
  .review-author { font-weight: 500; color: var(--text-secondary); margin-bottom: 5px; }
  #generate-reviews-btn { background-color: #fff7e6; color: #fa8c16; border: none; }
  .product-detail-footer {
    margin-top: auto;
    padding-top: 15px;
    border-top: 1px solid var(--border-color);
  }
  .btn-primary {
      width: 100%;
      padding: 15px;
      background-color: var(--accent-color);
      color: white;
      border: none;
      border-radius: 8px;
      font-size: 16px;
      font-weight: 600;
      cursor: pointer;
  }
  #detail-add-to-cart-btn { background-color: #ff5722; }
  
  /* --- 5. â€œæˆ‘çš„â€é¡µé¢ --- */
  #my-view { padding: 20px; }
  .my-view-content {
      display: flex;
      flex-direction: column;
      gap: 20px;
  }
  .balance-card {
    background: linear-gradient(135deg, #ff9a8b 0%, #ff6a88 100%);
    color: white;
    padding: 20px;
    border-radius: 12px;
    text-align: center;
  }
  #user-balance-display { font-size: 32px; font-weight: bold; margin: 10px 0; }
  #top-up-btn { background-color: rgba(255, 255, 255, 0.9); color: #ff5722; }
  .transaction-item {
    background-color: var(--secondary-bg);
    padding: 12px 15px;
    border-radius: 8px;
    display: flex;
    justify-content: space-between;
    align-items: center;
  }
  .transaction-amount-wrapper { display: flex; align-items: center; gap: 10px; }
  .transaction-amount.income { color: #4caf50; }
  .transaction-amount.expense { color: #f44336; }
  .delete-transaction-btn {
    background-color: #ffdddd;
    color: #ff3b30;
    border: 1px solid #ffc2d1;
    border-radius: 50%;
    width: 24px; height: 24px; font-size: 16px;
    cursor: pointer; line-height: 22px; padding: 0;
  }
  
  /* --- 6. è®¢å•ä¸ç‰©æµ --- */
  #order-list { display: flex; flex-direction: column; gap: 15px; }
  .order-item {
    background-color: var(--secondary-bg);
    border-radius: 8px;
    padding: 12px;
    display: flex;
    gap: 12px;
    cursor: pointer;
  }
  .order-item .product-image { width: 70px; height: 70px; border-radius: 6px; }
  .order-item .order-status { color: #28a745; margin-top: 8px; }
  .order-item .order-time { font-size: 12px; color: var(--text-secondary); margin-top: 4px; }
  #logistics-content-area { padding: 15px; background-color: #f5f5f5; }
  .logistics-product-summary {
    display: flex; gap: 15px; padding: 15px; margin-bottom: 20px;
    background-color: var(--secondary-bg); border-radius: 12px;
  }
  .logistics-product-summary .product-image { width: 60px; height: 60px; border-radius: 8px; }
  .logistics-product-summary .info .status { color: #ff5722; }
  .logistics-timeline { position: relative; padding: 20px 20px 20px 30px; background-color: var(--secondary-bg); border-radius: 12px; }
  .logistics-timeline::before {
    content: ''; position: absolute; left: 15px; top: 20px; bottom: 20px;
    width: 2px; background-color: #e0e0e0;
  }
  .logistics-step { position: relative; margin-bottom: 25px; }
  .logistics-step::before {
    content: ''; position: absolute; left: -22px; top: 5px;
    width: 10px; height: 10px; border-radius: 50%;
    background-color: #ccc; border: 2px solid var(--secondary-bg); z-index: 1;
  }
  .logistics-step:first-child::before { background-color: #ff5722; transform: scale(1.3); }
  
  /* --- 7. â€œé¥¿äº†ä¹ˆâ€ä¸“å± --- */
  #eleme-view { padding: 15px; background-color: #f7f8fa; }
  .eleme-header-bar {
      display: flex;
      flex-direction: column;
      gap: 12px;
      margin-bottom: 15px;
  }
  .eleme-search-container {
      display: flex;
      background-color: white;
      padding: 5px;
      border-radius: 25px;
  }
  #eleme-search-input {
      flex-grow: 1; border: none; background: transparent;
      outline: none; padding: 8px; font-size: 15px;
  }
  #eleme-search-btn {
      background-color: #ff5722; color: white; border: none;
      border-radius: 18px; padding: 8px 15px;
  }
  .eleme-actions { display: flex; justify-content: center; gap: 10px; }
  .eleme-actions button {
      width: 30px; height: 30px; border-radius: 50%; border: 1.5px solid #ccc;
      background-color: white; font-size: 18px; line-height: 1;
  }
  
  /* --- 8. AIç›¸å…³å¼¹çª— --- */
  #ai-product-results-grid {
      display: grid; grid-template-columns: 1fr 1fr; gap: 12px;
  }
  .add-to-my-page-btn {
    position: absolute; bottom: 8px; left: 8px; right: 8px;
    width: calc(100% - 16px); padding: 8px 0;
    background-color: #4caf50; color: white; border: none;
    border-radius: 6px; cursor: pointer;
  }
  .add-to-my-page-btn:disabled { background-color: #cccccc; }
  
  /* --- 9. ç¤¼ç‰©/ä»£ä»˜å¡ç‰‡ --- */
  .cart-share-card {
      width: 230px; border-radius: 12px; background-color: #fff;
      box-shadow: 0 2px 8px rgba(0,0,0,0.08); overflow: hidden;
  }
  .cart-share-header {
      display: flex; align-items: center; gap: 10px; padding: 12px 15px;
      background-color: #fff8e1; color: #ffa000;
  }
  .cart-share-header .icon { font-size: 24px; font-weight: bold; }
  .cart-share-header .title { font-size: 16px; font-weight: 600; }
  .cart-share-body { padding: 15px; text-align: center; }
  .cart-share-body .amount { font-size: 32px; font-weight: 700; color: #ff5722; margin: 5px 0 15px 0; }
  .cart-share-card.paid { border-color: #4caf50; }
  .cart-share-card.paid .status-text { color: #4caf50; }
  .cart-share-card.rejected { border-color: #f44336; opacity: 0.8; }
  .cart-share-card.rejected .status-text { color: #f44336; }
  .gift-card {
      width: 230px; border-radius: 12px; background-color: #fff;
      box-shadow: 0 2px 8px rgba(0,0,0,0.08); overflow: hidden;
  }
  .gift-card-header {
      display: flex; align-items: center; gap: 10px; padding: 12px 15px;
      background-color: #e8f5e9; color: #2e7d32;
  }
  .gift-card-header .icon { font-size: 24px; font-weight: bold; }
  .gift-card-header .title { font-size: 16px; font-weight: 600; }
  .gift-card-body { padding: 15px; }
  .gift-card-items { max-height: 60px; overflow: hidden; }
  .gift-card-footer { border-top: 1px solid #f0f0f0; text-align: right; }
  .gift-card-footer .total-price { color: #ff5722; }
  
  .waimai-meituan-card .gift-card-body p:not(.greeting),
  .waimai-gift-card .body .restaurant {
    font-size: 13px;
    color: #888;
    margin: 0;
  }
  .waimai-meituan-card .waimai-remark,
  .waimai-gift-card .footer {
    margin-top: 12px;
    padding-top: 8px;
    border-top: 1px dashed #e0e0e0;
    font-size: 13px;
    text-align: left;
    color: #555;
  }
  .waimai-meituan-card .waimai-remark .remark-label {
    font-weight: 600;
    color: #8a8a8a;
    margin-right: 5px;
  }
  .waimai-remark {
    margin-top: 12px;
    padding-top: 8px;
    border-top: 1px dashed rgba(0, 0, 0, 0.1);
    font-size: 13px;
    text-align: left;
  }
  .waimai-remark .remark-label {
    font-weight: 600;
    color: #007bff; /* é¥¿äº†ä¹ˆè“ */
    margin-right: 5px;
  }
  .waimai-remark .remark-text {
    color: #333;
  }
  
  /* 10. å¤œé—´æ¨¡å¼é€‚é… */
  #phone-screen.dark-mode #taobao-screen { background-color: #121212; }
  #phone-screen.dark-mode .taobao-tabs,
  #phone-screen.dark-mode .product-card,
  #phone-screen.dark-mode .cart-item,
  #phone-screen.dark-mode .order-item,
  #phone-screen.dark-mode .transaction-item,
  #phone-screen.dark-mode #cart-checkout-bar { background-color: #1e1e1e; }
  #phone-screen.dark-mode .logistics-product-summary,
  #phone-screen.dark-mode .logistics-timeline { background-color: #1e1e1e; }
  #phone-screen.dark-mode #eleme-view { background-color: #121212; }
  #phone-screen.dark-mode .eleme-search-container { background-color: #2c2c2e; }
  #phone-screen.dark-mode .eleme-actions button { background-color: #2c2c2e; border-color: #38383a; }
  
  /* â–²â–²â–² ç²˜è´´åˆ°è¿™é‡Œç»“æŸ â–²â–²â–² */  